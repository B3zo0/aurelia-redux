{"version":3,"sources":["app.js","environment.js","main.js","markdown-aurelia.js","resources/index.js","webpack:///src/core/components/_util.js","webpack:///~/aurelia-dialog/dist/commonjs/dialog-controller.js","webpack:///src/core/components/_base.js","webpack:///src/core/microtemplating.js","webpack:///~/aurelia-dialog/dist/commonjs/ai-dialog-body.js","webpack:///~/aurelia-dialog/dist/commonjs/ai-dialog-footer.js","webpack:///~/aurelia-dialog/dist/commonjs/ai-dialog-header.js","webpack:///~/aurelia-dialog/dist/commonjs/ai-dialog.js","webpack:///~/aurelia-dialog/dist/commonjs/attach-focus.js","webpack:///~/aurelia-dialog/dist/commonjs/dialog-result.js","webpack:///src/transcend/transcend-endpoints.ts","webpack:///~/aurelia-dialog/dist/commonjs/dialog-options.js","webpack:///~/aurelia-dialog/dist/commonjs/lifecycle.js","webpack:///~/aurelia-dialog/dist/commonjs/renderer.js","webpack:///src/demofiles/Authorization.ts","webpack:///src/transcend/components/modal/exportModal.ts","webpack:///src/transcend/components/modal/saveModal.ts","webpack:///src/transcend/transcend-printer.ts","webpack:///src/transcend/transcend-viewer.ts","webpack:///src/core/components/dropdown/Dropdown.tpl.html","webpack:///src/core/components/modal/Modal.tpl.html","webpack:///src/core/components/toolbar/Toolbar.tpl.html","webpack:///src/core/components/dropdown/Dropdown.js","webpack:///src/core/components/modal/Modal.js","webpack:///src/core/components/toolbar/Toolbar.js","webpack:///src/core/docviewer.js","webpack:///src/core/jquery.throttle.js","webpack:///~/aurelia-dialog/dist/commonjs/dialog-configuration.js","webpack:///~/aurelia-dialog/dist/commonjs/dialog-renderer.js","webpack:///~/aurelia-dialog/dist/commonjs/dialog-service.js","webpack:///src/app.ts","webpack:///src/main.ts","webpack:///~/bootstrap/js/affix.js","webpack:///~/bootstrap/js/alert.js","webpack:///~/bootstrap/js/button.js","webpack:///~/bootstrap/js/carousel.js","webpack:///~/bootstrap/js/collapse.js","webpack:///~/bootstrap/js/dropdown.js","webpack:///~/bootstrap/js/modal.js","webpack:///~/bootstrap/js/popover.js","webpack:///~/bootstrap/js/scrollspy.js","webpack:///~/bootstrap/js/tab.js","webpack:///~/bootstrap/js/tooltip.js","webpack:///~/bootstrap/js/transition.js","webpack:///~/bootstrap/dist/css/bootstrap.css","webpack:///~/font-awesome/css/font-awesome.css","webpack:///src/app.html","webpack:///src/transcend/components/modal/exportModal.html","webpack:///src/transcend/components/modal/saveModal.html","webpack:///~/whatwg-fetch/fetch.js","webpack:/src ^/.*$","webpack:///~/aurelia-dialog/dist/commonjs/aurelia-dialog.js","webpack:///~/aurelia-fetch-client/dist/commonjs/aurelia-fetch-client.js","webpack:///~/bluebird/js/browser/bluebird.js","webpack:///~/bootstrap/dist/js/npm.js","webpack:///~/isomorphic-fetch/fetch-npm-browserify.js"],"names":["App","data","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","MarkdownAurelia","html","rawChanged","newValue"],"mappings":";;;;;;;;;;;;;MAAaA,cAAAA,MACX,eAAc;AAAA;;AACZ,SAAKC,IAAL,GAAY,cAAZ;AACD;;;;;;;;oBCHY;AACbC,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCUCC,YAAAA;;;;;;;;;;AAPhBC,UAAQC,MAAR,CAAe;AACbC,qBAAiB,sBAAYL,KADhB;AAEbM,cAAU;AACRC,wBAAkB;AADV;AAFG,GAAf;;AAOO,WAASL,SAAT,CAAmBM,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYX,KAAhB,EAAuB;AACrBQ,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYX,OAAhB,EAAyB;AACvBO,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQM,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMP,QAAQQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCrBYC,0BAAAA;;;;;;WAEXC,OAAO;;;8BAEPC,iCAAWC,UAAU;AACnB,WAAKF,IAAL,GAAY,sBAAOE,QAAP,CAAZ;AACD;;;;;;;;;;;;;;UCTalB,YAAAA;AAAT,WAASA,SAAT,CAAmBE,MAAnB,EAA2B,CAEjC;;;;;;;;;;;;;ACFD,wCACA;;AACA,uCACA,AACA,CACA;;AACA,mEACA;uDACA;AACA;;AACA,oEACA;gDACA;iDACA;iDACA;yCACA,uBACA;AACA;AACA;AACA;AACA;;AACA,8CACA;;;oBACA;yCACA;kDACA;iEACA;8BACA;AACA;qFACA;AACA;uBACA;AACA;;AACA;;;;;;ACjCA,AACA;;AACA;uBAEA;AADA;AAEA,uCACA;;AACA,iDACA;;AACA,oDACA,AACA,AACA;;AACA,0EACA;+EACA,AACA,AACA;;oCACA;oCACA;oCACA;mCACA;AACA,AACA;;oEACA;4CACA;AACA,AACA;;4EACA;6CACA;AACA,AACA;;2EACA;gCACA,AACA;;0GACA;yDACA;wCACA;yCACA;sCACA;AACA;AACA,AACA;;8EACA;iCACA,AACA;;4CACA;oCACA;AACA,AACA;;wIACA;2CACA;oHACA;kEACA;gDACA;iFACA;kDACA;gDACA;uCACA;AACA;AACA,AACA;;+CACA;oCACA;+CACA;8CACA;AACA,AACA;;gCACA;AACA,AACA;;uBACA;;;;;;ACvEA;AACA,2CACA,AACA;;AACA,iEACA;+BACA,AACA;;;+BAEA,AACA,AACA;AAHA;;yEAIA;+DACA,AACA;;iCACA;6BACA,AACA;;qBACA;AACA;;AACA;;;wCCpBA,AACA;AACA,wBACA;;AACA,kDACA,AACA,AACA;oCACA,0BACA,0CACA,AACA,AACA,AACA,0BACA,OACA,AACA,AACA,2DACA,AACA,AACA,uBACA,yBACA,sBACA,kCACA,+BACA,2BACA,wBACA,6BACA,SACA,AACA,AACA;;yCACA;;;;;;;AChCA,AACA;;AACA;uBAEA;AADA;AAEA,mCACA;;AACA,6BACA;;AACA,yDACA,AACA,AACA;;AACA,8QACA,AACA;;;;;;ACfA,AACA;;AACA;uBAEA;AADA;AAEA,qCACA;;AACA,iGACA;;AACA,yDACA;;AACA,wDACA;;AACA,4EACA;iCACA;;2CAEA;6CACA;yCACA;gGACA,AACA;AALA;AAMA,AACA,AACA;;AACA,kGACA;2BACA;uEACA;2CACA;AACA;yCACA;2CACA,AACA;;yDACA;oCACA;AACA,AACA;;sFACA;gEACA;mBACA,AACA;;4DACA;0FACA;uCACA;AACA,AACA;;iDACA;oEACA;2BACA;AACA,AACA;;uBACA;AACA;;AACA,oEACA;gCACA;AACA;;AACA,2eACA;oDACA,AACA,AACA;;kEACA,AACA;;6EACA,AACA;;sCACA;AACA,AACA;;6EACA;oEACA;+CACA;2BACA;2CACA;AACA;AACA,AACA;;gHACA;kCACA;kDACA;AACA;AACA,AACA;;+EACA;qCACA;AACA,AACA;;uBACA;;4BAEA;oDACA;2BACA;AACA;AAJA;4BAMA;oDACA;2BACA;AACA;AAJA;;;;;;AC9FA,AACA;;AACA;uBAEA;AADA;AAEA,qCACA;;AACA,8CACA;;AACA,yDACA;;AACA,wDACA,AACA,AACA;;AACA,sjBACA,AACA,AACA;;kCACA;;;;;;;ACnBA,AACA;;AACA;uBAEA;AADA;AAEA,+BACA;;AACA,6BACA;;AACA,yDACA,AACA,AACA;;AACA,6PACA,AACA;;;;;;ACfA,AACA;;AACA;uBAEA;AADA;AAEA,kCACA;;AACA,uCACA;;AACA,yDACA,AACA,AACA;;AACA,kKACA;8CACA,AACA,AACA;;iCACA,AACA;;mCACA;AACA,AACA;;qEACA;8DACA;qCACA;AACA;AACA,AACA;;qFACA;iCACA;AACA,AACA;;uBACA;;;;;;;ACjCA,AACA;;AACA;uBAEA,AACA,AACA,AACA;AAJA;;AAKA,+FACA,AACA,AACA;;oCACA,AACA;;oCACA;8BACA;;;;;;;;;;;;;;;;;;;ACfA,wCACA,AACA;;;4DAaA;;0CATA;;;kFACA;;AACA;wFAAA;;AACA;gFAAA;;AACA;wGAAA;;AACA;0EAAA;;AACA;+FAAA;;AANA,AAUA;AATA;sCAUA;AACA,AACA;;kFACA;;gCAEA;6BACA;kCACA;qCAJA,AAMA;AALA;AAMA,AACA;;0FACA;;gCAEA;6BACA;kCACA;8BACA;qCALA,AAOA;AANA;AAOA,AACA;;kFACA;kCACA;AACA,AACA;;0GACA;0IAEA;6CACA;AACA,AACA;;mHACA;6IAEA;6CACA;AACA,AACA;;6FACA;oGACA;6CACA;AACA,AACA;;qHACA;gHAEA;6CACA;AACA,AACA;;uFACA;iGACA;6CACA;AACA,AACA;;4GACA;4HAEA;6CACA;AACA;;;;;;;;;AC3EA,AACA;;AACA;uBAEA;AADA;AAEA;sBAEA;sCACA;gCACA;mCACA;AAJA;;;;;;ACNA,AACA;;AACA;uBAEA;AADA;AAEA;AACA,4DACA;0DACA;gDACA,AACA;;mDACA;+BACA;AACA,AACA;;iEACA;+CACA;AACA,AACA;;2CACA;AACA,AACA;;uCACA;;;;;;;ACtBA,AACA;;AACA;uBAEA,AACA,AACA,AACA;AAJA;;AAKA,0DACA;oCACA,AACA,CACA,AACA;;sFACA;oCACA;AACA,AACA;;sFACA;oCACA;AACA,AACA;;sFACA;oCACA;AACA,AACA;;uBACA;;;;;;;;;;;;;;;;;;;oEC1BA;;0CACA;;sCAuBA;AArBA,AAsBA;;6EArBA;wEACA;+BACA;qCACA;AAEA;2BACA;AACA,AACA;;oFACA;mDACA;AACA,AACA;;6DACA;oDACA;2BACA;AACA,AACA;;kEACA;oDACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACxBA,qDACA;;AAAA,wDACA;;;;;;;;;;;;;;;;;;;gEAIA;;0CAAA;;4CAOA;kCAGA;0CACA;yCACA;+CAXA;yBACA;AACA,AAkBA;;iEACA,AACA;yBACA,AACA;;4GACA;yCACA;AACA;AACA;gCACA;;6CAEA;4CACA;4CACA;mFAJA,AAMA;AALA;AAMA,AACA;;+DACA;0CACA;AACA,AACA;;2FACA;+CACA;6BACA;uDACA;wDACA;AACA;6BACA;uDACA;uFACA;AACA;6BACA;uEACA;uDACA;AAEA;;AACA,AACA;;6DACA;6DACA;uJAKA;oDACA;8GAIA;uDACA;sEACA;oEACA;6FACA;8FACA;AACA;;;;AAhFA;AAgFA;;;;;;;;;;;;;;;;;;;ACnFA,qDACA;;AAAA,wDACA;;;;;;;;;;;;;;;;;;;4DAKA;;0CAAA;;4CACA;wDACA;AACA,AACA;;mEACA;6CACA;AACA,AACA;;6DACA;0CACA;AACA;;;;AAfA;AAeA;;;;;;;;;;;;;AChBA,0DACA;;;;;;;;AAHA,wCACA;;wDAYA;;0CACA;;8CACA;mCACA;AACA,AACA;;;gCACA;;wCACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AAEA,AACA;;qDACA;sHAEA;oGAEA;uGAAA;;AACA;AACA,AACA;;qFACA;4KAAA;4BACA;;;;;;;;;AADA;;0CACA;;8GACA;gEACA;AACA;AACA;4BACA;AACA,AACA;;kEACA;uDACA;iIACA;AACA,AACA;;;iCAEA;;+BACA;wCACA;AAEA;8DACA,AACA;;gDAEA;8CAEA,AACA;;iGAEA;wBACA;8BACA;wBAEA;yDAEA;6CACA;6GACA;6CACA;uDACA;mCACA;uDACA;AACA;AACA;AAEA;uCAEA;0DACA;+BACA;AAEA;6CACA;AACA,AACA;;qFACA,AACA;kEACA;0CACA;wDACA;sDACA;mDACA;oDACA;mDACA;oDACA;2BACA;AACA,AACA;;;iCACA;;0EAAA;+BAAA;AACA;6CACA;6CACA;AACA,AACA;;qEACA;6CACA;mDACA;AACA,AACA;;iGACA;2CACA;2HACA;+BACA;yKAAA;4BACA;;;;;;;;;AADA;;oCACA;;2DACA;sEACA;6CACA;sCACA;AACA;+CACA;qIACA;mCACA;sHACA;AACA;+BACA;+CACA;iGACA;mCACA;iGACA;AACA;AACA;AACA;2BACA;AACA,AACA;;;iCAEA;;qGACA;uFACA;kEACA;6CACA;uCACA;mCACA;uCACA;uCACA;AACA;AACA;AAEA,AACA;;gGAAA;;AACA;+FACA;+BACA;+BACA;AAEA;AACA,AACA;;uEACA;iDACA;AACA,AACA;;qEACA;gDACA;AACA;;;;;;;;;;;;;;;;;;AC3KA,8DACA;;AAAA,4DACA;;AAAA,uDACA;;AAAA,qDACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AANA,4CACA;;4EAyBA;;8CAAA;;6CAhBA;uCACA;4CACA;uCACA;4CACA;sCACA;wCACA;oDACA;8CACA;4CAEA;2CACA;yCA+HA;oDACA;kCAwlBA,AAEA;;+CAptBA;AACA,AACA;;kHACA;8DACA;kDACA;iJAGA;6BACA;oEACA;0FACA;qCACA;gDAEA;iEACA;AACA,AACA;;+FACA;;iDAEA;qDAFA;AACA,wCAKA;;yCAGA,AACA;;wCAJA;AACA,AACA,wCAMA;qFACA;AACA,AACA;;2GACA;2CACA;+GACA;0CACA;AACA,AACA;;iGACA;gEACA;AACA,AACA;;iHACA;mDACA;mDACA;8EACA;0DACA;gHACA;uCACA;0DACA;AACA;+BAEA;+BACA;qDACA;AACA;AACA,AACA;;iFACA;gEACA;wCACA;0CACA;AACA;oDACA;2CACA;AACA,AACA;;2FACA;yEACA;iEACA;wHAEA;iDACA;+BACA;wHAEA;iDACA;AACA;AACA,AACA;;;0GACA;;;;;6CAAA;;uDAEA;4DACA;sDACA;oDACA;6DACA;gEACA;+DACA;gEACA;gEACA;2DACA;2DACA;0DACA;uDACA;6DACA;2DACA;4DAhBA;AACA;4DAiBA;;wEAEA;yEACA;wEACA;0EACA;oDALA,AACA;AAAA;;6CADA;gEACA,AAMA;;wEACA;gaAIA;AACA;;;;;;;;AAAA;AACA,AACA;;6EACA;uHACA;AACA,AAIA;;kGACA;mCACA;4BACA;yGACA;sCACA;mEAEA;0CACA,AACA;;qEACA;qDACA;uDACA;oDACA;kEACA;gIAGA;oCACA,AAEA;;6CACA,AACA,AACA;2HAIA;qDACA;8CACA;uCACA;4HAIA;qDACA;8CACA;AACA;AACA;AACA;AACA,AACA;;;oCACA;;mCACA;;;0DAEA;;AACA;uCACA;sCACA;sCACA;2DACA;uCANA,AAQA;AAPA;;0DAQA;;AACA;uCACA;sCACA;sCACA;2DACA;uCANA,AAQA;AAPA;;0DAQA;;AACA;uCACA;sCACA;sCACA;2DACA;uCANA,AAQA;AAPA;;0DAQA;sGAAA;AACA;uCACA;sCACA;sCACA;2DACA;uCANA,AAQA;AAPA;;0DAQA;;AACA;uCACA;sCACA;sCACA;2DACA;uCACA;wCAxCA,AAiCA,AAUA;AATA;AAjCA;AA2CA,AACA;;;2GACA;;;;;6CAAA;;uDAEA;+GACA;yDACA;6DACA;2DALA;AACA;6DAMA;kHACA;;6CADA;iEACA,AACA;;;;;;;;;6CAIA;iEACA;kHACA;8EACA;mDACA;uEACA;8EACA;AACA;;;;;;;;AACA;AACA,AACA;;mGACA;mCAEA;;sEAEA;;kGAEA;4FACA;kIACA;gGACA;mDACA;wGACA;AACA;AACA;AACA;wGACA;4FACA;sGACA;kIACA;+GACA;mDACA;uHACA;AACA;AACA;AACA;gGACA;4FACA;sGACA;kIACA;+GACA;mDACA;uHACA;AACA;AACA;AACA;gGACA;4FACA;kIACA;mIACA;mDACA;2IAGA;AACA;AACA;AAxCA,AA0CA;AAzCA;;;yIA6CA;2HAEA;kKAGA;yHACA;qIAEA;2HAXA,AAaA;AAZA;;+IAeA;iIAEA;uKAGA;+HAEA;2IAIA;iIAdA,AAgBA;AAfA;;uIAkBA;yHAIA;+JAGA;uHACA;mIACA;yHAZA,AAcA;AAbA;;uIAgBA;yHAIA;+JAGA;uHACA;mIACA;yHAxDA,AA4CA,AAeA;AAdA;AA5CA;AA4DA;sGACA;+EACA;gDACA;6DACA;gGACA;iJAEA;sGACA;+EACA;yHACA;AACA;AACA;AACA;AACA;AAEA,AAEA;;mEACA;yCACA;0CACA;4CACA;AAEA;iFACA;8EACA;mDACA;4EACA;8EACA;+EACA;AAEA;8DACA;gDACA;4EACA;8EACA;oDACA;AACA;uCACA;AAEA,AAEA;;sFAEA;oCAEA;mDAEA;mDAEA;wEACA;8EAEA;8EAEA;AAEA;yDACA;uDACA;uDAEA;oEACA;oEAEA;wDACA;sDACA;sDAEA;sGACA;+DACA;8DACA;AACA;qGACA;+DACA;AACA;uGACA;iEACA;2CACA;iEACA;AACA;AAEA;8EAEA;6EACA;mKAGA;wDACA;2CACA;wDACA;AAEA;AAEA;2HACA;4DACA;sGACA;AAEA;iDACA;+CACA;+CAEA,AACA;;wDAEA;6FAEA;;+EACA,AAGA;AAFA;AAGA;AAEA;kEACA;kFAEA;wFACA;qEACA;kEACA;AAEA;yFACA;sEACA;mEACA;AACA;AACA;AAEA;oEACA;uLAIA;iGACA;yCACA;gGACA;AAEA;kEACA;AAxPA,AA2PA;AA1PA;+DA2PA;qEACA;AAEA;8DACA;qGACA;qDACA;AAEA;2DACA;sJAEA;oFACA;wFACA;AACA;AACA;AAEA;qEACA;4EACA;6CAEA;6CAEA;8DACA;iDACA;AAEA;iEACA;oFACA;qEACA;uCACA;qEACA;AACA;AAEA;kEACA;iHACA;wHACA;kJAGA;sFACA;0DACA;+DAEA;qEAEA;sDACA;AAEA;mEACA,AACA;0DACA;oGACA;wFACA;AACA;AACA;iGACA;gGACA;AACA,AACA;;4FACA,AACA,uCACA,AACA,4CACA,AACA;AACA;AACA,AACA;;iIACA;0CACA;AACA;AAGA,AAEA;;kDACA;iDACA;iDACA;iDAEA;wFACA;0DACA;yDAEA;sDACA;sDACA;AAEA;oFACA;uDACA;sDAEA;yDACA;yDACA;AAGA;AAGA;yDACA;kFACA;gFACA;AAEA;iEACA;AAEA,AACA,AACA;;;iGACA;yCACA;mCACA;0GACA;sDACA;oCACA;sCACA;2DACA;6CACA;mEAEA;AACA;sCACA;8DACA;6EACA;AACA;AACA;gEACA;yCACA;6GACA;yDACA;AAEA;;AAEA;+BACA;AACA,AACA;;6GACA;iDACA;qCAEA;kFACA;AACA,AACA;;4FACA;oCACA;oCACA;AACA;wCAEA;4GAEA;mCACA;4GACA;sEACA;gDACA;mCACA;wFAEA;kFACA;kEACA;4DACA;+CACA;oDACA;AACA;wDACA;gDACA;AACA;mCAEA;AACA;uCAEA;oCACA;AAEA;+BACA;AACA,AACA;;+GACA;2CACA;AACA,AACA;;sIACA;yCACA;mCACA;6GACA;+GACA;uDACA;0EACA;+DAEA;mCACA;sDACA;sDACA;AACA;mDACA;wIAEA;mFACA;2FACA;2DACA;uFACA,AAEA;;6FAEA;mFAEA;wEACA;0DAEA;sDACA;AACA;AAEA;+BACA;AACA,AACA;;iHACA;iEACA;sCACA;2BAEA;+CACA;AACA,AAKA;;iFACA;4DACA;2DACA;iEAEA;mDACA;AACA;AACA,AACA;;iFACA;mCAEA;8CACA;kIACA;kDACA;kEACA;mDACA;AACA;0DACA;AACA,AACA;;uHACA;yCAEA;6BAEA;uCACA;4CACA;uCACA;4CAEA;6BACA;6BAEA;yGACA;mCACA;iGACA;uEAEA;gFACA;qCACA;AAEA;8EACA;qCACA;AAEA;uGACA;2EACA;iDACA;AAEA;wEACA;AAEA;+BACA;AACA;;;;;;;;;AC1yBA;;;;;ACAA;;;;;ACAA;;;;;ACAA;AACA;AACA;AACA;AACA,2CACA;;AACA;sBAEA,AACA;AAFA;;AAGA,gDACA;gCACA,AACA,AACA;;8DACA;AACA;;AACA,wCACA;;AACA,kDACA;4BACA;AACA;;AACA;;;;;ACvBA;AACA;AACA;AACA;AACA,2CACA;;AACA;sBAEA,AACA;AAFA;;AAGA,6CACA;gCACA,AACA,AACA;;8DACA;AACA;;AACA,qCACA;;AACA,+CACA;4BACA;AACA;;AACA;;;;;ACvBA;AACA;AACA;AACA;AACA,2CACA;;AACA;sBAEA,AACA;AAFA;;AAGA,+CACA;gCACA,AACA,AACA;;8DACA;AACA;;AACA,uCACA;;AACA,iDACA;4BACA;AACA;;AACA;;;6DCvBA;;;AACA;AACA,oCACA;;AACA,8BACA;0CACA;;iCAEA;mCACA;oCACA;kCACA,AACA,AACA;AANA;;;yEAQA,AACA;0CACA,gBACA,AACA,AACA;;gDACA;wDACA;uGACA,AACA,AACA,AACA,AACA;;;8CAEA;kDACA;kDACA;kDACA;qDACA;iDACA;iDACA;kDACA;kDACA;iDACA;gDACA;+CACA;8CACA;uDACA;mDACA;uDACA;mDACA;mDACA;sDACA;sDACA;6CACA;uDACA;wDACA;sDACA;uDACA;uDACA;sCACA;gDACA;4CACA;0CACA;4CACA;kDACA;8CACA;gEACA;qDACA;+DACA;AApCA,uCAqCA,AACA,AACA;;;gDAIA,AACA,AACA,AACA;;gDACA,AACA,AACA,AACA;;6CACA,AACA,AACA;;kDACA,AACA,AACA;;kDACA,AACA,AACA;;6CACA,AACA,AACA;;+CACA,AACA,AACA;;4CACA,AACA,AACA;;iDACA,AACA,AACA;;iDACA,AACA,AACA;;+CACA,AACA,AACA;;gDACA,AACA,AACA;;8CACA,AACA;;AA1CA,AACA,AACA,uCAyCA,AACA,AACA;;uEACA;qEACA;qEACA;2EACA;+DACA;6DACA;mEACA;yDACA;kGACA;sKACA;0KACA;wFACA;2EACA;uEACA;uEACA;4FACA;mEACA;+DACA;gEACA;+DACA;iEACA;uEACA;+EACA;6DACA;6FACA;mFACA;uEACA;2DACA;2EACA;qEACA;0CACA;mFACA;4CACA;oDACA;gDACA;4CACA;iDACA;qCACA;0CACA;2DACA;mDACA;gCACA,AACA,AACA;;4EACA;sDACA;;iFAEA;oFACA;mFACA;uCACA;mEACA;sEACA;2FACA;mGACA;kEACA;kEACA,AACA;;0CACA;yEACA;yEACA;uEACA;wEACA,AACA;;qFACA;mFACA;qFACA;qFACA;6FACA;+EACA;6EACA;2FACA;yFACA;sFACA,AACA,AACA,AACA;AA9BA;;;2CAgCA;2CACA;4CACA,AACA;AAJA;;2CAMA;2CACA;4CACA,AACA;AAJA;gEAKA;wCACA;qDACA;;;AACA;wCACA;iGACA,oBACA;gCACA,0BACA,AACA;;wCACA;6CACA;6CACA;gDACA;+CACA;yCACA;+CACA;mDACA;8CACA;6CACA;2CACA;+CACA;0CACA;gCACA;2CACA;mDACA;kFACA;0CACA;oCACA;0CACA;wHACA;gCACA,AACA;;+CACA;gCACA;4CACA;+CACA,AACA,AACA;;iEACA,AACA;;gDACA,AACA;;wDACA,AACA,AACA;;iKACA;kFACA;AACA,AACA;;gDACA;mDACA,uBACA,4CACA;yIACA;2EACA;AACA,AACA;;qDACA;gDACA;oDACA;yDACA,AACA;;kEACA;0DACA;AACA;iDACA;0DACA;+DACA;AACA;AACA;gEACA;2DACA;gEACA;AACA;oDACA;uDACA,+BACA,AACA,8EACA;AACA;8CACA;8DACA;AACA,AACA;;kDACA;yCACA;wDACA,+BACA,mCACA,0BACA;;;4CACA;yDACA,AACA;;4FACA;4FACA;;;AACA;wDACA;4DACA;2EACA;uEACA,AACA,AACA;;sFACA;AACA,AACA,AACA,AACA,AACA;;8EACA;2EACA;oEACA,iCACA,AACA;;qEACA;oDACA,AACA,AACA,AACA,AACA,AACA;;;uGACA,AACA;kFACA;AACA,AACA;;sEACA;wDACA;uDACA;wDACA;AACA,AACA;;kFACA;sDACA;AACA,AACA;;2DACA;iFACA;2EACA,AACA,AACA;;uEACA;sEACA,AACA;oHACA;mFACA;AACA,2DACA,AACA;kMACA;8LACA;AACA;6FACA;mFACA;mDACA;AACA;8FACA,AACA;;yGACA,AACA;;AACA;AACA,AACA,AACA;;;8EACA,AACA;;qHACA;yDACA;AACA,AACA;;mDACA,AACA;;wEACA;iDACA,qBACA,AACA;;oDACA,AACA;;+EACA,AACA;;+EACA,AACA;;;0DAEA;6DACA;6DACA;gEACA;6DACA;6DACA;+DACA,AACA,AACA;AATA;;oEAUA,AACA;;yEACA,AACA;;mGACA;kEACA;AACA,AACA;;kGACA;wEACA;8EACA;0GACA;kEACA;AACA,AACA,AACA;AACA,AACA;AACA,AACA;;8DACA,AACA;;kDACA,AACA;;uFACA;gGACA;yEACA;AACA;AACA,AACA;;mGACA;AACA;AACA,AACA;;wFACA,AACA,AACA;;iHACA;wGACA;yFACA;AACA,AACA;;2EACA;kEACA;gEACA;AACA,AACA;;gFACA;mEACA;AACA;AACA;2DACA;AACA;AACA;mDACA;AACA,AACA;;4DACA;8DACA;2DACA;yEACA;0NACA;0EACA;AACA;AACA,AACA;;uCACA;AACA,AACA;;uFACA;kDACA,AACA;;kEACA;sEACA,AACA;;gFACA;2DACA;4EACA;iGACA;4EACA;qEACA;mFACA;AACA;AACA;AACA;AACA;AACA,AACA;AACA,AACA;;iFACA,AACA;;sDACA,sBACA,AACA;;gDACA,AACA;;gFACA,AACA;;2PACA,AACA,AACA;;;kDACA,AACA;;;0DAEA;mDACA,AACA,AACA;AAJA;;6DAKA;8CACA;4FACA;uDACA;yEACA;oEACA,AACA;AACA,AACA,AACA,AACA,AACA;;iGACA;wDACA;qDACA;AACA;AACA,AACA;;uDACA;kEACA;qFACA;sDACA;AACA,AACA;;+EACA;gEACA;4CACA,sFACA;AACA;AACA,AACA;;sDACA;qDACA;oFACA;qDACA;oCACA;kEACA,2CACA,AACA,yBACA,AACA;;oEACA;kDACA;AACA;2CACA,mBACA,AACA;;gEACA,AACA;;0CACA;8DACA;4DACA;2FACA;AACA;;AACA,AACA;;0EACA;2GACA;AACA,AACA;;wDACA,AACA;;6EACA;8EACA;iEACA;sEACA;oDACA;kGACA;oGACA;kDACA;AACA,uCACA;qDACA;2FACA;qGACA;kDACA;AACA,AACA;;iGACA,AACA;;mGACA;0EACA;yEACA;oEACA;AACA,2CACA;yEACA;oEACA;AACA;AACA,AACA;;+CACA,AACA,AACA;AACA,AACA;;qDACA;+CACA;4DACA;4EACA;AACA;mPACA;uCACA;yIACA;AACA,AACA;;qFACA;8KACA;AACA,AACA;;gDACA;+VACA;AACA,uCACA;6VACA;AACA,AACA;;qEACA;gDACA;mDACA;AACA,AACA;;mDACA;sDACA;qFACA;iDACA;yDACA;mDACA;yDACA;4LACA,kBACA;4EACA;AACA,AACA;;qDACA;+EACA;oFACA;wIACA;6EACA;mGACA,0CACA;+EACA,2CACA;AACA;gFACA;mGACA,6CACA;+EACA,8CACA;AACA;2EACA;;;AACA;mDACA;yEACA;AACA;AACA;AACA;AACA,AACA;;wGACA;4DACA;sMACA;6DACA;gEACA;AACA;AACA;4GACA;4DACA;sMACA;6DACA;gEACA;AACA;AACA;4GACA;4DACA;sMACA;6DACA;gEACA;AACA;AACA;4GACA;AACA;oEACA;uDACA;sDACA;AACA;uGACA;AACA;8DACA;yFACA;4EACA;0DACA;qEACA;0DACA;wDACA;AACA;AACA;AACA;uGACA;AACA;+KACA;yFACA;4EACA;0DACA;6GACA;2EACA;yEACA;AACA;AACA;AACA;2GACA;AACA;6DACA;kGACA;4DACA;sEACA;qEACA;gEACA;AACA,uDACA;qEACA;gEACA;AACA;AACA;AACA;+EACA;wHACA;8DACA;0DACA;AACA,2CACA;wEACA;uEACA;0DACA;AACA;AACA;+GACA;AACA;gDACA;qDACA;4EACA;AACA;AACA;6GACA;AACA;yCACA,kBACA;AACA;8GACA;AACA;AACA;AACA;8GACA;AACA;yCACA,OACA;AACA;6GACA;kDACA,AACA;;kEACA;AACA;qDACA;AACA;AACA,AACA;;uDACA;+CACA;6CACA,AACA;;wEACA;AACA;0GACA;AACA;4FACA;+DACA;6DACA;AACA;AACA;yGACA;AACA;4FACA;qEACA;6DACA;AACA;AACA;6GACA;AACA;kDACA;wEACA;2DACA;AACA,2CACA;4DACA;AACA;AACA;2GACA;kDACA;uDACA;AACA;iFACA;sHACA;4DACA;+CACA;uDACA,AACA;;kDACA;AACA;yGACA;AACA;AACA;kDACA;gDACA;qFACA;AACA;sHACA,AACA;;8DACA;kDACA;mFACA;AACA,AACA;;uDACA;kDACA;0DACA;AACA,AACA;;+GACA;0DACA;uEACA;qFACA;AACA;kEACA;uGACA;oEACA;2EACA;6EACA;wEACA;AACA,+DACA;6EACA;wEACA;AACA;AACA;AACA;uFACA;6HACA;kEACA;8IACA;oFACA;AACA;AACA,mDACA;kEACA;gFACA;4EACA;AACA;AACA,yEACA;AACA;qEACA;0GACA;oEACA;yEACA;oEACA;AACA;AACA;uFACA;gIACA;kEACA;AACA,mDACA;gFACA;+EACA;kEACA;AACA;AACA,gEACA;AACA;wEACA;4EACA;+DACA;AACA;0CACA;AACA;AACA;kHACA;+DACA;2EACA;8DACA;gDACA;0DACA;+DACA;8EACA;AACA;AACA;6GACA;oDACA;2FACA;wDACA;mIACA,uGACA;kFACA;uDACA;sEACA;+DACA;iEACA;AACA;8GACA;oDACA;2FACA;wDACA;mIACA,uGACA;iFACA;uDACA;sEACA;+EACA;iEACA;AACA;gHACA;oDACA;2FACA;oFACA;6EACA;oEACA;mFACA;4DACA;uIACA,uIACA;2DACA;8EACA;uEACA;AACA;6EACA;wDACA;AACA,AACA;AACA;iHACA;oDACA;2FACA;mFACA;6EACA;oEACA;mFACA;4DACA;uIACA,sIACA;2DACA;8EACA;uEACA;AACA;6EACA;wDACA;AACA,AACA;AACA;AACA,AACA;;+EACA;oHACA;qHACA;wLACA;oHACA;kEACA;mEACA;mEACA;+EACA;AACA,2CACA;wFACA;uGACA;gHACA;8CACA;gGACA;kDACA;mEACA;mEACA;+EACA;AACA;AACA;AACA,AACA;;kDACA;qGACA;AACA,AACA;;8DACA;uDACA;6OACA;wNACA;yEACA,AACA;AACA;AACA,AACA;;gFACA,AACA;;4EACA;4DACA;+EACA;yEACA;uDACA;yDACA;+DACA,AACA;;4HACA;6DACA;qEACA,AACA;;qEACA,AACA;;kGACA,AACA;;yHACA,AACA;;qEACA;6DACA,AACA;;;sEAEA;+DACA;mFACA,AACA,AACA;AALA;;iFAMA;wEACA;yEACA,AACA;;+EACA;0EACA;yDACA;0DACA;AACA;;gEAEA;yDACA;0DACA,AACA,AACA;AALA;;mFAMA,AACA;;yDACA;0DACA,AACA;;sGACA;kEACA,mEACA,AACA;;gDACA,8BACA,AACA;;sEACA,AACA;;4DACA;0GACA;mEACA;uEACA;2EACA;kEACA;AACA,AACA,AACA;;4EACA;uEACA;gFACA;qGACA;AACA,AACA;;kHACA;sKACA;qFACA;AACA,AACA;;oFACA;6EACA;AACA;AACA,AACA;;2FACA;4FACA;6FACA;AACA,AACA;;0EACA;sEACA;oEACA;AACA;oFACA;uEACA;AACA;AACA,AACA;;sEACA;mEACA;mFACA;4FACA;AACA,AACA;;4EACA,AACA;AACA;AACA,AACA;AACA;AACA,AACA;;sDACA;2CACA;mFACA;mFACA,SACA;AACA;uCACA;AACA,AACA;;0DACA;mGACA;2FACA;AACA,AACA;;0DACA,AACA;;mEACA;;;AACA;;AACA,AACA;;kFACA;8CACA;8CACA,aACA,AACA;;uJACA,AACA,AACA;;gDACA,uLACA,AACA,+DACA;AACA,uCACA;sJACA,AACA;;gDACA,8DACA,AACA,+DACA;AACA;AACA,AACA;;yEACA;uDACA;+GACA,AACA;mOACA;+FACA;+FACA;iEACA;0DACA;wDACA;wEACA;mFACA;yHACA;8DACA;AACA;AACA,0DACA;wEACA;oEACA;+EACA;qHACA,AACA;;0DACA;AACA,AACA;AACA;AACA,AACA;;oIACA;6CACA;8CACA;2CACA;4CACA;6CACA;8CACA;AACA,AACA;;uDACA;sQACA,AACA;;0EACA,AACA;;uEACA;+CACA;iDACA;kDACA;AACA,AACA;;;wDAEA;iDACA;kDACA,AACA,AACA;AALA;;gGAMA;oFACA;qFACA;AACA,AACA;;kEACA;8DACA;4DACA;AACA,AACA;;4EACA;+DACA;AACA;AACA;AACA;AACA,AACA;;sDACA;oCACA,AACA;;wEACA;gDACA;8CACA;4FACA,AACA;;2GACA,mCACA,AACA;;kEACA;0GACA;sEACA;wDACA,kCACA;+CACA;AACA;AACA;uCACA;AACA,AACA;;2CACA;0EACA;+CACA;2CACA;4CACA;6CACA;gDACA;+CACA;;;AACA;8FACA;mDACA;AACA;AACA,yEACA;oGACA;mDACA;AACA;AACA,uEACA;4EACA;kDACA;iDACA;uFACA,AACA;;sDACA;yDACA,AACA;;yDACA;oDACA;AACA,AACA;;wEACA;kDACA;AACA,AACA,wIACA,kBACA,AACA;;0EACA;uDACA;AACA;AACA,2CACA;4FACA,AACA;;2DACA;yDACA,AACA;;yDACA;oDACA;AACA,AACA;;wEACA;kDACA;AACA,AACA;;iIACA,kBACA,AACA;;0EACA;uDACA;AACA;AACA;AACA,AACA;;4DACA;sEACA;sDACA;AACA;AACA,AACA;;6DACA;qEACA;uDACA;AACA;AACA,AACA;;yCACA,AACA;;0DACA,AACA,AACA;;;oEACA,AACA;;8EACA,AACA;;wEACA;mGACA;qFACA,AACA;;mGACA,AACA;;8EACA;uGACA;AACA,AACA;;qEACA;mEACA;kEACA;+CACA;AACA,AACA;;+DACA;+DACA,oBACA;AACA;AACA,AACA,AACA;AACA,AACA;;sEACA;oCACA;gEACA;uDACA,eACA;AACA;uCACA;AACA,AACA;;yDACA;oFACA;AACA,AACA;;0EACA;qEACA;yGACA;AACA;AACA,AACA;;4EACA;qEACA;2FACA;qDACA;6DACA;8DACA;AACA;AACA,AACA;;oGACA;6DACA;2CACA;sDACA;+CACA;AACA;AACA,kFACA;2CACA;AACA;iDACA;qEACA;AACA;wFACA;2CACA;AACA;uCACA;AACA,AACA;;8DACA,AACA;;0EACA,AACA;;2CACA;uEACA,sCACA;qGACA;;;uCACA;AACA,AACA,AACA;;8CACA;sDACA,AACA;AACA,AACA;;yFACA;kDACA;wCACA,iBACA;2DACA,AACA;;8FACA,wFACA,AACA;;0EACA,AACA;;oFACA;kGACA;yDACA;iDACA,AACA,AACA;;oCACA;wCACA,YACA,AACA,iBACA,AACA;;mDACA;sHACA;4CACA,iBACA;AACA,AACA;;8DACA,2BACA;AACA,AACA;;4DACA;4DACA;qEACA;iEACA;kEACA;oEACA;AACA;AACA;AACA,AACA;;uCACA;AACA,AACA;;mDACA;wFACA,AACA;;iDACA,wBACA,AACA;;4DACA;6CACA;2CACA,6BACA;oFACA,AACA;AACA,AACA;;mDACA;wFACA,AACA;;4IACA;6CACA;2CACA,6BACA;AACA,AACA;;mDACA;wFACA,AACA;;4IACA;6IACA;4CACA;iEACA;iEACA,6CACA;AACA,uCACA;mEACA;iDACA;+CACA,6BACA;AACA;AACA,AACA;;yEACA,AACA,AACA;8HACA;+EACA,iBACA,AACA;;2EACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;AACA,AACA;;gEACA;iGACA;iDACA;wEACA;wEACA;0KACA;mDACA;;6DAEA;0DACA,AACA;AAHA;AAIA,+CACA;;yDAEA;8DACA,AACA;AAHA;AAIA;AACA,iIACA;0EACA;;6DAEA;0DACA,AACA;AAHA;AAIA,+CACA;;6DAEA;0DACA,AACA;AAHA;AAIA;AACA,2CACA;;yDAEA;sDACA,AACA;AAHA;AAIA;AACA;AACA,AACA;;gEACA,AACA,AACA;iFACA;iFACA;kFACA;iFACA;8HACA,AACA;;wGACA;oDACA;kDACA;0DACA,AACA,AACA;;uEACA;wDACA;yDACA,AACA,AACA;;uEACA;wDACA;yDACA,AACA,AACA;;yEACA;yDACA;0DACA,AACA,AACA;;uEACA;wDACA;yDACA,AACA,AACA;;;;AACA,AACA;;;8CAEA;yCACA;0CACA;mDACA;wDACA;2DACA;AANA;;AAOA;iGACA;4DACA;AACA;0FACA;2FACA,AACA,AACA;;mGACA,AACA;;iDACA;iDACA;AACA,AACA,8DACA;iDACA;AACA,uCACA;+CACA;uDACA,AACA;AACA;8CACA;qDACA;AACA,AACA;;0EACA;8DACA;qFACA;qFACA;sFACA;qFACA;AACA;gEACA,AACA;;;gFAEA;gFACA;kFACA;gFACA,AACA;AALA;AAMA;AACA,AACA;;6DACA;iEACA;mDACA;0DACA,iCACA;iHACA,kBACA;qGACA;uFACA;6NACA;AACA;AACA;0EACA;0EACA;2EACA;AACA,gEACA;;mDAEA;mDACA;oDACA,AACA;AAJA;AAKA;AACA,AACA;;+DACA;iFACA;wDACA;kEACA,0CACA;mIACA,kBACA,AACA;AACA;AACA,AACA;;sFACA;4EACA;iDACA,0CACA,iBACA;+EACA;gHACA;AACA;AACA;sDACA,AACA;qDACA;AACA;AACA;mEACA,AACA;AACA;AACA,AACA,AACA;;yGACA,AACA;;4DACA;2FACA,AACA;;4EACA;kFACA;wCACA;oDACA,gCACA;gDACA,AACA,AACA;mIACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;iGACA;sFACA;2DACA,AACA;;sEACA;;;mDACA;AACA;AACA;+EACA;gHACA;AACA,2CACA;sIACA;6EACA;uGACA;kFACA;kEACA;;;+CACA;AACA;AACA,AACA;;sDACA;AACA;gDACA,AACA;;4DACA;2FACA;8EACA;8DACA;;;2CACA;AACA;AACA,AACA,AACA;;2FACA;oFACA;sFACA;AACA,kGACA;mFACA;uFACA;AACA,uCACA;sFACA;uFACA;AACA,AACA;;2GACA;AACA;AACA,uGACA,YACA,AACA,AACA;;sEACA,+CACA,AACA;;+EACA;AACA,AACA,AACA,AACA;;8EACA;wDACA;8CACA;kDACA;oDACA;0FACA;8DACA;gDACA,2EACA,AACA;;yCACA;8DACA;yEACA;AACA;wEACA;2EACA,AACA;;gDACA;wCACA,AACA;;;oEAEA;yEACA;wEACA;4EACA;uEACA;4EACA;iFACA;gFACA;oFACA;+EACA;6CACA;kDACA,AACA,AACA;AAdA;;;uDAgBA;6DACA;8CACA,AACA,AACA;AALA;;wCAMA;qHACA;oFACA;uGACA;AACA,uCACA,AACA;;2DACA,AACA;;8DACA,AACA;;0FACA,AACA;;uEACA,AACA;;uEACA;4CACA;AACA,AACA;;0DACA;8GACA,AACA;AACA,AACA;;wHACA;uEACA;AACA,AACA;;AACA;yDACA;yFACA;AACA,AACA;;uDACA;kDACA;yEACA;iDACA;wEACA;+DACA;AACA;AACA;uCACA;AACA,AACA;;oDACA;iFACA;sEACA;0DACA;qEACA;0DACA;oEACA,mDACA,AACA,gCACA;AACA,uCACA;6EACA;gEACA;yEACA;8DACA;sDACA;wEACA,mDACA,AACA,gCACA;AACA;AACA;AACA,AACA;;sDACA,AACA;;8CACA,AACA;;+DACA;mDACA;sFACA,AACA;AACA,uCACA;sDACA;;;AACA;AACA,AACA;;qDACA,qBACA,AACA;AACA,AACA;;+DACA;4CACA,gBACA;sDACA;uDACA;2DACA;uDACA,gBACA,AACA;;2EACA,AACA;;;0CAEA;yCACA;8CACA;2CACA;4CACA;+CACA;AANA,8CAOA;6HACA;;+CAEA;gDACA,AACA;AAHA;AAIA,AACA;;oDACA,AACA;;4DACA;mDACA;sDACA;6FACA;iIACA;sNACA,AACA;;yCACA,AACA;;0DACA;+DACA,AACA,AACA,AACA;;2CACA;oEACA;AACA,AACA,AACA;;kDACA,AACA;;uDACA;oEACA;uEACA;mCACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;AACA,AACA;;0DACA;6CACA,gBACA,AACA;;8CACA;2DACA,AACA;;oDACA,AACA;;mDACA,AACA;;mDACA;mDACA;sDACA;iIACA;mEACA;4EACA;+DACA;6FACA,AACA;;kDACA,AACA;;0EACA;kHACA;gDACA,AACA,CACA,OACA;4GACA;2EACA;AACA,2CACA;6FACA;AACA;AACA,AACA,AACA;;uDACA;wEACA;8DACA;mEACA;mCACA;AACA,AACA;;6CACA;yCACA;yCACA;yCACA;yCACA;AACA,AACA;;iDACA;2CACA;AACA,AACA;;iDACA;2CACA;AACA,AACA;;kDACA;2CACA;AACA,AACA;;;sCAEA;6FACA,AACA;8DACA,AACA;;qEACA;qEACA,AACA;;kFACA;qEACA,AACA;;8EACA;qEACA,AACA;;qEACA;kFACA,AACA;;8EACA;kFACA,AACA;;kFACA;8EACA,AACA;;qEACA;8EACA,AACA;;8EACA;8EACA,AACA,AACA;;0DACA;wDACA;oFACA,AACA,AACA;;gEACA;iEACA;AACA;AACA;4EACA;4CACA;uGACA,+DACA,AACA;;6DACA,QACA;oJACA,GACA,AACA,AACA;;6DACA;kFACA,AACA,AACA;;kDACA,gCACA;AACA,AACA,AACA;AA3DA;;;sCA6DA;sEACA;sDACA,AACA,AACA;AALA;;;sCAOA;sEACA;sDACA,AACA,AACA;AALA;;;0CAOA;2CACA;sCACA;0EACA;4EACA;oJACA,GACA,AACA;;6DACA;0DACA;yDACA;4DACA;4DACA;kFACA,AACA;;0DACA;4HACA;6DACA,AACA;;kIACA,AACA;;kDACA,gCACA;AACA,AACA,AACA;AA1BA;;oGA2BA;sDACA;4CACA;kDACA,AACA,AACA;;iGACA;+DACA,SACA,AACA;;gDACA;gDACA,AACA;;+EACA;iEACA;oFACA;+EACA;+EACA;AACA,AACA;;wCACA,kBACA;wCACA,6BACA;AACA,AACA,AACA;;8FACA;+CACA;0DACA,AACA;;2EACA;yEACA;0EACA;gEACA,AACA;;kEACA;kEACA;8DACA;AACA,+CACA;mDACA;AACA;AACA,AACA;;0DACA;AACA,AACA,AACA;;yEACA;8DACA;AACA,AACA,AACA;;0EACA;qDACA;8DACA;yCACA;mDACA,AACA;;6GACA;mEACA;AACA;AACA;AACA;AACA,AACA;;oJACA,AACA;;6CACA;+HACA,gGACA,AACA;;oCACA;0DACA;+CACA;AACA,iEACA;+CACA;AACA,kEACA;+CACA;gEACA;oEACA;kEACA;gEACA;oEACA;wDACA;oEACA;AACA;yCACA;yCACA;yCACA;yCACA;2DACA;kFACA,AACA;;qDACA;0DACA;AACA;AACA,AACA;;+DACA;qHACA;6CACA;8CACA;8CACA;8CACA;8CACA;AACA,sDACA;mFACA;8CACA;8CACA;8CACA;AACA,qDACA;kDACA;yEACA;8CACA;8CACA;AACA,uCACA;wEACA;yEACA;8CACA;8CACA;AACA,AACA;;sCACA,SACA,SACA,SACA,AACA;;uCACA;AACA,AACA;;sEACA;yEACA;6CACA;8CACA;8CACA;AACA,sDACA;2EACA;8CACA;AACA,qDACA;kDACA;wEACA;AACA,uCACA;iEACA;kEACA;AACA,AACA;;sCACA,SACA;uCACA;AACA,AACA;;uDACA;oEACA;yEACA;AACA;AACA;AACA,AACA;;sEACA;;;mCACA;wDACA;2CACA,AACA;;uHACA;wJACA,AACA,AACA;;AACA;uDACA,AACA;;0IACA,AACA;;wNACA,AACA,AACA;;mDACA;4DACA;8DACA;AACA;AACA,AACA;;4DACA;sOACA;;;uCACA;AACA;2CACA;AACA;yDACA;0IACA;AACA,AACA;;2DACA,AACA;2FACA;0FACA;0FACA;0FACA;AACA,AACA;;gDACA;iFACA;AACA;gCACA;2DACA;oEACA,YACA,AACA;;wCACA;yIACA;sIACA;8DACA;0CACA;kDACA,AACA;;6EACA;yFACA;kEACA;AACA;AACA;AACA;AACA,AACA;;+CACA,AACA;;yGACA,AACA;;wCACA;gFACA,4CACA,AACA;;mFACA;yEACA;sGACA;+EACA,AACA;;yCACA;yCACA;yCACA,AACA;;0CACA,+CACA,AACA;;yCACA;yCACA,AACA;;sDACA;yDACA;kDACA;wDACA;wDACA,AACA;;yEACA;AACA;AACA,6DACA;yDACA;yDACA;kDACA,AACA;;gFACA;6GACA;0DACA;kEACA;AACA;AACA;kFACA;kIACA;AACA;mFACA;sHACA;AACA;iFACA;kHACA;gEACA;wEACA;AACA;AACA,AACA;;AACA;AACA,2CACA;iFACA;AACA;AACA,AACA;;4DACA;gEACA;mEACA;gKACA;oDACA;qDACA;qGACA;wEACA;AACA;qDACA;+EACA;wEACA;AACA;qDACA;qGACA;wEACA;AACA;qDACA;+EACA;wEACA;AACA;qDACA;+EACA;wEACA;AACA;qDACA;wGACA;wEACA;AACA;qDACA;+EACA;wEACA;AACA;qDACA;wGACA;wEACA;AACA,AACA;;AACA;AACA;AACA;;AACA;AACA;mDACA;mDACA;AACA;AACA,AACA;;+CACA;oHACA;6DACA,AACA;;8CACA;0CACA;0CACA,AACA,AACA;;yDACA;kHACA;qEACA;0DACA;uDACA;AACA;AACA,AACA,AACA;;oGACA;+EACA;iDACA;uDACA;uDACA;kDACA,AACA;;wIACA,4HACA,AACA;;8CACA;yEACA;AACA,AACA;;4DACA;uDACA;AACA;AACA;sEACA;AACA;AACA,AACA;;4EACA,AACA,AACA;;gDACA;6EACA;AACA;AACA,sEACA;AACA;0CACA;+CACA;AACA,sDACA;iDACA;AACA;AACA;AACA,AACA;;6CACA,AACA;;yGACA,AACA;;wCACA;gFACA,4CACA,AACA;;mFACA;yEACA;sGACA;+EACA,AACA;;yCACA;yCACA;yCACA,AACA;;0CACA,+CACA,AACA;;yCACA;yCACA,AACA;;8GACA;6CACA;mDACA;mDACA;qEACA;oGACA;kDACA;AACA,AACA;;8CACA;AACA,gIACA;sFACA;8CACA;AACA,uCACA;oFACA;AACA;0CACA;AACA,AACA;;gDACA;oGACA,AACA;;kDACA,AACA;;sDACA;wFACA,AACA;;uEACA;4DACA;qGACA;iDACA,AACA,AACA;;wIACA;sEACA,0BACA;wEACA;2EACA;+EACA;4HACA;0DACA;AACA;AACA;AACA,AACA;;mDACA;yDACA,AACA;;yGACA,AACA;;wCACA;gFACA,4CACA,AACA;;+EACA,AACA;;wCACA;wCACA,AACA;;wEACA,AACA;;2CACA;AACA;AACA,uCACA;gDACA;iDACA;8HACA,AACA;;6FACA,AACA;;iJACA;4HACA;AACA,0GACA;oKACA;AACA;AACA;AACA,AACA;;yDACA;yDACA,AACA;;yGACA,AACA;;wCACA;gFACA,4CACA,AACA;;mFACA;wGACA,AACA;;+EACA,AACA;;6CACA;gFACA,iDACA,AACA;;+CACA,kDACA,AACA;;sCACA;wCACA,AACA;;sFACA;+GACA;yFACA,AACA;;8GACA;sGACA;2FACA;8CACA,AACA;;mEACA;+EACA;6DACA;6DACA;0DACA;AACA;AACA;AACA;AACA;AACA;AACA,AACA;;sEACA;mDACA;mDACA;kDACA;oGACA;wHACA;yDACA,AACA;;8FACA;oDACA;6FACA;AACA,wEACA;oDACA;oDACA;yHACA;AACA;AACA,AACA;;kDACA;8CACA;wJACA;8CACA;2EACA;AACA;AACA,AACA;;oEACA,AACA;;0CACA;0CACA,AACA;;;wFAEA;sFACA,AACA;AAHA;AAIA,AACA;;2EACA;;mDAEA;mDACA;oDACA;oDACA,AACA;AALA;AAMA,AACA;;sDACA;0CACA;wCACA;gFACA,4CACA,AACA;;sEACA;uCACA;uCACA;AACA,AACA;;0DACA;qCACA,SACA,AACA;;yDACA,AACA;;yGACA,AACA;;wGACA,AACA;;wCACA;gFACA,4CACA,AACA;;+EACA;8EACA,AACA;;;;AACA;;AACA;;AACA;;AACA,AACA,AACA;;sCACA;yDACA;2DACA;2DACA;uEACA;yEACA;AACA,AACA;;uEACA;yDACA;0HACA;+IACA,AACA;;4CACA,AACA,AACA;yDACA;kFACA,AACA;;gEACA,AACA;8GACA;+CACA,AACA;;mGACA;mGACA,AACA;;2DACA,0IACA,AACA,qDACA;AACA;AACA,AACA;;0CACA;sCACA;iEACA;AACA,AACA;;8DACA;0FACA;AACA,AACA;;uDACA;qCACA,SACA,AACA;;yDACA;yGACA,AACA;;wGACA,AACA;;wCACA;gFACA,4CACA,AACA;;+EACA;8EACA;uHACA,AACA;;sCACA;wFACA;0CACA;AACA,AACA;;yGACA,AACA;;6GACA,AACA;;uDACA,oBACA;sDACA,mBACA,AACA;;;gDAEA;2CACA;4CACA;+CACA;wDACA;sDACA;AANA,gHAOA;+CACA;8FACA;6CACA;oGACA,AACA;;kFACA;oMACA;AACA,uCACA;0DACA,AACA;;uFACA;sFACA;oFACA;qFACA;oFACA;sFACA;sFACA,AACA;;wDACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oJACA;sJACA;sJACA;8HACA;iHACA,AACA;;6DACA;kXACA;yIACA;qIACA;yIACA;8DACA,AACA;;qHACA;oGACA;qGACA;wHACA;iFACA;4HACA;+EACA;+GACA;6GACA;6GACA;4GACA;AACA;AACA,AACA;;uFACA;yEACA;uEACA;yFACA;8DACA;AACA,AACA;;uDACA;gEACA;2CACA;AACA;oFACA,AACA;;0DACA;4DACA;2DACA,AACA;;uEACA;sEACA;AACA,AACA;;yDACA;gDACA;+DACA;iDACA;6CACA;AACA;6CACA,AACA,AACA;;;8CACA;sDACA;AACA,AACA;;0DACA;wDACA;gJACA,AACA;;qEACA;sFACA;qFACA;sFACA;oFACA;4EACA;0DACA;6EACA;4EACA;8EACA;8EACA,AACA;;4EACA;wEACA;8EACA,AACA;;AACA;AACA;AACA,AACA;;4DACA;iEACA;AACA,AACA;;4DACA;wCACA;AACA;6IACA;mJACA;0CACA;6CACA;AACA;AACA,AACA;;oEACA;AACA;0FACA;gDACA;wDACA;AACA;AACA,AACA;;kDACA;;8CAEA,gCACA,4CACA,6CACA,AACA;sDACA,AACA;AAPA;uCAQA;AACA,AACA;;iDACA;oFACA;gFACA;iDACA;AACA,AACA;;yDACA;oFACA;wEACA;AACA,AACA;;gEACA;wEACA;wEACA;AACA;iGACA;AACA,AACA;;qDACA,AACA;sEACA;uDACA,AACA,AACA;;4DACA;kDACA,AACA;;2EACA;AACA;iEACA;+CACA;gEACA,AACA,AACA;;8CACA,AACA,AACA;;0DACA;mDACA;AACA,AACA;;0DACA;iDACA;AACA,AACA;;gFACA;kEACA,AACA;AACA,AACA;;mFACA;mDACA;yEACA;iFACA;wDACA;mDACA,yBACA;4CACA,OACA;4CACA,UACA;4CACA,YACA;AACA;AACA;AACA,AACA;;oDACA;kEACA;4FACA;AACA;4DACA;oEACA;uDACA;AACA;AACA,AACA;;uDACA,AACA;;yDACA;gDACA,AACA,AACA,AACA;;4FACA;4FACA;;;AACA;wDACA;4DACA;gEACA;sFACA;AACA,AACA,AACA,AACA;;8EACA;2EACA;2DACA;oDACA,AACA;;sGACA;kFACA;AACA,AACA;;iFACA;sDACA;AACA,AACA;;2DACA;iFACA;2EACA,AACA,AACA;;uEACA;sEACA,AACA;oHACA;mFACA;AACA,2DACA,AACA;kMACA;8LACA;AACA;6FACA;mDACA;AACA;8FACA,AACA;;yGACA;AACA,AACA;;8EACA,AACA;;qHACA;yDACA;AACA,AACA,AACA,AACA;;mDACA,AACA;;wEACA;iDACA,qBACA,AACA;;oDACA,AACA;;+EACA,AACA;;+EACA,AACA;;;0DAEA;6DACA;6DACA;gEACA;6DACA;6DACA;+DACA,AACA,AACA;AATA;;AAUA,AACA;;yEACA,AACA;;mGACA;kEACA;AACA,AACA;;kGACA;wEACA;8EACA;0GACA;kEACA;AACA,AACA,AACA;AACA,AACA;AACA,AACA;;8DACA,AACA;;kDACA,AACA;;uFACA;gGACA;yEACA;AACA;AACA,AACA;;mGACA;AACA;AACA,AACA,AACA;;iHACA;wGACA;yFACA;AACA,AACA;;sEACA;kEACA;gEACA;AACA,AACA;;gFACA;mEACA;AACA;AACA,AACA;AACA;AACA,AACA;AACA,AACA;;yDACA;oDACA;iEACA;mEACA;+DACA;mFACA;uRACA;AACA;gEACA;oFACA;4EACA;4FACA;4EACA;AACA;AACA;AACA,AACA;;kDACA;AACA,AACA;;sGACA;gGACA;yEACA;AACA,AACA;;wEACA;2DACA;AACA;AACA,AACA;;yGACA;gGACA;iFACA;AACA,AACA;;8DACA;0DACA;wDACA;AACA,AACA;;wEACA;2DACA;AACA;AACA;AACA,AACA;;uEACA;qDACA;uEACA;oGACA;qDACA;wFACA;8FACA;8DACA;AACA,AACA;;AACA;AACA;AACA;AACA;AACA,AACA;;kFACA;4CACA;uDACA;AACA,AACA;;4DACA;kDACA;2FACA;0FACA;0FACA;qDACA;AACA,AACA;;2DACA;kDACA;2FACA;0FACA;0FACA;qDACA;AACA,AACA;;oEACA;+CACA;+CACA;AACA,AACA,AACA,AACA;;wFACA;oGACA;+EACA;0GACA,6BACA,AACA,AACA;;uGACA;sDACA;yEACA;AACA;AACA,2CACA;iEACA;gEACA;AACA;AACA;AACA,uCACA;0DACA;qEACA;gDACA;uEACA,gBACA;AACA;0DACA;qCACA,2BACA,AACA;;oDACA,AACA,AACA,AACA;AACA,AACA;;0EACA;qEACA;0DACA;sDACA;AACA,iEACA;sDACA;AACA;uCACA;AACA,AACA;;gFACA;oGACA;0EACA;AACA;+CACA;sEACA,UACA,AACA,oBACA,AACA;;kDACA;qFACA,AACA;;2DACA;4EACA;6DACA;AACA,2CACA;6DACA;AACA,AACA;;oDACA;kGACA,uCACA,qDACA,+BACA;AACA;AACA,AACA;;wDACA;+CACA;sEACA,UACA,AACA,oBACA;kDACA;iDACA;kDACA;oCACA,AACA;;wEACA;8FACA;iDACA,gEACA;iDACA;;kDAEA;iEACA;mFACA,AACA;AAJA;gDAKA,8BACA,AACA,qEACA;AACA,uCACA;yFACA;iDACA,iEACA;iDACA;wDACA;;sDAEA;8DACA;sDACA,AACA;AAJA;AAKA,2CACA;;sDAEA;6DACA;sDACA,AACA;AAJA;AAKA,AACA;;gDACA,8BACA,AACA,2CACA;AACA,AACA;AACA,AACA;;uDACA;+CACA;sEACA,UACA,AACA,oBACA,AACA;;kEACA,AACA;;kDACA;+DACA;gEACA;yCACA,AACA;;wCACA;yCACA;kEACA,AACA,CACA,OACA,AACA,CACA;AACA;0CACA;kEACA;qFACA;oFACA;oIACA;AACA,+CACA;mFACA;oFACA;oIACA;AACA;AACA;yCACA;kEACA;8EACA;0EACA;AACA,+CACA;yFACA;0EACA;AACA;AACA;yCACA;kEACA;oFACA;mFACA;oIACA;AACA,+CACA,AACA;;oFACA;qFACA;oIACA;AACA;AACA,AACA,AACA,AACA;;;;qDAEA;yDACA;iDACA;sDACA;oDACA,AACA;AANA;mFAOA;oFACA;;2CAEA;4CACA,AACA;AAHA;AAIA,AACA;;qEACA;8CACA;4DACA;uEACA;6FACA;2FACA;AACA,2CACA;kEACA;AACA;AACA,uCACA;8DACA;AACA,AACA;;uCACA;AACA,AACA;;2DACA;oFACA;yDACA;oCACA,AACA;;yDACA,AACA;;6CACA;6CACA,AACA;;8DACA,AACA;;wCACA;oCACA;oCACA,AACA,AACA;;kGACA;iFACA;iDACA;yDACA,AACA;;2DACA;6GACA;oFACA;oFACA;AACA,uCACA;4GACA;mFACA;qFACA;AACA,AACA,AACA;AACA,AACA;;6DACA;;6FAEA;iGACA;yFACA;8FACA;4FACA,AACA;AANA;AAOA,AACA;;wDACA;yEACA;qDACA;mFACA;AACA,uCACA;2FACA;AACA;AACA,AACA;;gEACA;mFACA;gGACA;+CACA;AACA,6IACA;gDACA;AACA;AACA,AACA;AACA,AACA;;4DACA;6FACA;yEACA;6EACA;AACA;qFACA;AACA,AACA;;wEACA,AACA;;sEACA;mFACA,eACA;AACA,AACA;;uCACA;AACA,AACA;;2DACA;0CACA;sDACA;kFACA;wDACA;AACA;AACA;AACA,AACA;;4DACA;0CACA;sDACA;2EACA;wDACA;AACA;AACA;AACA,AACA;;iEACA,AACA;gEACA,AACA;;uDACA,cACA,AACA,AACA,iCACA;uDACA;2CACA;sDACA;AACA,AACA;;uCACA;AACA,AACA,AACA;;yDACA;yDACA;wDACA;kDACA,AACA;;iEACA;gEACA,AACA;;;qDAEA;mDACA,AACA;AAHA;AAIA,AACA,AACA;;;8CAIA,AACA,AACA;;mDACA,AACA,AACA;;qDACA,AACA,AACA;;oDACA,AACA,AACA,AACA,AACA,AACA;;yCACA,AACA,AACA,AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;4CACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;;;AACA,AACA,AACA;;8CACA,AACA,AACA;;mDACA,AACA;;4CACA,AACA;;0DACA,AACA;;sDACA,AACA;;+CACA,AACA;;sDACA,AACA,AACA,AACA,AACA,AACA,AACA;;AA9FA,AACA,AACA;;8BA6FA,AACA;;+DACA,AACA;;mCACA;AACA,AACA;AAptHA;mBAqtHA,AACA;;;;6DCpuHA;qEACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,iDACA;AACA,AACA,AACA,AACA,AACA;;2GACA,AACA,AACA;wBACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;iHACA,AACA,AACA,AACA;4BACA,AACA,AACA;wCACA,AACA,AACA;;8DACA;4CACA;uCACA;0CACA;AACA,AACA,AACA,AACA,AACA;;2CACA;uCACA;wDACA;uCACA,AACA,AACA;;4CACA;iDACA;qDACA;AACA,AACA,AACA,AACA;;6CACA;6CACA;AACA,AACA;;8DACA,AACA,AACA;AACA;AACA,AACA,AACA;;uDACA,AACA;;gFACA,AACA,AACA;AACA,AACA;6DACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;sIACA;AACA;AACA,AACA,AACA,AACA,AACA;;oCACA;8EACA;AACA,AACA,AACA;;+BACA;AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;sEACA;4CACA,yCACA,mDACA;AACA,AACA;sCACA;;;;;;;AC5PA,AACA;;AACA;uBAEA;AADA;AAEA,0CACA;;AACA,gDACA;;AACA,sDACA;;AACA,qDACA;;AACA,kDACA,AACA,AACA;;AACA,kDACA;;AACA;6BAEA;oCACA;kCACA;oCACA;gCACA,AACA;AANA;;AAOA,iCACA;;AACA,gFACA;sDACA,AACA,AACA;;mCACA;mDACA;qCACA;mCACA;oCACA;AACA,AACA;;mFACA;oFACA;AACA,AACA;;qGACA;mKACA;AACA,AACA;;+FACA;wCACA;2BACA;AACA,AACA;;qGACA;oCACA;6EACA;2BACA;AACA,AACA;;gFACA;mCACA;2BACA;AACA,AACA;;yEACA;gCACA,AACA;;oEACA;mEACA;uEACA;AACA,AACA;;sCACA;0DACA;AACA;AACA,AACA;;uBACA;;;;;;;AC9EA,AACA;;AACA;uBAEA;AADA;AAEA,qCACA;;AACA,sBACA;;AACA,kDACA;;AACA,kEACA,AACA,AACA;;AACA;AACA;AACA,8CACA;iCACA,AACA;;mCACA;2CACA,AACA;;iCACA;2DACA;;sCAEA;uCACA;yCACA;4CACA,AACA;AALA;2CAMA;uDACA;qDACA;mCACA;AACA;AACA;AACA;AACA;;AACA,0IACA;0CACA;gCACA,AACA,AACA,AACA;;+DACA;8CACA;iGACA;mEACA;oCACA;AACA;AACA;AACA;AACA,AACA;;4FACA;yDACA;AACA,AACA;;4FACA;iCACA,AACA;;oDACA;wEACA;yDACA,AACA;;sEACA;wEACA;wDACA;6CACA;oDACA,AACA;;wDACA;sDACA;AACA;wDACA;4EACA;6CACA;+BACA;mCACA;AACA;AACA,AACA;;gEACA;2DACA;4CACA;AACA,AACA;;8DACA;gEACA,AACA;;4FACA,AACA;;uCACA;iGACA;+FACA;2BACA;oEACA;kEACA;AACA,AACA;;yDACA;uEACA;AACA,AACA;;iDACA,AACA;;0CACA,AACA;;iEACA;oEACA;2BACA;yCACA;AACA,AACA;;uEACA;+DACA,AACA;;0DACA;uCACA;wDACA;AACA;+BACA;sFACA;AACA,AACA;;0DACA;4DACA;2CACA,AACA;;oDACA;sEACA;AACA;AACA;2FACA;AACA;AACA;AACA;AACA,AACA;;4FACA;iCACA,AACA;;oDACA;wEACA,AACA;;0EACA;kEACA,AACA;;4DACA;kCACA;0DACA;AACA,AACA;;yDACA;0EACA;AACA,AACA;;0DACA;uCACA;wDACA;AACA;+BACA;sFACA;AACA,AACA;;6DACA;+DACA,AACA;;mDACA;2FACA;AACA;AACA;wCACA;gDACA;gDACA;8CACA,AACA;;+DACA;kDACA;AACA,AACA;;uCACA;AACA;AACA,AACA;;uBACA;oBACA,AACA;;AACA,0DACA;;AACA,kDACA;oDACA;kHACA,AACA;;sFACA;yFACA;;;;;;;ACvMA,AACA;;AACA;uBAEA;AADA;AAEA,oCACA;;AACA,wBACA;;AACA,uDACA;;AACA,kEACA;;AACA,yDACA;;AACA,wDACA;;AACA,gDACA;;AACA,iDACA;;AACA,oDACA;;AACA,qDACA,AACA,AACA;;AACA,sFACA;qEACA,AACA,AACA;;qCACA;6CACA;uCACA;2CACA;AACA,AACA;;uEACA;4FACA;0CACA;AACA;AACA,AACA;;2GACA;gCACA,AACA;;wDACA;gDACA;yEACA;8JACA;AACA;wFACA;8CACA;6DACA;iDACA;mCACA;iDACA;AACA;gGACA;+BACA;AACA;AACA,AACA;;uBACA;gHACA,AACA;;AACA,+CACA;2EACA;uEACA;uBACA;AACA;;AACA,4EACA;qDACA;;uCAEA;oCACA;qDACA;oDACA;yDACA;oEACA;0BACA,AACA,AACA;AATA;;iHAUA;qEACA;gEACA,AACA;;mKACA;yCACA;qHACA;yDACA;gFACA;8DACA;mEACA,AACA;;4EACA;AACA;AACA;AACA;AACA;AACA;;AACA,mEACA;iEACA;+FACA;AACA,AACA;;+DACA;6DACA;AACA,AACA;;uCACA;AACA;;AACA,4DACA;oDACA;8BACA;kDACA;oEACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACtHA,2DACA;;AAAA,yDACA;;AAAA,4DACA;;AAAA,yDACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARA;AACA;AACA;oDAUA;;;;8CAAA;;6CAAA;6CAOA;kDAEA;mDACA;mDAEA;gDAEA;gGAEA;iFAEA;0IAkBA;8DACA;2EACA;kDACA;AACA;AAEA;sDACA;0DACA;kCACA;AAuBA;sDAAA;+GACA;;;;;iDAAA;2DACA;qFACA;;gGACA;8EACA;;gFACA;qGACA;AACA;yFACA;;kEACA;;gEACA;mEACA;;iDAAA,AACA;;gEACA;4DACA;;iDADA;0EACA;;;;;;;;;AAgBA;iEAAA;;AAlGA;oEACA;6BACA;AACA,AAsBA;;;2GACA;;;;;;6DACA;wDACA;;6CADA;oEACA;;;6DACA;wDACA;;6CADA;;;;;;;8EAEA;;uEACA;;;;;;;;AACA;AACA,AAcA;;oFACA;yCACA;sCACA;qCACA;oDACA;6DACA;4EACA;yCACA;2DACA;+DACA;yCACA;AACA;AACA;0CACA;iCAEA;wCACA;AACA,AAkBA;;qEACA;yCACA;AACA,AACA;;yEACA;2DACA;qEACA;AACA,AACA;;6FACA;iGACA;qEACA;AACA,AAGA;;;2GACA;wGACA;;;;;;6DADA;wDACA;;6CADA;4EACA;;iGAAA;;AACA;;qFACA;2EACA;AACA;kYAMA;+KACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6CADA;sDACA;;2FACA;;;;;;;;;;;;AACA;AACA,AACA;;2FACA;kDACA;gDACA;6BACA;AACA,AACA;;iEACA;qLAAA;gCACA;;;;;;;;;AADA;;2CACA;;yEACA;gDACA;AACA;AACA;+BACA;AACA,AACA;;wHACA;kEACA;qDACA;mCACA;2BAEA;AACA,AACA;;;qCACA;;;yCAEA;4CACA;sCACA;yCACA;yCACA;wCACA;uCACA;sEAAA;;AACA;wEACA;mDACA;4CACA;AACA;2CACA;qCACA;6CACA;yCACA;yCACA;gDACA;wCACA;;oEAEA;8DACA;AACA;+FACA;gEACA;2CACA;2CACA;AARA,AAUA;AATA;;wDAWA;;yCAAA,AAGA;AAFA;;yCAHA,AAKA,AAIA;AAHA;AALA;qDASA;6CACA;gDACA;gDACA;yFACA;iDACA;oFAAA;2CAAA;AACA;;sCAAA,AAGA;AAFA;;sCAEA,AAGA;AAFA;;sCAEA,AAGA;AAFA;;sCArDA,AAuDA,AAIA;AAHA;AAvDA;uFA2DA;sEACA;AACA,AACA;;;;;;;6CACA;kFACA;iFACA;;6DACA;wDACA;;6CAAA;iDACA;iDACA;yDACA;;;;;;;;AAAA;AACA,AACA;;6EACA;sFACA;8DACA;gDACA;qCACA;wEACA;yGACA;AACA;AACA,AACA;;;qCACA;;oGACA;oEACA;AACA;wFACA;iGACA;kDACA;8FACA;mCACA;AAEA;AACA,AACA;;iFACA;iGACA;qEACA;AACA,AACA;;;2GACA;;;;;;6DAAA;wDACA;;6CADA;sEACA,AACA;;6EACA;qFACA;;qFACA;qFACA;uFACA;mDACA;uFACA;uFACA;4FACA;AACA;+EACA;;;;;;;;AAAA;AACA,AACA;;;2GACA;;;;;6CAAA;;oEAEA;yFACA;4DAHA,AAKA;AAJA;wEAKA;;mEACA;iDACA;;;;;;;;AAAA;AACA,AACA;;uFACA;iGACA;oEACA;AACA,AACA;;gFACA;;oCAEA;iCACA;sCACA;yCAJA,AAMA;AALA;AAMA,AACA;;wFACA;;oCAEA;iCACA;sCACA;kCACA;yCALA,AAOA;AANA;AAOA,AACA;;gFACA;4BACA;0CACA;oCACA;6CACA;mCACA;AACA;AACA,AACA;;gFACA;0CACA;iCACA;AACA;iCACA;sCACA;AACA;AACA;sCAEA;;AACA;;;;AA7TA;AA8TA;;;;;;;;;;;;;;;;ACpUA,oCACA;;AAAA,oCACA;;AAAA,oCACA;;AAEA,oDACA;;AADA,uDACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;;yCACA;wGAKA,AACA,AACA,AAEA,AACA;;wDAEA;uDACA;;yCAAA;wDAEA,AACA,AACA;;;;;;;;;AAIA;;;;;6DCjCA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;iEACA;oEACA,AACA;;sDACA,mEACA,8EACA,AACA;;0CACA;uCACA;qCACA;4CACA,AACA;;6BACA;AACA,AACA;;oCACA,AACA;;kCACA,AACA;;;gCAEA;gCACA,AACA,AACA;AAJA;;wGAKA;qDACA;qDACA;wDACA,AACA;;+GACA,AACA;;sDACA;2GACA;qGACA;AACA,AACA;;2DACA;8EACA;2EACA,AACA;;gFACA;wHACA,AACA;;+BACA;AACA,AACA;;kEACA;2DACA;wEACA;qDACA;qDACA;kEACA;AACA,AACA;;6EACA;sEACA;AACA,AACA;;gEACA;2DACA,AACA;;mDACA;kDACA;+CACA;kDACA;2FACA,AACA;;qIACA;wFACA;iGACA,AACA;;mFACA,AACA;;mDACA;6EACA,AACA;;6EACA;wDACA,AACA;;kDACA,AACA;;wDACA,AACA;;2CACA;sFACA,AACA;;iCACA,2BACA,gBACA,2DACA;AACA,AACA;;+CACA;;6DAEA,AACA;AAFA;AAGA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;0HACA,AACA;;qFACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;iCACA;6CACA,AACA,AACA,AACA,AACA,AACA;;wDACA;qCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;qDACA;iEACA;yCACA;4CACA,AACA;;yDACA,AACA;;qFACA;+EACA,AACA;;8CACA;AACA;AACA,AACA;kBACA,AACA;;;;6DCnKA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;kCACA;mDACA;wDACA;AACA,AACA;;oCACA,AACA;;gDACA,AACA;;yDACA;sCACA;kDACA,AACA;;uCACA;kDACA;sFACA;AACA,AACA;;gEACA,AACA;;iCACA,AACA;;6CACA;oDACA;AACA,AACA;;oDACA,AACA;;oDACA,AACA;;4CACA,AACA;;iDACA,AACA;wEACA;AACA,AACA;;iEACA,UACA,+BACA,0CACA,uBACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA,AACA;;+EACA;6EACA;AACA;AACA,AACA;;mCACA,AACA;;iCACA;6CACA,AACA,AACA,AACA,AACA,AACA;;wDACA;qCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;uFACA,AACA;kBACA,AACA;;;;6DC/FA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;mEACA;0CACA;qEACA;yCACA;AACA,AACA;;qCACA,AACA;;;qCAEA,AACA,AACA;AAHA;;iEAIA;gCACA;uCACA;4DACA;uCACA,AACA;;iCACA,AACA;;8EACA,AACA,AACA;;uDACA;sFACA,AACA;;wDACA;iDACA;mEACA;uDACA;iDACA;yEACA;AACA;kCACA;AACA,AACA;;0DACA;sCACA;4DACA,AACA;;4CACA;4DACA;gEACA;sEACA;oEACA;uDACA;0EACA;2GACA;0DACA;AACA;0EACA;wDACA;+BACA;uFACA;sDACA;AACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;0HACA,AACA;;uFACA,AACA;;yDACA,wCACA;AACA;AACA,AACA;;mCACA,AACA;;kCACA;8CACA,AACA,AACA,AACA,AACA,AACA;;yDACA;sCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;sBACA,iFACA;uDACA;0CACA;4FACA,AACA;8BACA,AACA;;sEACA,wEACA;AACA;AACA,sHACA;+FACA;AACA,AACA;kBACA,AACA;;;;6DC9HA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;uEACA;0CACA;8DACA;uCACA;sCACA;uCACA;wCACA;uCACA;sCACA,AACA;;+GACA,AACA;;+GACA,0DACA,wDACA;AACA,AACA;;uCACA,AACA;;mDACA,AACA;;;kCAEA;+BACA;8BACA;kCACA,AACA,AACA;AANA;;8DAOA;sEACA;kCACA;;4CACA;;4CACA;;AACA,AACA,AACA;;;0BACA;AACA,AACA;;4DACA;4CACA,AACA;;4DACA,AACA;;qCACA,kBACA,8EACA,AACA;;+BACA;AACA,AACA;;sEACA;6DACA;8DACA;AACA,AACA;;0FACA;4DACA;8EACA,gEACA;mEACA;+DACA;4EACA;8CACA;AACA,AACA;;2DACA;mCACA;8FACA,AACA;;qEACA,AACA;;;;AACA;oEACA,AACA;;8FACA;AACA,AACA;;4DACA;4CACA,AACA;;+FACA;uEACA;uCACA;AACA,AACA;;2DACA,AACA;;+BACA;AACA,AACA;;0DACA;0CACA;0CACA;AACA,AACA;;0DACA;0CACA;0CACA;AACA,AACA;;qEACA;yDACA;2EACA;6CACA;kEACA;mCACA,AACA;;4EACA,AACA;;kDACA;;2CAEA;uCACA,AACA;AAHA;8CAIA;6DACA,AACA;;uCACA,AACA;;0CACA,AACA;;qDACA;yEACA;iGACA;sEACA;AACA,AACA;;+GACA;qFACA;2CACA;qCACA;6CACA;2CACA;AACA,uEACA;wFACA;+EACA;+CACA;uDACA;0DACA;mCACA;AACA,6DACA;+BACA;gDACA;2CACA;2CACA;kDACA;AACA,AACA;;0CACA,AACA;;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;wKACA;sFACA,AACA;;2FACA;mEACA,8BACA,kDACA;AACA;AACA,AACA;;mCACA,AACA;;oCACA;gDACA,AACA,AACA,AACA,AACA,AACA;;2DACA;wCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;gEACA;4BACA;sCACA;mIACA;2DACA;yEACA;oDACA;2DACA,AACA;;6CACA,AACA;;wCACA;2DACA;AACA,AACA;;0BACA;AACA,AACA;;sBACA,2DACA,kEACA,AACA;;qDACA;qEACA;8CACA;6DACA;AACA;AACA,AACA;kBACA,AACA;;;;6DC9OA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;uEACA;0CACA;uEACA;4FACA,iEACA;6CACA,AACA;;iDACA;gDACA;+BACA;8EACA;AACA,AACA;;sDACA;AACA,AACA;;uCACA,AACA;;mDACA,AACA;;;gCAEA,AACA,AACA;AAHA;;+DAIA;8DACA;oDACA;AACA,AACA;;0DACA;gFACA,AACA;;4BACA;+FACA,AACA;;uDACA;uDACA;0EACA;AACA,AACA;;iDACA;8CACA;6DACA,AACA;;uDACA;iDACA;uEACA;AACA,AACA;;6CACA,AACA;;6BACA,qBACA,8CACA,yBACA,AACA;;6BACA,qBACA,mCACA,AACA;;6CACA,AACA;;2DACA;iCACA,qBACA,iDACA;iDACA;iCACA,iBACA;AACA,AACA;;wEACA,AACA;;gFACA,AACA;;6BACA,kDACA,sFACA;AACA,AACA;;0DACA;iFACA,AACA;;iDACA;8CACA;6DACA,AACA;;6CACA,AACA;;gFACA,AACA;;6BACA,kBACA,0BACA,qCACA,AACA;;6BACA,kBACA,mCACA,AACA;;6CACA,AACA;;2DACA;iDACA;iCACA,qBACA,uBACA,oBACA;AACA,AACA;;wEACA,AACA;;6BACA,oBACA,4CACA,qCACA;AACA,AACA;;4DACA;qEACA;AACA,AACA;;+DACA;8CACA,8EACA,yCACA;6CACA;0FACA;2BACA,OACA;AACA,AACA;;gGACA;uDACA,AACA;;uDACA;AACA,2DACA,8BACA;AACA,AACA;;4DACA;4BACA;mDACA,mFACA,AACA;;iCACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;wKACA,AACA;;sGACA;2FACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;oCACA;gDACA,AACA,AACA,AACA,AACA,AACA;;2DACA;wCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;0GACA;sCACA,AACA;;0DACA,AACA;;2DACA;gDACA;6DACA,AACA;;6CACA;AACA,AACA;kBACA,AACA;;;;6DCrNA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;mCACA;iCACA;8DACA;gEACA;AACA,AACA;;uCACA,AACA;;8CACA;kDACA,AACA;;uCACA;kDACA;oHACA;AACA,AACA;;oDACA,AACA;;2EACA;AACA,AACA;;2CACA;gDACA;oCACA;mDACA;0CACA;oDACA;iEACA,AACA;;2DACA,AACA;;wIACA,AACA;;4EACA,AACA;;wDACA,AACA;;wDACA;8FACA;AACA;AACA,AACA;;6DACA;sCACA,AACA;;8DACA,AACA;;gDACA;wDACA,AACA;;AACA,AACA;;uCACA;sHACA,AACA;yDACA,iBACA,mCACA,mBACA;AACA,AACA;;iEACA;4EACA,AACA;;wDACA,AACA;;AACA,0CACA,+BACA,AACA;;AACA,gDACA,6CACA;AACA,AACA;;+BACA;AACA,AACA;;8DACA;wGACA,AACA;;sCACA,AACA;;0BACA;0BACA,AACA;;8DACA,AACA;;gDACA;wDACA,AACA;;qFACA;4EACA;iDACA;AACA,AACA;;mCACA;qEACA,AACA;;4CACA,AACA;;mDACA,AACA;;wDACA;wEACA;6CACA,AACA;;iDACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA,AACA;;qFACA;6EACA;AACA;AACA,AACA;;mCACA,AACA;;oCACA;gDACA,AACA,AACA,AACA,AACA,AACA;;2DACA;wCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;sBACA,2CACA;;AACA,mFACA,sEACA,iFACA,AACA;kBACA,AACA;;;;6DCtKA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;iEACA;uCACA;gDACA;0CACA;0DACA;yCACA;uCACA;+CACA;8CACA;mDACA,AACA;;iDACA;iCACA,cACA,gEACA;sDACA;+BACA;AACA;AACA,AACA;;oCACA,AACA;;gDACA;yDACA,AACA;;;kCAEA;kCACA;8BACA,AACA,AACA;AALA;;uEAMA;sEACA;AACA,AACA;;qEACA;mCACA;0EACA,AACA;;8CACA,AACA;;oEACA,AACA;;uCACA,AACA;;6BACA;6BACA;4CACA,AACA;;6BACA;6BACA,AACA;;gHACA,AACA;;kFACA;uFACA;8FACA;AACA;AACA,AACA;;kDACA;4FACA,AACA;;gEACA;4DACA;AACA,AACA;;iCACA,SACA,iBACA,AACA;;iCACA,AACA;;4CACA;iDACA;AACA,AACA;;mDACA,AACA;;iCACA,AACA;;+EACA,AACA;;AACA,8CACA,2CACA;uEACA;AACA,0DACA,8DACA;AACA;AACA,AACA;;wDACA;iCACA,AACA;;oCACA,AACA;;8CACA,AACA;;qEACA,AACA;;uCACA,AACA;;6BACA;6BACA,AACA;;wCACA,AACA;;6BACA,qBACA,UACA,8BACA,AACA;;yCACA,AACA;;uEACA,eACA,wDACA,kCACA,4BACA;AACA,AACA;;+DACA;0BACA,cACA,gEACA;+CACA,iCACA,+CACA;sDACA;AACA;2BACA;AACA,AACA;;yDACA;mEACA;8FACA;sDACA;+BACA;kDACA;8CACA;AACA;AACA,AACA;;yDACA;0CACA;uFACA;+BACA;0CACA;AACA;AACA,AACA;;4DACA;mCACA;sCACA;kDACA;mDACA;iCACA;iCACA;kDACA;AACA;AACA,AACA;;iEACA;yDACA;yCACA;AACA,AACA;;mEACA;mCACA;gFACA,AACA;;mEACA;oEACA,AACA;;sEACA,qCACA,uBACA,AACA;;4FACA;8DACA;+DACA;AACA;AACA;kEACA;yDACA,4BACA,eACA;+BACA,AACA;;6DACA,AACA;;oDACA,AACA;;2CACA,AACA;;AACA,6CACA,iCACA,qCACA,gCACA,AACA;oEACA;uDACA,AACA;;2EACA;qCACA;4CACA;AACA;2EACA,eACA,iCACA,2CACA,gCACA,AACA;6CACA;AACA;AACA;AACA,AACA,AACA,AACA;;+DACA;6BACA;AACA,AACA;;+DACA;0GACA,AACA;;;+GAEA;gHACA,AACA;AAHA;AAIA,AACA;;mEACA;;yCAEA;0CACA,AACA;AAHA;AAIA,AACA;;iEACA;qDACA;8CACA;+EACA;uGACA;AACA;6EACA;mDACA;AACA,AACA;;+DACA;qFACA;mFACA;mGACA;AACA,AACA;;iEACA;6DACA;AACA,AACA;;mEACA;+DACA;8CACA;0CACA;+EACA;kDACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;4DACA;qDACA;0CACA;kDACA;qKACA,AACA;;qFACA;wEACA,iDACA;AACA;AACA,AACA;;mCACA,AACA;;iCACA;6CACA,AACA,AACA,AACA,AACA,AACA;;wDACA;qCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;oGACA;sCACA;8CACA;4GACA;+IACA,AACA;;6CACA,AACA;;0EACA;gEACA;uEACA;sEACA;AACA;AACA;qDACA;AACA,AACA;kBACA,AACA;;;;6DCpVA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;qEACA;sDACA;AACA,AACA;;uDACA,AACA;;sCACA,AACA;;;mCAEA;iCACA;iCACA;kCACA,AACA,AACA,AACA,AACA,AACA,AACA;AAVA;;8EAWA,AACA;;oDACA,AACA;;gEACA;uCACA;AACA,AACA;;+DACA;wCACA;yCACA;2CACA,AACA;;yFACA;0EACA,2EACA,QACA,AACA;;yCACA,AACA,AACA,AACA;;6FACA;AACA,AACA;;+DACA;uDACA;AACA,AACA;;+DACA;sCACA;qCACA,AACA;;uCACA,wCACA,+BACA,QACA;AACA,AACA;;0DACA;4EACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;0HACA,AACA;;sEACA;yFACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;mCACA;+CACA,AACA,AACA,AACA,AACA,AACA;;0DACA;uCACA;+BACA;AACA,AACA;kBACA,AACA;;;;6DC7GA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;yDACA;gDACA;2FACA;wEACA;sEACA;uCACA;uCACA;4CACA;4CACA,AACA;;4FACA;6BACA;6BACA;AACA,AACA;;wCACA,AACA;;;gCAEA,AACA,AACA;AAHA;;sEAIA;oIACA;AACA,AACA;;8DACA;mCACA;2CACA;yCACA,AACA;;uCACA;uCACA;iDACA,AACA;;iEACA;2CACA;6DACA;AACA,AACA;;6BACA,gBACA,0BACA;wCACA;sEACA;8DACA,AACA;;mCACA,eACA,mBACA,mEACA;AACA;;AACA,4CACA;mDACA;mDACA;AACA;AACA,AACA;;8DACA;uFACA;gDACA;iGACA;2CACA;2CACA;gDACA;4BACA,AACA;;+DACA;iCACA;AACA,AACA;;oDACA;sGACA;AACA,AACA;;oEACA;gDACA;wCACA;AACA,AACA;;uDACA;oDACA,2BACA,+DACA,6BACA;AACA;AACA,AACA;;qEACA;4CACA,AACA;;6BACA,AACA;;4CACA,uCACA,6CACA,AACA;;uCACA,kBACA,eACA,AACA;;oEACA;qCACA,eACA,wBACA;AACA,AACA;;uCACA;AACA,AACA;;4DACA;+BACA,4CACA,uBACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;0HACA,AACA;;6FACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;qCACA;iDACA,AACA,AACA,AACA,AACA,AACA;;4DACA;yCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;2EACA;kEACA;yCACA;mDACA;AACA;AACA,AACA;kBACA,AACA;;;;6DC7KA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;oDACA,AACA;yCACA,AACA;AACA,AACA;;kCACA,AACA;;8CACA,AACA;;qDACA;yCACA;gDACA;kDACA,AACA;;uCACA;kDACA;sFACA;AACA,AACA;;mEACA,AACA;;iDACA;;iDAEA,AACA;AAFA;;qDAIA,AACA,AACA;AAHA;;0CAIA;sCACA,AACA;;8FACA,AACA;;wCACA,AACA;;2DACA;6EACA;;sCAEA;qDACA,AACA;AAHA;;sCAKA;yDACA,AACA;AAHA;AAIA;AACA,AACA;;qFACA;qDACA;yCACA,sBACA,yFACA,AACA;;wCACA;AACA,gDACA,eACA,0CACA,UACA,WACA,6CACA,AACA;;AACA,6CACA,eACA,6CACA,AACA;;4CACA;2CACA;iDACA;mCACA;oDACA;AACA,AACA;;yEACA;AACA,gDACA,wBACA,UACA,WACA,6CACA;AACA,AACA;;wCACA;AACA,AACA;;0CACA,aACA,+BACA,+BACA,uBACA,AACA;;4CACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA,AACA;;2EACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;+BACA;2CACA,AACA,AACA,AACA,AACA,AACA;;sDACA;mCACA;+BACA;AACA,AACA,AACA,AACA,AACA,AACA;;gEACA;0BACA;6CACA;AACA,AACA;;sBACA,6DACA,kEACA,AACA;kBACA,AACA;;;;6DC5JA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;qEACA;oCACA;uCACA;uCACA;uCACA;0CACA;wCACA;uCACA,AACA;;sDACA;AACA,AACA;;sCACA,AACA;;kDACA,AACA;;;mCAEA;mCACA;kCACA;kCACA;iCACA;+BACA;+BACA;8BACA;mCACA;;sCAEA;qCACA,AACA,AACA,AACA;AALA;AAVA;;+EAgBA;uCACA;oCACA;0CACA;uDACA;2MACA;4EACA,AACA;;wGACA;mHACA;AACA,AACA;;kEACA,AACA;;4DACA;mDACA,AACA;;oDACA;mHACA;4DACA;kFACA;mFACA,AACA;;uHACA;wHACA;AACA;AACA,AACA;;qCACA,qFACA,aACA;AACA,AACA;;gEACA;uCACA;AACA,AACA;;sEACA;yFACA,AACA;;+EACA;;8CAEA;8CACA,AACA;AAHA;AAIA,AACA;;+BACA;AACA,AACA;;uEACA;sCACA;4CACA,AACA;;qFACA;uEACA;AACA,AACA;;+BACA;AACA,AACA;;6DACA;uDACA,2DACA,AACA;;mCACA;gFACA;yEACA;AACA,AACA;;oDACA;sFACA;AACA,AACA;;kFACA;8CACA;AACA;AACA,AACA;;0CACA,AACA;;0CACA,AACA;;yFACA,AACA;;8DACA;8DACA;8CACA;AACA,AACA;;kEACA;sDACA;0DACA;AACA,AACA;;+BACA;AACA,AACA;;6DACA;uDACA,2DACA,AACA;;mCACA;gFACA;yEACA;AACA,AACA;;oDACA;uFACA;AACA,AACA;;kDACA,AACA;;0CACA,AACA;;0CACA,AACA;;yFACA,AACA;;8DACA;+DACA;8CACA;AACA,AACA;;yDACA;0DACA,AACA;;+DACA;kDACA,AACA;;iHACA;kEACA;uCACA,AACA;;4CACA,AACA;;yDACA,AACA;;iCACA;4CACA;mEACA,AACA;;sEACA,AACA;;6EACA,sEACA,mBACA,AACA;;4CACA;2DACA;2FACA,AACA;;AACA,iCACA,yCACA,oBACA,mCACA,AACA;;mHACA;wEACA,AACA;;2CACA;sDACA;uDACA,AACA;;2CACA;mDACA;wEACA,AACA;;sHACA,yEACA,iFACA,4EACA,UACA,AACA;;AACA,iDACA,uBACA;AACA,AACA;;yGACA,AACA;;kEACA,AACA;;+DACA;0DACA;yEACA;kDACA,AACA;;wEACA;AACA,AACA;;uEACA,UACA,4BACA,uCACA,uBACA;AACA;AACA,AACA;;oFACA;wCACA;4CACA;6CACA,AACA,AACA;;yEACA;2EACA,AACA,AACA;;0DACA;4DACA,AACA;;sCACA;uCACA,AACA,AACA,AACA;;;yDAEA;;0DAEA;2DACA,AACA;AAHA;AAIA;AANA,oCAOA,AACA;;sCACA,AACA,AACA;;kDACA;mDACA,AACA;;0EACA;+DACA;AACA,AACA;;kGACA,AACA;;6DACA,8BACA,AACA;;2DACA;sHACA;+EACA,AACA;;oCACA;oFACA;AACA,AACA;;6FACA;6BACA,wEACA,sCACA;AACA,AACA;;+DACA;wCACA;yCACA,AACA;;yFACA;yCACA;AACA,AACA;;iEACA;mCACA;0CACA;0DACA,AACA;;4CACA;8DACA;+CACA;qCACA,oBACA,gDACA;AACA;wCACA;AACA,AACA;;8CACA,AACA;;oDACA,AACA;;yCACA,AACA;;8DACA,UACA,4BACA,uCACA,uBACA,AACA;;0CACA,AACA;;+BACA;AACA,AACA;;6DACA;sCACA;mGACA;iGACA;AACA;AACA,AACA;;+DACA;oCACA;AACA,AACA;;wEACA;oDACA,AACA;;0CACA;mDACA,AACA;;wCACA;kDACA,AACA;8HACA;AACA;8EACA,AACA,AACA;;8FACA;iIACA;4GACA,AACA;;uEACA;AACA,AACA;;iHACA;mIACA,yGACA,iGACA,yFACA,AACA;AACA,AACA;;sHACA;oDACA;oDACA,AACA;;wGACA;uEACA,AACA;;0DACA;+FACA;2GACA;wEACA;qEACA;8GACA;iGACA;AACA;+BACA;4DACA;+EACA;0EACA;uEACA;mFACA;kGACA;AACA;AACA,AACA;;+BACA;AACA,AACA;;6DACA;4BACA;sCACA;qCACA,AACA;;wCACA,kFACA,AACA;;+BACA;AACA,AACA;;iEACA;;yDACA;yDACA;+BACA;AACA,AACA;;wDACA;wCACA;uDACA;uDACA;4DACA;AACA;AACA;oCACA;AACA,AACA;;0DACA;4EACA;AACA,AACA;;2DACA;uCACA;AACA,AACA;;4DACA;uCACA;AACA,AACA;;kEACA;6CACA;AACA,AACA;;4DACA;mCACA;+BACA;wEACA;uCACA;kFACA;2EACA;AACA;AACA,AACA;;+BACA;+DACA;iEACA,sBACA;+BACA;sFACA;AACA;AACA,AACA;;4DACA;mCACA;0CACA;8CACA;uFACA;2CACA;0CACA;AACA;wCACA;0CACA;6CACA;4CACA;AACA;AACA,AACA,AACA,AACA,AACA,AACA;;4CACA;qDACA;0CACA;kDACA;0HACA,AACA;;sEACA;yFACA;gEACA;AACA;AACA,AACA;;mCACA,AACA;;mCACA;+CACA,AACA,AACA,AACA,AACA,AACA;;0DACA;uCACA;+BACA;AACA,AACA;kBACA,AACA;;;;6DCzgBA;+BACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;AACA,8BACA;AACA,AACA,AACA,AACA,AACA;;6CACA;wDACA,AACA;;;8CAEA;2CACA;yCACA;wCACA,AACA,AACA;AANA;;6DAOA;8DACA;iEACA;AACA;AACA,AACA;;+BACA;AACA,AACA,AACA;;oEACA;qCACA;kCACA;;;AACA;;;AACA;6CACA;+BACA;AACA,AACA;;kCACA;+CACA,AACA;;mDACA,AACA;;;2DAEA;+DACA;uDACA;iGACA;AACA,AACA;AANA;AAOA,AACA;kBACA,AACA;;;;wCC5DA;;wCCAA;;;;ACAA;;;;;ACAA;;;;;ACAA;;;;;ACAA,6BACA;AACA,AACA;;gCACA;AACA;AACA,AACA;;;uDAEA;gEACA;gFACA;4BACA;gCACA;mCACA;oCACA;mCACA;AACA;AACA;4CACA;kDACA,AACA,AACA;AAdA;;yCAeA;sCACA,CACA,sBACA,uBACA,8BACA,uBACA,wBACA,uBACA,wBACA,yBACA,AACA,AACA;;8DACA;uEACA;AACA,AACA;;iFACA;kGACA;AACA;AACA,AACA;;6CACA;kDACA;sCACA;AACA;iEACA;4CACA;AACA;gCACA;AACA,AACA;;+CACA;mDACA;uCACA;AACA;2BACA;AACA,AACA,AACA;;4CACA;;8CAEA;8CACA;uEACA;AACA,AACA,AACA;AANA;;0CAOA;gEACA;mCACA;AACA;AACA,AACA;;2BACA;AACA,AACA;;0CACA;+BACA,AACA;;oDACA;+DACA;8CACA;2BACA,AACA;wCACA;oFACA;sDACA;2BACA;AACA;AACA,AACA;;kEACA;yCACA;2CACA;4CACA;yEACA;AACA,AACA;;8DACA;kDACA;AACA,AACA;;wDACA;yCACA;6DACA;AACA,AACA;;wDACA;iEACA;AACA,AACA;;+DACA;mEACA;AACA,AACA;;yEACA;+CACA;2DACA;yEACA;AACA;AACA;AACA,AACA;;qDACA;gCACA;;;AACA;uCACA;AACA,AACA;;uDACA;gCACA;;;AACA;uCACA;AACA,AACA;;wDACA;gCACA;;;AACA;uCACA;AACA,AACA;;sCACA;2EACA;AACA,AACA;;wCACA;uCACA;4DACA;AACA;oCACA;AACA,AACA;;iDACA;kEACA;oDACA;2CACA;AACA;qDACA;0CACA;AACA;AACA;AACA,AACA;;qDACA;qCACA;kDACA;6CACA;2BACA;AACA,AACA;;8CACA;qCACA;kDACA;sCACA;2BACA;AACA,AACA;;oDACA;8CACA;+CACA,AACA;;0DACA;4DACA;AACA;sCACA;AACA,AACA;;0CACA;mCACA;yCACA;2BACA;sDACA;gDACA;oCACA;AACA;AACA,AACA;;gCACA;oCACA,AACA;;qDACA;yCACA;mCACA;6CACA;6DACA;6CACA;uFACA;6CACA;+FACA;iDACA;0GACA;kDACA;4FACA;qEACA,AACA;;4DACA;kIACA;gEACA;+BACA;4CACA;AACA,AACA;;+DACA;0DACA;iEACA;8EACA;gFACA;8GACA;iEACA;AACA;AACA;AACA,AACA;;sCACA;gDACA;oDACA;0CACA;uCACA;AACA,AACA;;gDACA;4DACA;8DACA;sEACA;2DACA;gDACA;mCACA;sEACA;AACA;AACA,AACA;;uDACA;uDACA;8EACA;mCACA;wDACA;AACA;AACA;AACA,AACA;;4CACA;gDACA;sCACA;mCACA;AACA,AACA;;4CACA;uDACA;0DACA;8EACA;uDACA;4CACA;+BACA;wDACA;AACA;AACA,AACA;;0CACA;oDACA;oDACA;AACA;AACA,AACA;;4CACA;qDACA;AACA,AACA;;2BACA;AACA,AACA,AACA;;2EACA,AACA;;iDACA;yCACA;qEACA;AACA,AACA;;iDACA;yCACA;uCACA,AACA;;mDACA;mCACA;2BACA;4CACA;gDACA;AACA;yCACA;iDACA;8CACA;6DACA;AACA;4CACA;0CACA;8DACA;yCACA;6CACA;AACA;AACA,AACA;;kFACA;0DACA;2DACA;AACA;mFACA;6DACA;oCACA,AACA;;mFACA;4CACA;AACA;mCACA;AACA,AACA;;sDACA;0DACA;AACA,AACA;;sCACA;mCACA;oEACA;mCACA;oDACA;oEACA;uEACA;qFACA;AACA;AACA;2BACA;AACA,AACA;;kDACA;sCACA;qEACA;+CACA;gDACA;iCACA;wDACA;gDACA;AACA;AACA;2BACA;AACA,AACA;;kCACA,AACA;;qDACA;kCACA;kCACA;AACA,AACA;;gCACA;yEACA;kEACA;qFACA;uDACA;8CACA;mCACA;AACA,AACA;;mCACA,AACA;;uDACA;;qCAEA;yCACA;kDACA;kCACA,AACA;AALA;AAMA,AACA;;6CACA;+EACA;oCACA;2BACA;AACA,AACA;;4DACA,AACA;;2DACA;iEACA;6CACA;AACA,AACA;;qFACA;AACA,AACA;;+BACA;+BACA;gCACA,AACA;;oDACA;kEACA;yDACA;sCACA,AACA;;iDACA;;4CAEA;gDACA;qFACA,AACA;AAJA;uGAKA;8EACA;uDACA;AACA,AACA;;kDACA;iDACA;AACA,AACA;;oDACA;iDACA;AACA,AACA;;8DACA,AACA;;+DACA;kDACA;AACA,AACA;;mEACA;+CACA;AACA,AACA;;uEACA;uDACA;AACA,AACA;;2FACA;AACA;AACA;sCACA;;;;;;ACzcA;yBAEA;8BACA;kDACA;oCACA;8CACA;mDACA;sDACA;qDACA;wDACA;qDACA;wDACA;iDACA;iDACA;oDACA;8CACA;0CACA;uCACA;6CACA;4CACA;6CACA;yCACA;uCACA;8CACA;oCACA;gDACA;kDACA;wEACA;2EACA;yEACA;4EACA;0DACA;6DACA;4EACA;+EACA;wDACA;2DACA;uDACA;0DACA;qDACA;wDACA;yDACA;4DACA;8DACA;iEACA;gEACA;mEACA;uDACA;0DACA;0EACA;6EACA;4EACA;+EACA;kFACA;qFACA;uDACA;0DACA;+CACA;0DACA;6DACA;2DACA;8DACA;8BACA;+BACA;2CACA;2CACA;uDACA;gEACA;iDACA;0DACA;qDACA;8DACA;oCACA;0CACA;0CACA;6CACA;sCACA;4BACA;0BACA;4DACA;iEACA;0DACA;+DACA;mDACA;iDACA;gDACA;AArFA;AAsFA,yCACA;iEACA;;AACA,gDACA;6BACA;2BACA,mDACA;uBACA;;AACA,gEACA;mCACA;;AACA;AACA;AACA;;;;;;;;ACrGA,AACA;;AACA;uBAEA;AADA;AAEA,sOACA;;AACA,gDACA;;AACA;4BAEA;oCACA;qCACA;AACA,AACA;AALA;;AAMA,sDACA;;AACA;4BAEA;oCACA;2CACA;AACA,AACA;AALA;;AAMA,oDACA;;AACA;4BAEA;oCACA;yCACA;AACA,AACA;AALA;;AAMA,sDACA;;AACA;4BAEA;oCACA;2CACA;AACA,AACA;AALA;;AAMA,mDACA;;AACA;4BAEA;oCACA;wCACA;AACA;AAJA;AAKA,gCACA;;AACA,2DACA;;AACA;4BAEA;oCACA;gDACA;AACA,AACA;AALA;;AAMA,qDACA;;AACA;4BAEA;oCACA;0CACA;AACA,AACA;AALA;;AAMA,wDACA;;AACA;4BAEA;oCACA;6CACA;AACA,AACA;AALA;;AAMA,oDACA;;AACA;4BAEA;oCACA;yCACA;AACA;AAJA;AAKA,kDACA;0EACA,AACA;;oDACA;6BACA;uBACA;2BACA;AACA,AACA;;uBACA;;;;;;;AClGA,AACA;;AACA;uBAEA,AACA;AAFA;;AAGA;;;;AACA;;AACA,2BACA,AACA,AACA;;AACA,gCACA;gEACA;AACA;;AACA,wFACA;mDACA,AACA,AACA;;mCACA;oCACA;wCACA;AACA,AACA;;8FACA;mCACA;2BACA;AACA,AACA;;iGACA;oCACA;2BACA;AACA,AACA;;0GACA;2CACA;2BACA;AACA,AACA;;iHACA;wDACA;sEACA;gCACA;AACA,AACA;;yGACA;4DACA;AACA,AACA;;uBACA;AACA;;AACA,6CACA;kCACA;0BACA;AACA,AACA;;uBACA;AACA;;AACA,8DACA;sCACA,AACA,AACA;;8CACA;wCACA;wCACA;mCACA;oCACA;wCACA,AACA;;sDACA;wCACA;AACA;AACA,AACA;;4EACA;gDACA,AACA;;sGACA;uDACA;6DACA;+CACA;wDACA;2EACA;6DACA,AACA;;uCACA;gFACA;+CACA;AACA;2BACA;wCACA;AACA,AACA;;oDACA;uFACA;wCACA;AACA,AACA;;oDACA;oCACA;yEACA;wCACA,AACA;;2BACA;AACA,AACA;;+DACA;4CACA;kDACA;AACA,AACA;;iDACA;sCACA;AACA,AACA;;2BACA;yCACA;gCACA,AACA;;2CACA,AACA;;qEACA;2EACA;AACA;oGACA;uCACA,AACA;;sEACA;uCACA;4EACA;sDACA;6CACA;+BACA;qKACA;AACA,AACA;;gEACA;iFACA;AACA;AACA,AACA;;0DACA;AACA,AACA;;uBACA;AACA;;AACA,oCACA;;AACA,yCACA;6CACA;AACA;;AACA,uCACA;8CACA;AACA;;AACA,kDACA;kDACA;qCACA;uBACA;AACA;;AACA,gDACA;oCACA;gDACA;sDACA;8GACA;AACA;AACA;uBACA;AACA;;AACA,+CACA;gDACA;mCACA;gCACA;8CACA,AACA;;sEACA;4DACA;8BACA;0EACA;uBACA;oCACA;gCACA;0DACA;yFACA;8EACA;8EACA;AACA;kGACA;8FACA;AACA;mDACA;6EACA;6DACA;AACA;uBACA;AACA;;AACA,iDACA;iDACA;2BACA;AACA,AACA;;yCACA;AACA;;AACA,gEACA;uDACA;mFACA;yDACA;AACA;AACA;AACA;;AACA,2DACA;2EACA;AACA;;AACA,sEACA;8FACA;AACA;;AACA,oFACA;mIACA;0DACA;AACA,AACA;;iFACA;qDACA;mDACA,AACA;;yEACA;qGACA;qEACA;kGACA;yBACA;mCACA;AACA;;AACA,iCACA;uBACA;AACA;;AACA,gCACA;sBACA;;;;4EC3PA;;AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;;;;;;;;;;;;;;;AACA;;AACA;AACA;AACA,uDACA;mEACA;sDACA;mDACA;wCACA;wCACA;2CACA;AACA;;AACA,kEACA;+CACA;AACA;;AACA,oEACA;+CACA;AACA,AACA;AACA,AACA;;AACA;;AACA;AACA;;;;;AACA;AACA;AACA,+CACA;;AACA,6CACA;wDACA;mDACA;4DACA;8DACA;0DACA;0DACA;2CACA;+DACA;yCACA;AACA;iDACA;AACA;;AACA,yEACA;gDACA;iDACA;wDACA;uCACA;AACA;;AACA,6EACA;4CACA;AACA;;AACA,2EACA;0DACA;AACA;;AACA,uFACA;sDACA;8DACA;AACA;AACA;;AACA,0EACA;gEACA;AACA,AACA;;AACA,8EACA;4CACA;oGACA,KACA;iDACA;uCACA;oDACA;AACA;AACA;;AACA,4EACA;4DACA;0CACA;;;AACA;AACA;uEACA;2DACA;2CACA;uCACA;2CACA;+DACA;2CACA;AACA;4CACA;oDACA;AACA;AACA;;AACA,yEACA;mEACA;qCACA;AACA;;AACA,oEACA;qEACA;qCACA;AACA;;AACA,kEACA;2DACA;qCACA;AACA;;AACA,mDACA;8DACA;yDACA;iEACA;mCACA;2FACA;iEACA;kFACA;2CACA;mEACA;mEACA;kEACA;+CACA;AACA;AACA;AACA,AACA;;sFACA;iEACA;6EACA;2CACA;mEACA;8DACA;AACA;AACA;AACA,AACA;;oFACA;iEACA;uEACA;2CACA;mEACA;oDACA;AACA;AACA;AACA;AACA;;AACA,uFACA;wEACA;qCACA;AACA;;AACA,2EACA;2DACA;mDACA;kEACA;2CACA;AACA;AACA;yDACA;oDACA;sDACA;AACA;AACA;;AACA,uEACA;sDACA;qCACA;0DACA;sDACA;AACA;;AACA,qEACA;uDACA;uDACA;wDACA;AACA;AACA;;AACA,iEACA;mDACA;AACA;;AACA;AACA,4DACA,AACA;;AACA;;AACA;AACA;AACA,2EACA;iDACA;AACA;;AACA,yFACA;qEACA;qGACA;AACA;;AACA,iGACA;2EACA;sEACA;AACA;AACA;;AACA,2FACA;sFACA;AACA;;AACA,4EACA;qDACA;qDACA;iFACA;8EACA;AACA;2EACA;0DACA;6DACA;sDACA;oDACA;yEACA;;oEAEA;qDACA;oDACA;4DACA,AACA;AALA;+FAMA;qDACA,wDACA;yDACA;2CACA;6DACA;AACA;2CACA;AACA;;AACA,+EACA;2DACA;0EACA;wDACA;2CACA;2EACA;AACA;AACA;;AACA,yEACA;0EACA;AACA;;AACA,yEACA;uEACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA,kDACA;;;AACA,6CACA;uCACA;;AACA;AACA;AACA,6CACA,AACA;;AACA;;AACA;AACA,oCACA;qDACA;qDACA;8EACA;AACA;;AACA;AACA;AACA;AACA,wDACA;;AACA;AACA;AACA;AACA,iGACA;;;;;;;;;;;;;;;SACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,qCACA;AACA;;AACA,uFACA;;;;SACA,AACA,AACA,yBACA;AACA;;AACA,kGACA;wDACA;uEACA;qEACA;uDACA;AACA;2DACA;0DACA;kDACA;sEACA;uEACA;;sEACA;gFACA;AACA;AACA;+CACA;AACA;;AACA,qFACA;mFACA;AACA;;AACA,yEACA;6EACA;AACA;AACA;;AACA,uEACA;wCACA;8DACA;kEACA;0FACA,iDACA;oEACA;AACA;2CACA;AACA;;AACA,qDACA;0DACA;+DACA;yDACA;;AACA,+EACA;2EACA;+CACA;yDACA;8EACA;sEACA;4DACA,+CACA;AACA;AACA;AACA;8CACA;0FACA;AACA;;AACA,0DACA;+CACA;;AACA,4DACA;iDACA;mFACA;+CACA;;AACA,gFACA;0EACA;wCACA;kDACA;yDACA;wEACA;0FACA;+CACA;qDACA;AACA;2CACA;iDACA;AACA;kGACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA,oDACA;;AACA,oGACA;iFACA,AACA;;kDACA;gDACA;qEACA;uEACA;sEACA;kEACA;mDACA;sDACA;AACA;AACA;AACA,AACA;;6DACA;wFACA;wEACA;oEACA;mDACA;wDACA;AACA;AACA;+CACA;4FACA;oDACA;oDACA;sDACA;AACA;AACA;AACA;;AACA,oFACA;yCACA;AACA;;AACA,6FACA;+EACA,gDACA;AACA;;AACA,mFACA;4DACA;0EACA;6CACA;+CACA;2CACA;6CACA;iFACA;iDACA;mDACA;AACA;AACA;2CACA;AACA;;AACA,gFACA;6EACA;6CACA;AACA;AACA;;AACA,wEACA;gEACA;yCACA;6EACA;AACA;;AACA,gFACA;iEACA;AACA;;AACA,+EACA;0DACA;AACA;;AACA,+EACA;qEACA;AACA;;AACA,8EACA;qEACA;AACA;;AACA,gHACA;wEACA;0FACA;wFACA;AACA;+EACA;oFACA;+DACA;6FACA;oEACA;6EACA;uEACA;AACA;AACA;+CACA;8EACA;AACA;AACA;AACA;;AACA,gFACA;gEACA;yCACA;+EACA;AACA;;AACA,wFACA;+DACA;iFACA;6CACA;AACA;AACA;;AACA,iFACA;yCACA;AACA,AACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA,oDACA;;AACA,6EACA;wDACA;8DACA;kGACA;iEACA,AACA;;yDACA,0DACA;uEACA;sFACA;AACA;mFACA;oGACA;mFACA;2DACA;6EACA;sFACA;AACA;yEACA;mEACA;sFACA;mEACA;6EACA;iEACA;AACA;AACA;kFACA;AACA;AACA;+CACA;AACA;AACA;;AACA,uCACA;AACA,AACA;;AACA;;AACA;AACA;AACA,mDACA;;AACA;AACA;AACA;;;AACA,qGACA;;AACA,mDACA;4EACA;;AACA,6EACA;mEACA;sEACA;+DACA;AACA;AACA;;AACA,4EACA;mEACA;iEACA;wDACA;gEACA;+CACA;AACA;2CACA;AACA;;AACA,yDACA;oEACA;AACA;;AACA,uDACA;0EACA;wDACA;4DACA;AACA;2CACA;;AACA;AACA;AACA;AACA,8EACA;gFACA;+EACA;sEACA;gFACA;mFACA;oFACA;yEACA;wEACA;+DACA;yEACA;4EACA;0DACA;AACA;sDACA;uFACA;sFACA;4FACA;oFACA;uDACA;sGACA;AACA;;AACA,uCACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFACA,MACA,iBACA,8CACA;;AACA,mFACA,4BACA;;AACA,mGACA,4BACA;;AACA,kGACA,6BACA;;AACA,4FACA;sDACA;2EACA,UACA;AACA;;AACA,gGACA;yEACA;yCACA;4FACA;AACA;;AACA,mGACA;uDACA,0DACA;AACA;;AACA,yFACA;sEACA;AACA;;AACA,sFACA;4EACA;AACA;;AACA,0FACA;sEACA;0DACA;6CACA;2DACA,0DACA;AACA;AACA;;AACA,iGACA;sEACA;AACA;;AACA,mGACA;uEACA;AACA;;AACA,8FACA;uEACA;AACA;;AACA,yFACA;sEACA;AACA;;AACA,2FACA;uEACA;8EACA;6CACA;6CACA;AACA;AACA;;AACA,sFACA;wEACA;AACA;;AACA,yGACA;uFACA;AACA;;AACA,qFACA;iDACA;AACA,uGACA,oCACA,MACA;AACA;;AACA,oFACA;iDACA;AACA,sGACA,oCACA,MACA;AACA;;AACA;AACA,sEACA;4FACA;wDACA;AACA;iGACA;0FACA;yFACA;iEACA;mGACA;oGACA;gEACA;AACA;mFACA;kFACA;oDACA;kDACA;qEACA;AACA;+EACA;8EACA;gDACA;8CACA;AACA;AACA;;AACA,yEACA;qEACA;AACA;;AACA,+DACA;wCACA;+EACA;wEACA;sEACA;0EACA;;4DAEA;gEACA,AACA;AAHA;kFAIA;AACA;gFACA;kEACA;sEACA;0EACA;;gEAEA,AACA;AAFA;kEAGA;kFACA;AACA;+CACA;6EACA;kGACA;sEACA;0EACA;oFACA;oGACA,MACA;kFACA;AACA;AACA;iDACA;uDACA;+CACA;AACA;AACA;;AACA,kEACA;qDACA;2DACA;+EACA;AACA;2CACA;0DACA;+DACA;uDACA;AACA;AACA;+DACA;yEACA;qEACA;gEACA;+FACA;mDACA;AACA;AACA;AACA;;AACA,4FACA;sDACA;AACA;;AACA;oDAEA;sDACA;qDACA;qDACA;sDACA;kGACA;0EACA;AACA;8EACA;0DACA;AACA;2GACA;0EACA;AACA;sDACA,AACA;AAhBA;;AAiBA,qFACA;2DACA;wCACA;uFACA;gDACA;yDACA;2DACA;AACA,AACA;;wDACA;wCACA;qEACA,+CACA;gDACA;yDACA;wDACA;AACA,AACA;;4DACA;AACA;;AACA,iEACA;kDACA;mEACA;kEACA;oDACA;0GACA;AACA;AACA;AACA;4DACA;kEACA;4DACA;kEACA,AACA;;2EACA;sFACA;oFACA;AACA;AACA;AACA;6GACA;qEACA;sDACA,MACA;AACA;0DACA,yBACA;2EACA;sEACA;yEACA;0DACA,8BACA;qEACA;iEACA;8DACA;AACA;8DACA;mFACA;gEACA;2EACA;0FACA;gEACA;2EACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA,kGACA;wCACA;0DACA;gDACA;+CACA;AACA;;AACA;AACA;;;AACA,oGACA;AACA;;AACA;AACA;AACA;AACA,4FACA;AACA;AACA;AACA;;AACA,wFACA;kDACA;wCACA;sFACA;gFACA;oEACA,qDACA;AACA;gFACA;AACA;gDACA;+CACA;AACA;AACA;;AACA,0FACA;uEACA,AACA;;gEACA;wEACA;4EACA;kEACA;+CACA;iFACA;AACA;2CACA;0DACA;AACA;AACA;;AACA,gEACA;gDACA;AACA;;AACA,2EACA;0DACA;AACA;;AACA,6EACA;+DACA;0DACA;AACA;;AACA,kFACA;2DACA;mEACA;+EACA;qFACA;wEACA;AACA;wGACA;AACA;gFACA;gEACA;AACA;AACA;;AACA,6EACA;gFACA;gEACA;AACA;;AACA,6DACA;;AACA,+DACA;mDACA;2DACA;oEACA;mEACA;2DACA;mDACA;uDACA;AACA;AACA;AACA;2CACA;AACA;;AACA,4EACA;yEACA;AACA;;AACA,4FACA;+DACA;yDACA;iEACA;0EACA;AACA;iEACA;mEACA;4EACA;8EACA;0EACA,mDACA;8FACA;AACA;AACA;AACA;;AACA,kGACA,iBACA;wFACA,0BACA;oGACA;+EACA,AACA;;gEACA;0DACA;0DACA;mEACA;+FACA;mEACA;wFACA;iEACA;kFACA;iFACA;qEACA;0FACA,mDACA;AACA;AACA;AACA;AACA,AACA;;kEACA;0EACA;4FACA,AACA;;yFACA;mEACA;gGACA;AACA;AACA;AACA;AACA,AACA;AACA;AACA;kFACA,kCACA,mCACA,6BACA;iEACA;AACA;AACA;;AACA,uEACA;kDACA,OACA;wFACA;gDACA;AACA;;AACA,mFACA;0DACA;8DACA;wCACA;2DACA;kEACA;yGACA;6DACA;2CACA;0EACA;kGACA;AACA,AACA;;8EACA;uEACA;AACA;AACA;;AACA,2EACA;gFACA;uDACA;mEACA;AACA;2DACA;mEACA;AACA;wEACA;AACA;;AACA,6EACA;4EACA;iEACA,iEACA;6DACA;AACA;AACA;AACA;AACA;;AACA,mEACA;yDACA;4EACA;0DACA;gFACA;sEACA;mEACA,AACA;;mFACA;6EACA;sEACA;AACA;AACA;AACA,AACA;;uFACA;4DACA;oFACA;wDACA;AACA;mDACA;AACA;AACA;AACA;kDACA;AACA;AACA;;AACA,2DACA;8CACA;2EACA;yDACA;qFACA,+BACA;0FACA;6EACA;6FACA;gEACA;AACA;qDACA;AACA;AACA;2CACA;AACA;;AACA,mEACA;uFACA;2EACA;yDACA;6GACA;AACA;AACA;AACA;+CACA;4DACA;AACA;2CACA;AACA;;AACA,qEACA;sDACA;wDACA;wFACA,iCACA;;iDAEA;0DACA,AACA;AAHA;AAIA;;AACA,iFACA;wEACA;4CACA;kEACA;8DACA;iFACA;+CACA;qEACA;AACA;gFACA;kEACA;0EACA,kDACA;wDACA;AACA;AACA;AACA;;AACA,iGACA;0DACA;wCACA;gFACA;8DACA;6EACA;6DACA;mDACA;qEACA;AACA;AACA;gDACA;yDACA;AACA,AACA;;uEACA;yGACA;sEACA;AACA;2CACA;8DACA;AACA;AACA;;AACA,6DACA;wCACA;mEACA;8CACA,4BACA,eACA;2CACA;6EACA,4CACA;+DACA;wEACA;gDACA;4EACA;sDACA;AACA,wDACA,AACA,CACA;AACA;8DACA;kDACA;AACA;AACA;8DACA;AACA;;AACA,mDACA;mDACA;+DACA;+CACA;AACA;yEACA;AACA;;AACA,sEACA;wEACA;AACA;;AACA;;;AACA;AACA,6DACA;6DACA;iDACA;;8DAEA;uEACA,AACA;AAHA;AAIA;AACA;;AACA,kFACA;uEACA;qFACA;mFACA;sDACA;qDACA;wCACA;wCACA;qFACA;mFACA;oDACA;mEACA;gEACA;AACA;AACA;AACA;oFACA;kFACA;oDACA;kEACA;+DACA;AACA;AACA;AACA;8FACA,2EACA;AACA;AACA,AACA;;+EACA;oFACA;iEACA;kDACA;kEACA,oEACA;uDACA;AACA;AACA;+CACA;AACA;AACA;;AACA,+DACA;mDACA;4DACA;uGACA;4DACA;0DACA;;AACA;AACA,wDACA;;AACA,8EACA;sDACA;oDACA;gDACA;uDACA,AACA;;0FACA;mDACA;oDACA;AACA;4DACA;0EACA;6DACA;+EACA;kEACA;AACA;AACA;qEACA;oEACA;iEACA;gFACA;2DACA;2EACA;2EACA;AACA;+DACA;+DACA;uFACA,AACA;;oEACA;sFACA;sEACA;8DACA,0CACA;mDACA;wEACA;wEACA;AACA;6FACA;6EACA;mEACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,4FACA;gEACA;yCACA;sEACA;yDACA;yDACA,AACA;;gDACA;gEACA;iFACA;sDACA;AACA;sDACA;gEACA;qGACA;sFACA;AACA;;AACA,kFACA;8DACA;mGACA;8EACA,AACA;;2DACA,0CACA;yDACA;AACA;8DACA;AACA,AACA;;yEACA,2DACA;iEACA;4DACA;sDACA;sEACA,AACA;;mFACA;6EACA;AACA;gFACA;qEACA;wEACA;qEACA;AACA;AACA;kDACA,AACA;;6DACA,sEACA;4DACA;sDACA;4DACA;6EACA;kEACA;AACA;AACA,AACA;;wCACA;;;AACA,gDACA;wEACA;AACA;6DACA,iEACA;4DACA;sDACA;6EACA;qEACA;;;AACA;;AACA;qEACA;AACA;AACA,AACA;;qFACA;8EACA,AACA;;gHACA,6BACA,8BACA,0CACA;yDACA;AACA;8DACA;AACA,AACA;;2CACA,AACA;kCACA;;AACA,2GACA;kFACA;qDACA;AACA;6EACA;8FACA;8EACA;2EACA;AACA;sGACA;8FACA;gEACA,wCACA;AACA;AACA;AACA;;AACA;8CAEA;qDACA;kDACA;gDACA,AACA;AALA;;AAMA,6DACA;;AACA;gFAEA;sDACA;AACA;kEACA;sDACA;AACA;0EACA;sDACA;AACA;sEACA;sDACA;AACA;4FACA;+CACA;AACA;sFACA;+CACA;AACA;2DACA;+CACA;0CACA;gDACA;mDACA;kDACA;qDACA,AACA;AA1BA;AA2BA,AACA;;AACA;;AACA;AACA,oDACA;gDACA;;AACA,mDACA;+CACA;AACA;;AACA,8DACA,gDACA;wEACA;gDACA,wDACA;AACA;;AACA,6DACA,gDACA;gDACA,yDACA;AACA;;AACA,iFACA;+DACA;oDACA,yDACA;2CACA;gEACA;;;AACA;mEACA;AACA;AACA;;AACA,iFACA;+DACA;4EACA;oDACA,wDACA;2CACA;+DACA;8EACA;;;AACA;kEACA;AACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA,yDACA;;AACA,0DACA;sDACA;AACA;;AACA,wEACA;iFACA;AACA;;AACA,uEACA;6EACA,qDACA;AACA;;AACA,4EACA;6EACA;AACA;;AACA,uEACA;iFACA,yDACA;AACA;;AACA,oDACA;AACA,AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA,yDACA;;AACA,4EACA;2DACA;yFACA;4DACA,mDACA;oEACA;iEACA;2EACA;2CACA;mDACA;AACA;AACA;mDACA;uCACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA,gCACA;6CACA;8CACA;wCACA;mEACA;qEACA;AACA;;AACA,2CACA,kIACA;;AACA,qEACA;uFACA;mGACA;AACA;AACA;;AACA;uCAEA;8CACA;0CACA;4CACA;AAJA;AAKA;AACA;AACA,4EACA;uEACA;iFACA;AACA;mEACA;sEACA;yGACA;0DACA;2EACA;kEACA;AACA;qDACA;iDACA;AACA;AACA;uCACA;AACA;;AACA,+DACA;sDACA,+CACA;gEACA;mEACA;6CACA;wDACA,AACA;;8DACA;+EACA;6EACA;oEACA;uEACA;AACA,AACA;;AACA,uDACA;;AACA;AACA,6CACA;;uDAEA;kDACA;sDACA;oDACA;oDACA,AACA;AANA;;2CAQA;8CACA;gDACA;kDACA,AACA;AALA;AAMA;;AACA;uCAEA;2CACA;4CACA;8DACA;6DACA;yDACA;2DACA;yCACA,AACA,AACA;AAVA;;AAWA,oDACA;AACA;;gDACA;AACA;;AACA,uCACA;;mDAEA;2DACA;0DACA;iDACA;kDACA;2DACA;mDACA;2CACA;+FACA;8FACA;mGACA;AACA,AACA;AAbA;mCAcA;6CACA;6CACA;2DACA,AACA;;wEACA;8CACA;uDACA;8DACA;qDACA;AACA;AACA;2CACA;AACA,AACA;;+FACA;sDACA;AACA,AACA;;uGACA;kDACA;2CACA;AACA,AACA;;8EACA;2CACA;AACA,AACA;;8FACA;wCACA;uEACA;AACA,gDACA;+CACA;AACA;AACA,AACA;;8EACA;wCACA;iEACA;AACA,gDACA;+CACA;AACA;AACA,AACA;;;6CAEA;0CACA;2CACA;oDACA;mDACA;4CACA;oDACA;2CACA;sFACA;+CACA;AACA,AACA;AAZA;AAaA,AACA;;AACA;;AACA;AACA,yDACA;;AACA,kFACA;yEACA;AACA;;AACA,kFACA;6EACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA,oDACA;;AACA,2FACA;mDACA;gDACA;mDACA;kDACA;yDACA;AACA;;AACA,mGACA;yDACA;AACA;;AACA,sFACA;0DACA;AACA;;AACA,sGACA;qDACA;AACA;;AACA,kEACA;mEACA;kEACA;sEACA;+CACA;8DACA;AACA;4DACA;+CACA;AACA;2CACA;AACA;;AACA,mDACA;4FACA;;AACA,sDACA;mEACA;iDACA;2CACA;;AACA,uEACA;uDACA;uDACA,AACA;;sDACA;sDACA;uDACA,0CACA,qDACA;+DACA;oDACA;wFACA;iFACA;gFACA;qFACA;4DACA,+BACA;kFACA;qEACA;+DACA;yFACA;qEACA,6DACA;AACA;AACA;oEACA,sCACA;AACA;AACA;AACA,AACA;;8DACA;oDACA;qDACA;+CACA;2CACA;oDACA;+CACA;AACA;AACA;;AACA,yGACA;mFACA;sDACA,SACA,MACA,qDACA,UACA;AACA;;AACA,2DACA,kDACA;6DACA,SACA,GACA,gBACA;AACA;;AACA,2EACA;yEACA;AACA;;AACA,uCACA;AACA,AACA;;AACA;;AACA,uDACA,SACA,cACA,UACA,qBACA;AACA;AACA;AACA;AACA;AACA;AACA,oDACA;;AACA,oGACA;mFACA;oDACA;gFACA;oDACA;iEACA;wDACA;8EACA;wDACA;mDACA;AACA;uFACA;oFACA;AACA;2CACA;AACA;;AACA,wGACA;8DACA;mEACA;iGACA;oFACA;mDACA;AACA;iDACA;8DACA;2CACA;kFACA;gDACA;AACA;kDACA;8DACA;qDACA;sDACA;kFACA,mCACA,iBACA;2DACA;8DACA;;AACA,4DACA;;AACA,iFACA;6DACA;AACA;;AACA,8EACA;sEACA;+FACA;6DACA;+DACA;AACA;AACA;;AACA,uFACA;4DACA;gGACA,AACA;;wCACA;2DACA;iEACA,kBACA;2EACA;wEACA;sDACA;8FACA,YACA;sDACA;2CACA;sDACA;+FACA,YACA;sDACA;AACA;8DACA;2DACA;mDACA;AACA;;AACA,4FACA;2DACA;kDACA;sGACA;kDACA;mDACA;AACA;;AACA,4FACA;2DACA;oEACA;kDACA;0EACA,gCACA;kDACA;mDACA;AACA;;AACA,sFACA;iFACA;2DACA;+DACA;gDACA;AACA;AACA;;AACA,6EACA;gDACA;AACA;;AACA,0EACA;wFACA;yCACA,sCACA;2DACA;AACA;;AACA,qFACA;uDACA;6DACA;6CACA;qEACA;2DACA;+CACA;qFACA;AACA;AACA,AACA;;uDACA;8DACA;6CACA;qEACA;2DACA;+CACA;4EACA;AACA;2CACA;2FACA;gFACA;AACA,mFACA,mBACA,qBACA;uEACA;qDACA,qBACA,4HACA,SACA,gEACA,AACA,AACA;AACA;AACA;AACA;oEACA;oEACA;AACA;yEACA;mEACA;sEACA;gFACA;2DACA,kDACA,AACA;gFACA;2DACA,iDACA,AACA;+CACA;iDACA;AACA;AACA;AACA;;AACA,0FACA;iFACA;4DACA;AACA;uEACA;wDACA;4DACA;uDACA;sFACA;4FACA,cACA;wDACA;2DACA;gEACA;+CACA;AACA;AACA;;AACA,kFACA;kEACA;+GACA;AACA;uDACA;AACA;;AACA,6EACA;wEACA;iFACA;4DACA;AACA;oFACA;oDACA;uDACA;2CACA;AACA;AACA,AACA;;AACA;;AACA,6CACA,gEACA;AACA;AACA;AACA;AACA;AACA,oCACA;;AACA;AACA,qDACA;oFACA;;;;;aACA,AACA,AACA,AACA,mBACA;AACA,AACA;;sFACA;;;;aACA,AACA,AACA,mBACA;AACA,AACA;;sGACA;kEACA;mFACA;2EACA;AACA;iFACA;gHACA;;2BACA,UACA,AACA,AACA,AACA,AACA;;;;;oDACA;6EACA;mEACA,AACA,AACA;;uDACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gFACA,+BACA,0CACA,+CACA,6CACA,AACA;;4GACA,mCACA;AACA,AACA;;4DACA;4DACA;6DACA,AACA;;oEACA;uFACA;gFACA;kFACA;AACA,AACA;;yEACA;yDACA;AACA;;AACA;;AACA,2DACA;kEACA;wCACA;2FACA;uDACA;mDACA;0EACA;sEACA;oDACA;uFACA;6EACA;gEACA,AACA;;+EACA;yGACA;yFACA;oFACA;oFACA;AACA;yFACA;6FACA,wBACA;4FACA;iFACA;gGACA;8EACA,4BACA;gGACA;qFACA;+DACA;gEACA;AACA;2DACA;6FACA;AACA;AACA,AACA;;0EACA;4EACA;qEACA;6EACA;uGACA;AACA;AACA;wDACA;qEACA;AACA;uDACA;AACA;AACA;AACA;wEACA;iDACA;qEACA;+EACA;AACA,AACA;AACA,AACA;;AACA;;AACA,uDACA,SACA,cACA,cACA,qBACA;AACA;AACA;AACA;AACA;AACA,oDACA;;AACA,2FACA;sDACA;kDACA;iDACA;oGACA;wEACA,0BACA,YACA;kDACA;qDACA;kDACA;wEACA;;AACA,mEACA;;AACA,uFACA;4DACA;AACA;;AACA,mFACA;;AACA,0GACA;sDACA;sDACA;+DACA;qDACA,AACA;;mDACA;6DACA;wDACA;wDACA;iDACA;iDACA;2EACA;AACA;2CACA;mFACA;4DACA;6DACA;mDACA;AACA;+FACA,AACA;;2DACA;4DACA;+DACA;gDACA;kGACA;qEACA;8CACA,sBACA,KACA,8DACA,eACA,AACA;8DACA;6DACA;mDACA;AACA,AACA;;yFACA;6EACA;wEACA;wEACA;AACA;6EACA;qEACA;gEACA;yFACA;uDACA;oFACA;mEACA;oFACA;0EACA;uDACA;mDACA;qDACA;uDACA;AACA;AACA;wDACA;AACA;+DACA;iEACA;sEACA;iEACA;+CACA;0DACA;AACA;+CACA;AACA;2CACA;AACA;;AACA,wFACA;qDACA;qDACA;sDACA;uFACA;gEACA;0DACA;8EACA;AACA;AACA;;AACA,oGACA;qDACA;wDACA;4CACA;kEACA;2EACA;AACA;iDACA;kDACA;AACA;;AACA,4FACA;gDACA;AACA;;AACA,6EACA;kEACA;+GACA;AACA,AACA;;gDACA;+DACA;iJACA;yFACA;+DACA,qBACA,uEACA;AACA;4DACA;+CACA;sEACA,UACA,mEACA;AACA;AACA;6DACA,oDACA;iGACA;AACA;;AACA,+EACA;kEACA;AACA;;AACA,wFACA;sEACA;AACA,AACA,AACA;AACA,AACA;;AACA;;AACA,6CACA;AACA;AACA,oDACA;;AACA,+DACA;kEACA;uHACA;AACA;uDACA;8DACA;4CACA;4CACA;6EACA;iEACA;8CACA,+DACA;kEACA;+CACA;AACA;AACA;;AACA,iFACA;kEACA;+GACA;AACA;0DACA;wCACA;wCACA;wCACA;8DACA;yDACA;4DACA;4DACA;4FACA,8BACA;2CACA;yDACA;AACA;6DACA;0CACA,4DACA;8DACA;2CACA;AACA;;AACA,2FACA;iEACA;sEACA;2CACA;qEACA;AACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA,8CACA;;AACA,yDACA;sDACA,2CACA;AACA;;AACA;AACA,iEACA;oCACA;yDACA;+DACA;mDACA;sDACA;oDACA;wDACA;0EACA;uDACA;kEACA;2DACA;AACA;AACA;2CACA;AACA;oEACA;uCACA;AACA;;AACA,4EACA;6DACA;0DACA;6CACA;8FACA;kEACA;wDACA;2DACA;yDACA;2CACA;+EACA;yDACA;AACA;8CACA;AACA;AACA;;AACA,6CACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA,oDACA;;AACA,sEACA;kDACA;qGACA;wCACA,oEACA;0DACA;6DACA;AACA;AACA;;AACA,uEACA;kDACA;2DACA;sDACA,8CACA,gDACA;0DACA;6DACA;AACA;;AACA,wEACA;kDACA;iDACA;2EACA;0DACA;iDACA;AACA;6FACA;0DACA;6DACA;AACA;AACA;;AACA,qGACA,mBACA;uEACA;sDACA;6FACA;sDACA;AACA;6CACA,MACA,SACA,cACA,WACA,MACA,AACA;AACA;2CACA;AACA;AACA,AACA;;AACA;;AACA;AACA,iGACA;yDACA;;AACA,+EACA;8EACA;;AACA,8EACA;wEACA;;AACA;AACA;AACA,mDACA;;AACA;AACA,iDACA;qEACA;0DACA;qEACA;+CACA;AACA;uCACA;qEACA;+CACA;AACA;;AACA,8EACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCACA,mDACA;AACA,mEACA;;AACA;AACA;AACA;AACA,oCACA;AACA;AACA;AACA;AACA;AACA,+DACA;wEACA;+GACA;AACA;sEACA;4DACA;AACA;AACA;;AACA,2DACA;qDACA;gEACA;8DACA;qDACA;sDACA;+DACA;oDACA;kEACA;AACA;yCACA;sEACA;AACA;;AACA,yEACA;2CACA;AACA;;AACA,sGACA;wDACA;iDACA;6EACA;;4CACA;sEACA;iEACA;qEACA;sEACA;mDACA;oEACA,mFACA;AACA;AACA;gEACA;uDACA;oGACA;AACA;gEACA;AACA;;AACA,wEACA;sDACA,iDACA;AACA;;AACA,0FACA;+EACA,2BACA,+CACA;kDACA,qEACA;kEACA;2EACA;AACA;mDACA;AACA;mGACA;AACA;;AACA,0FACA;wCACA,kEACA;4CACA;AACA;;AACA,yEACA;kEACA;+GACA;AACA;6FACA;AACA;;AACA,uEACA;;qDAEA;oDACA;0DACA;yDACA,AACA;AALA;4DAMA;oEACA;0DACA;kEACA;mEACA;yDACA;AACA;2CACA;AACA;;AACA,oEACA;8DACA;mDACA;AACA;kEACA;AACA;;AACA,wEACA;qFACA;AACA;;AACA,mEACA;;AACA,4DACA;0DACA;AACA;;AACA,wFACA;0DACA;wCACA;kGACA,YACA;sFACA;6DACA;sEACA;AACA;kEACA;2CACA;AACA;;AACA,kEACA;sEACA;AACA;;AACA,8DACA;kEACA;mEACA;0DACA;4CACA;4CACA;iEACA;AACA;2CACA;AACA;;AACA,8EACA;;AACA,sFACA;0DACA;wCACA;gEACA;2CACA;AACA;;AACA,qEACA;kEACA;+GACA;AACA;8DACA;AACA;;AACA,0DACA,UACA,YACA,cACA,UACA,cACA;4EACA;gGACA;sDACA;0DACA,AACA;;2DACA;qEACA;gDACA;yDACA,+CACA;gFACA;gEACA;mDACA;8FACA;AACA;AACA;gFACA;AACA,AACA;;iDACA;wEACA;;;6DACA;yEACA;2DACA;sDACA;gFACA;2DACA;sDACA;mDACA;+CACA;6DACA;0EACA;qEACA;sDACA;AACA,AACA;;;uEAEA,6BACA,sCACA;qDACA;sDACA;mDACA,AACA;AAPA;2CAQA;uGACA;AACA,AACA;;2CACA;AACA;;AACA,wEACA;4DACA;AACA;;AACA,8EACA;4EACA;AACA;;AACA,6EACA;2EACA;AACA;;AACA,8EACA;uEACA,cACA;AACA;;AACA,8EACA;sEACA;wEACA;AACA;;AACA,6EACA;sEACA;uEACA;AACA;;AACA,8EACA;sEACA;uEACA;AACA;;AACA,4EACA;sEACA;AACA;;AACA,yEACA;wEACA;AACA;;AACA,gFACA;uEACA;AACA;;AACA,8EACA;sEACA;wEACA;AACA;;AACA,oFACA;sEACA;AACA;;AACA,oFACA;oEACA;sEACA;AACA;;AACA,iFACA;8EACA,qBACA;mEACA;+CACA;qFACA;oDACA;AACA;2CACA;AACA;;AACA,gFACA;2CACA,qBACA;AACA;;AACA,2FACA;2CACA,qBACA;AACA;;AACA,yFACA;2CACA,qBACA;AACA;;AACA,6EACA;;AACA,0FACA;4DACA;2DACA;0DACA;2DACA;wEACA;2EACA;2FACA;AACA;;AACA,kGACA;iFACA;8EACA;sEACA;wEACA;2EACA;2FACA;AACA;;AACA,kEACA,UACA,SACA,QACA,SACA,UACA,QACA;qDACA,AACA;;4DACA;gDACA;wDACA;AACA,AACA;;qDACA;yDACA;0DACA;2EACA;iDACA,2EACA;AACA;0EACA;iDACA,wEACA;AACA;2CACA;+DACA;yDACA;yDACA;2EACA;wDACA,yDACA;AACA;0EACA;wDACA,wDACA;AACA;AACA;4DACA;2CACA;AACA;;AACA,qFACA;6FACA;AACA;;AACA,kGACA;4EACA;kDACA,6DACA;kFACA;iGACA,AACA;;sFACA,AACA;;+DACA,AACA;;0DACA;qDACA;AACA;AACA,AACA;;2DACA;qEACA;uDACA;+EACA;sEACA;6EACA;AACA;6CACA;wDACA;0DACA;4EACA;8DACA;4EACA;6DACA;2CACA;2EACA;kEACA;qDACA;AACA;AACA;;AACA,oEACA,uDACA;uEACA;6DACA;kGACA;sDACA,+DACA;4DACA;AACA;2FACA;iDACA;AACA;;AACA,6FACA;kDACA;yCACA;yCACA;sDACA;qFACA;iEACA;yDACA;wEACA;AACA;kDACA;yCACA,AACA;;yDACA;mEACA;AACA;AACA;;AACA,8EACA,oCACA,SACA;2DACA;kEACA;4CACA;wCACA;4DACA;wFACA;gDACA;gEACA,oDACA;+CACA;4FACA;AACA;2CACA;6EACA;AACA;iEACA;uDACA;kEACA,AACA;;2DACA;wDACA;+DACA;qEACA;2CACA;oGACA;iEACA;AACA;AACA;;AACA,wEACA;8CACA;;kDACA;4CACA;AACA;;AACA,0EACA;gDACA;AACA;;AACA,oFACA;8DACA;AACA;;AACA,gHACA;uEACA;wDACA;qFACA;kEACA;+DACA,AACA;;gEACA,0DACA;qEACA;sGACA;yEACA;AACA;+EACA;iFACA;kFACA;uEACA;iGACA;oDACA;+CACA;qDACA;AACA;8EACA;wDACA;0EACA;+CACA;yEACA;qGACA;AACA;8EACA;qEACA;6EACA;kFACA;mDACA;iFACA;AACA;AACA;0DACA;qEACA;yEACA;6DACA;+CACA;4DACA;AACA;AACA;AACA;;AACA,0GACA;sDACA;sDACA;uDACA;oDACA;uEACA;2EACA;0EACA;+CACA;qGACA;AACA;2EACA;wDACA;AACA;AACA;;AACA,qFACA;oGACA;AACA;;AACA,wGACA;uDACA;oEACA;qDACA;sDACA;oFACA;AACA;;AACA,+FACA;2DACA;gDACA,iBACA,iBACA,sBACA;AACA;;AACA,8EACA;wDACA;uEACA;wDACA;kDACA;+DACA;4DACA;AACA;yCACA;8DACA,AACA;;gEACA;0EACA;iDACA;+CACA;iEACA;AACA;AACA;AACA;;AACA,8EACA;wDACA;uEACA;yCACA;gEACA,AACA;;yDACA;6EACA;AACA,AACA;;gEACA;6DACA;2CACA;6CACA;AACA;AACA;;AACA,2FACA;kEACA;iFACA;sEACA;wEACA;uEACA;wFACA;AACA;AACA;;AACA,2FACA;kEACA;+EACA;sEACA;wEACA;uEACA;wFACA;AACA;AACA;;AACA,gFACA;wDACA;yDACA,AACA;;iDACA;yEACA;8DACA;kGACA;sEACA;+CACA;6DACA;mGACA;uEACA;AACA;wDACA;AACA;yCACA;AACA;;AACA,8EACA;wDACA;qEACA;oDACA;4EACA;oDACA;AACA;AACA;;AACA;;;AACA;;AACA;;AACA,8EACA;sEACA;8DACA;;iDAEA;iDACA;gDACA,AACA;AAJA;AAKA;;AACA,uDACA,SACA,4BACA;;AACA,4FACA;AACA;AACA;AACA;AACA;AACA,wCACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDACA,AACA;;sDACA;8DACA;0DACA;wDACA;6DACA;2DACA;kDACA;mDACA;AACA,AACA,AACA;;+CACA;+CACA;+CACA;0CACA;uDACA;0CACA;0CACA;sDACA;2EACA;uCACA,AACA;AACA,AACA;;AACA;;AACA,0EACA;AACA;AACA,mDACA;;AACA,gEACA;4CACA;;mDACA;;mDACA,AACA;;AACA;;AACA,8DACA;8EACA;mEACA;uEACA;AACA;yDACA;mDACA;mDACA;0DACA;2DACA;;AACA,4DACA;;AACA,4EACA;gDACA;AACA;;AACA,6EACA;gDACA;AACA;;AACA,qGACA;wFACA;mEACA;wDACA;8DACA;AACA;uDACA,AACA;;yEACA;0DACA;0DACA,MACA,WACA,SACA,WACA,MACA,AACA;gFACA;4DACA;gFACA;uEACA;+CACA;wDACA;AACA;AACA;0DACA;yDACA;kDACA,6FACA;2EACA;AACA;AACA,AACA;;6DACA;wEACA;iDACA;AACA,+CACA;4EACA;AACA;AACA;AACA;kDACA;AACA;;AACA,oFACA;0EACA;mDACA;mGACA;sDACA;qDACA;mDACA;kEACA;0FACA,AACA;;6EACA;wEACA;oEACA;+CACA;uDACA;AACA,AACA;;wDACA;mEACA;6DACA;AACA;sEACA;6EACA;0EACA;kEACA;oFACA;2GACA;oFACA;2GACA;mDACA;oFACA;AACA;+CACA;8FACA;AACA;AACA;4DACA;AACA;;AACA,iFACA;4DACA;AACA;;AACA,mFACA;mDACA;2DACA;AACA;;AACA,6EACA;+FACA;mDACA;kDACA;AACA;;AACA,mFACA;mDACA;0EACA;AACA;;AACA,mGACA;0DACA;+DACA;uEACA;2DACA;+CACA;AACA;2CACA;AACA;;AACA,uFACA;yCACA;2CACA;AACA;;AACA,4FACA;yCACA;iDACA;2CACA;AACA;;AACA,sFACA;4DACA;sDACA;yCACA;mEACA;+CACA;2CACA;gFACA;8EACA;0DACA;AACA;AACA;AACA;AACA;;AACA,sFACA;2CACA;AACA;;AACA,wFACA;2CACA;AACA;;AACA,uCACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDACA,UACA,UACA,QACA,aACA,UACA,UACA,aACA;AACA,qGACA;;AACA,iFACA;6DACA,4BACA,gBACA;AACA;;AACA,0DACA;oEACA;AACA;;AACA,2DACA;wCACA;wEACA;AACA,gDACA;+CACA;AACA;AACA;;AACA,0EACA;uFACA,QACA;sEACA;;AACA,+EACA;4EACA;sDACA;oEACA;kGACA;oFACA;sFACA;wEACA,mHACA;AACA;AACA;AACA;AACA;AACA;;AACA,iGACA;sEACA;8CACA;0EACA;uDACA;wDACA;6EACA,iDACA;6DACA,6BACA,oCACA,yDACA;0DACA;AACA;AACA;4DACA;2CACA;AACA;;AACA,sFACA;gEACA;AACA;;AACA;AACA;AACA,wHACA;mDACA;wFACA;6FACA;qDACA;AACA;2FACA;qDACA;AACA;+CACA;AACA;;AACA,oGACA;uFACA;AACA;;AACA,6GACA;oDACA,iDACA;AACA;;AACA,qFACA;2EACA;2FACA;AACA;+CACA;AACA;;AACA,8DACA,qFACA;iGACA;oFACA;2GACA,AACA;;qFACA;oFACA;2EACA;gDACA;iEACA;sDACA;mDACA;mEACA,YACA,iDACA;AACA;+FACA;AACA,AACA;;8EACA;sDACA;2FACA;oFACA,iDACA;AACA,AACA;;;;;;;;;;;;SACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,0BACA,kBACA,wCACA;mDACA;AACA,AACA;;kFACA,gDACA,YACA;mDACA,AACA,AACA,AACA,AACA,AACA;;;;;;;;;;;;;;;;;;;;KACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,AACA,gCACA,2DACA;+FACA;4DACA,WACA,MACA,YACA,gBACA,oBACA,sBACA,YACA,YACA,qBACA,YACA,MACA,SACA,IACA,UACA,cACA,kBACA,yBACA,eACA,eACA,mBACA;AACA;AACA;;AACA,8GACA;;;AACA;iDACA;oEACA;mDACA;AACA;2DACA;wDACA;2EACA;kEACA;gDACA;wFACA,6BACA;6EACA;4CACA;wFACA;oDACA;+FACA;AACA;8EACA;+CACA;AACA;6FACA;2CACA;AACA;;AACA,0DACA,cACA,0BACA;;AACA,mGACA;6FACA;wCACA,0DACA,AACA;;2FACA;0DACA;6DACA;mEACA;iFACA;gDACA,kEACA;+CACA;0FACA;sFACA,iBACA;AACA;qGACA;kEACA;AACA;AACA;0DACA;2CACA;AACA;;AACA,kFACA;mFACA,2BACA;AACA;;AACA,2EACA;kEACA;+GACA;AACA;2DACA;+CACA;AACA;qDACA;kGACA;8DACA;sEACA;kEACA;2CACA;AACA;;AACA,kFACA;uJACA;4DACA;AACA;qDACA;8DACA;yDACA;6EACA;yDACA;+EACA;8DACA;yFACA,AACA;;oEACA;6DACA;AACA,AACA;;sEACA;0EACA;gEACA;wDACA,sCACA;0FACA,aACA;6FACA;AACA;AACA,AACA;;6FACA;AACA;AACA,AACA,AACA;;AACA;;AACA,6CACA;AACA;AACA;AACA;AACA;AACA,wEACA;;AACA,+DACA;gDACA;+CACA,AACA;;sEACA;sDACA;6DACA;AACA;AACA,AACA;;sEACA;mDACA;gDACA;uEACA;kEACA;+CACA;AACA;AACA;;AACA,kFACA;kDACA;sEACA;qEACA;mEACA;4DACA;qDACA;AACA;2CACA;AACA;;AACA,qEACA;gDACA;wCACA;uFACA;+DACA;gDACA;2CACA;4DACA;uDACA;kEACA;sEACA;2DACA;6DACA;+DACA;AACA;AACA;sDACA;kDACA;4DACA;;AACA,sEACA;;AACA,sFACA;;AACA,6GACA;0DACA;+DACA;uEACA;4CACA;yDACA;oEACA;+CACA;kDACA;iEACA;+FACA;gGACA;AACA;AACA;sDACA;+CACA;AACA;2CACA;AACA;;AACA,gGACA;2CACA;AACA;;AACA,kGACA;kDACA;AACA;;AACA,yDACA;wCACA;wEACA,AACA;;8DACA;4DACA;6EACA;wDACA,sDACA;2CACA;oFACA;AACA,AACA;;sEACA;sEACA;AACA;2CACA;AACA;;AACA,sEACA;iDACA;AACA;;AACA,oEACA;iDACA;AACA;AACA,AACA;;AACA;;AACA,kFACA;8DACA;gEACA;6DACA;AACA;AACA;;AACA,qDACA;iDACA;+CACA;8CACA;AACA;;AACA,kFACA;wDACA;AACA;;AACA,sEACA;kDACA;6DACA;gFACA;0CACA;wDACA;AACA;;AACA,2EACA;oDACA;oEACA;iDACA;iDACA,+BACA;0CACA;8CACA;+DACA;AACA;;AACA,mFACA;iDACA;iDACA;iDACA;AACA;;AACA,gFACA;6DACA;sEACA;kDACA;kDACA;kDACA;AACA;AACA;+DACA;oDACA;gEACA;yDACA;yDACA;yDACA;+CACA;AACA;;AACA,gEACA;iDACA;+CACA,AACA;;8CACA;2EACA;qCACA;uCACA;AACA;;AACA,iEACA;4CACA;AACA;;AACA,6EACA;2DACA;qEACA;AACA;AACA;;AACA,4EACA;uDACA;iDACA;iDACA;kDACA;oFACA;sEACA;AACA;;AACA,6CACA,AACA;;AACA;;AACA,6CACA;AACA,mDACA;;AACA,4EACA;yEACA;2DACA;AACA;AACA;;AACA,gEACA;2EACA,AACA;;yEACA;yDACA;2CACA;gEACA;yDACA,iGACA;AACA,AACA;;0DACA;8DACA;mEACA;AACA;sDACA;qDACA;yFACA;2DACA,AACA;;mFACA;AACA;AACA,AACA;;iGACA;AACA;2CACA;AACA;;AACA,mEACA;0DACA;AACA;;AACA,qEACA;sDACA;AACA,AACA;AACA,AACA;;AACA;;AACA,uDACA,SACA,cACA,cACA,qBACA;AACA;AACA;AACA,oDACA;;AACA,kGACA;sDACA;iDACA;8FACA;oEACA;uEACA;iFACA;AACA;yDACA;+DACA;4DACA;sEACA;4DACA;2DACA;2CACA;2DACA;AACA;kDACA;4DACA;;AACA,qEACA;;AACA,6FACA;6DACA,kCACA,4BACA;8DACA;AACA;AACA;;AACA,iGACA;mEACA;8DACA;AACA;gDACA;AACA;;AACA,qFACA;;AACA,iGACA;wFACA,mBACA;AACA;;AACA,+FACA;2CACA;AACA;;AACA,4FACA;mEACA;mDACA;AACA;;AACA,qGACA;mFACA;4DACA;yCACA;qFACA;iEACA;AACA;+EACA;2DACA;AACA;AACA;;AACA,6FACA;mDACA;wCACA;wCACA;wDACA;0EACA;qDACA;4CACA;2CACA;uEACA;4CACA;AACA,AACA;;+DACA,AACA;;6DACA;gEACA;;uDAEA;8DACA;uDACA;wDACA;uDACA,AACA;AANA;qGAOA;AACA;AACA,AACA;;wEACA;gDACA,4DACA;AACA;wFACA;AACA;;AACA,uFACA;0EACA;AACA;;AACA,8FACA;8EACA;AACA;;AACA,yEACA;4DACA;uDACA;2CACA;sDACA;AACA;AACA;;AACA,mFACA;kEACA;+GACA;AACA;sGACA;iDACA;AACA;;AACA,yDACA;iDACA;yDACA;2FACA;kEACA;yEACA;iGACA;2CACA;mEACA;AACA;AACA;;AACA,yDACA;qDACA;wDACA;4DACA;4CACA;wCACA;yEACA;qGACA;2CACA;8DACA,mDACA;AACA;gEACA;oEACA;AACA;iEACA;0CACA,sBACA,KACA,mEACA,kBACA,AACA;2CACA;AACA;AACA,AACA;;AACA;;AACA;AACA;AACA,+EACA;gDACA;;AACA;AACA,wFACA;gEACA;8DACA;gDACA;;AACA;;AACA;gEACA,2DACA;kEACA;iEACA;uDACA;AACA;mEACA,mCACA,sBACA,+DACA;uDACA;qEACA;6DACA;0DACA;sEACA;8EACA;6DACA;0DACA;AACA;qDACA,AACA;;mFACA;6DACA;0DACA;8DACA;AACA,AACA;;iEACA;iFACA;8CACA;AACA;AACA;uDACA;AACA;AACA;AACA;4EACA;iEACA;iDACA;AACA;0EACA;iEACA;mDACA;AACA;mCACA;2CACA;;AACA,6CACA,AACA;;AACA;;AACA,mCACA;AACA;AACA,mDACA;;AACA,qEACA;sDACA;;AACA,mEACA;;AACA,8GACA;0DACA;+DACA;uEACA;2DACA;+CACA;AACA;2CACA;AACA;;AACA,0GACA;kDACA;oDACA;6DACA;wEACA;;AACA,0GACA;kDACA;oDACA;6DACA;wEACA;AACA;;AACA,qEACA;kEACA;6EACA;AACA;;AACA,uEACA;0DACA;AACA;AACA,AACA;;AACA;;AACA,6CACA;AACA;AACA;AACA;AACA;AACA,mDACA,AACA;;AACA,kEACA;sDACA;oDACA;mDACA;wDACA;;AACA,gEACA;;AACA,+EACA;4DACA;AACA;AACA;6DACA;sDACA;AACA;AACA;4DACA;uEACA;8CACA,iBACA,+DACA;8EACA;AACA;AACA;;AACA,8EACA;wDACA;yCACA;AACA;;AACA,mFACA;mDACA;AACA;;AACA,iFACA;gDACA;AACA;;AACA,yFACA;oDACA;AACA;;AACA,gGACA;uDACA;8EACA;mEACA;kFACA;uEACA;+CACA;+DACA;AACA;+CACA;AACA;2CACA,AACA;;AACA,gGACA;sDACA;gDACA;AACA;;AACA,2FACA;iGACA;oDACA;AACA;sDACA;gDACA;AACA;;AACA,uFACA;qFACA;oDACA;kGACA;kFACA;oEACA;AACA;AACA;0DACA;yDACA;+CACA;iDACA;AACA;+CACA;AACA;2CACA;AACA;;AACA,oFACA;gDACA;AACA;;AACA,mFACA;sEACA;AACA;;AACA,4FACA;sDACA;AACA;;AACA,4FACA;0EACA;AACA;;AACA,6FACA;gEACA;AACA;;AACA,6FACA;kDACA,6FACA;0DACA;AACA;;AACA,4FACA;qEACA;AACA;;AACA,iEACA;kFACA;4DACA;AACA;mEACA;sDACA;mDACA;wCACA;2CACA;AACA;;AACA,4EACA;0DACA;AACA;;AACA,4EACA;sDACA;AACA;;AACA,4DACA;AACA,AACA;;AACA;;AACA;AACA,oEACA;+DACA;0DACA;iEACA;0EACA,4CACA;AACA,2CACA;yDACA;kEACA;AACA;AACA;;AACA,wFACA;gDACA;AACA;;AACA,4FACA;6DACA;4DACA;AACA;gDACA;AACA;;AACA,iFACA,iDACA;4DACA;4DACA;AACA;gDACA;AACA;;AACA,wGACA;2EACA;AACA;;AACA,sGACA;2EACA;AACA;;AACA,oGACA;2EACA;AACA;;AACA,sGACA;2EACA;AACA;;AACA,sFACA;0EACA;AACA;;AACA,8EACA;wEACA;AACA;;AACA,6EACA;0DACA;AACA;;AACA,4EACA;oFACA;AACA;;AACA,0EACA;+DACA;AACA;;AACA,2EACA;gEACA;AACA;;AACA,4EACA;iEACA;AACA;;AACA,2EACA;gEACA;AACA;;AACA,sEACA;2DACA;AACA;;AACA,uEACA;sDACA;2CACA;uDACA;AACA;;AACA,uEACA;gDACA;AACA;;AACA,wEACA;yCACA;gDACA;AACA;;AACA,4DACA;AACA,AACA;;AACA;;AACA;AACA;AACA;AACA,oDACA;;AACA,2EACA;uDACA;2EACA;2DACA;+DACA;iEACA;0EACA;iEACA;mDACA;+EACA;2EACA;sEACA;oDACA,UACA,cACA,SACA,WACA,KACA,AACA;uDACA;AACA;yEACA;AACA;AACA;2CACA;AACA;;AACA,wDACA;+CACA;AACA;;AACA,sDACA;wCACA;yDACA;gDACA;qDACA;+CACA;AACA;AACA;;AACA;AACA,mEACA;wCACA;iEACA;gDACA;+CACA;AACA;AACA;;AACA,sEACA;8DACA;8CACA;yDACA;4CACA;yDACA;sDACA;sFACA;kDACA,AACA;;wEACA;gFACA;kDACA;AACA,AACA;;4DACA;sDACA;iEACA;kDACA;AACA,AACA;;4DACA;sDACA;qFACA;kDACA;AACA;2CACA;AACA;;AACA,uCACA;AACA,AACA;;AACA;;AACA;AACA;AACA,2DACA;;AACA,+DACA;kDACA;AACA;;AACA,uFACA;sDACA;AACA;;AACA;;;AACA,iFACA;wCACA;wCACA;6DACA;8DACA,yCACA;8FACA;6DACA;AACA;2CACA;0DACA;;;4CACA;kEACA;+EACA;AACA;4CACA;AACA;wCACA;2CACA;AACA;;AACA,wEACA;qDACA;AACA;;AACA,mGACA;wCACA;qEACA;sEACA;kDACA;+CACA;mEACA;AACA;2CACA;+DACA;AACA;wEACA;8DACA;oDACA,AACA;;wDACA;+CACA;AACA;AACA;;AACA,6DACA;sDACA;2CACA;AACA;;AACA,8DACA;sDACA;0CACA;AACA;;AACA,mFACA;0CACA;6CACA,AACA;;+GACA;6DACA;uEACA;AACA;uCACA,AACA;;8DACA;sDACA;yEACA,wCACA;yDACA;2CACA;uEACA,wCACA;AACA,AACA;;2CACA;AACA,AACA;AACA,AACA;;AACA;;AACA,8EACA,qDACA;mDACA;oEACA;iEACA;oDACA;oDACA;2CACA,AACA;;oDACA;;;uCACA;AACA,AACA;;4EACA;2EACA;yDACA,8CACA,+CACA,wCACA;6EACA;AACA;2CACA;AACA;wEACA;4CACA;wDACA;0DACA;wDACA;iEACA;8FACA;oEACA,yCACA;gDACA;+DACA,2DACA,uBACA;wDACA;+DACA;AACA;iFACA;oFACA,qBACA;AACA;AACA;AACA;AACA;AACA;2CACA;AACA,AACA;;0EACA;iDACA;oDACA;oDACA;AACA,AACA;;sEACA;gDACA;AACA,AACA;;yEACA;gDACA;AACA,AACA;;0EACA;sEACA;8DACA;AACA;2CACA;AACA,AACA;;sFACA;wDACA;uDACA;uEACA;2DACA,8CACA;uEACA;kDACA;iDACA;2CACA;AACA,AACA;;mEACA;gDACA,8BACA,sCACA;AACA,AACA;;gFACA;mEACA;AACA;2DACA,AACA;;uGACA;kDACA;uEACA;AACA,AACA;;oEACA;oEACA;kFACA;qDACA;AACA;2CACA;AACA,AACA;;8DACA;kDACA;mDACA;uDACA;AACA,AACA;;sFACA;mDACA;kEACA;wDACA;qEACA;iDACA;AACA;AACA;AACA,AACA;;4DACA;wDACA;wDACA,aACA;6DACA;kEACA;+GACA;AACA;wCACA;qDACA;kFACA;0DACA;oDACA;qDACA;2CACA;gDACA;AACA;AACA;qEACA;kEACA;6DACA;2EACA;2DACA;gEACA;oEACA;+CACA;mFACA;iFACA;AACA;+DAEA;2DACA;AAFA,mDAGA;AACA;AACA;uDACA;AACA,AACA;;iFACA;wFACA;8FACA;AACA,AACA;;oEACA,gDACA;qFACA;yEACA;yEACA;wEACA;uDACA;kFACA;8DACA;AACA;AACA;wEACA;AACA;gDACA,AACA;;sDACA;kDACA,mDACA;qEACA;8CACA,4DACA;+CACA;AACA,AACA;;mFACA;uFACA;kEACA;AACA;wDACA;yDACA;2CACA;AACA,AACA;;uFACA;sEACA;qDACA;AACA,AACA;;8EACA;uEACA;AACA,AACA;;6EACA;gDACA;AACA,AACA;;iFACA;uEACA;qDACA;AACA,AACA;;2EACA;kEACA;8EACA;AACA;8CACA;AACA,AACA;AACA,AACA;;AACA;;AACA;AACA,kEACA;;AACA;AACA;AACA,6EACA,uCACA,yCACA,qCACA;;AACA,kDACA;oCACA;iDACA;qDACA;8DACA;4CACA;iDACA;2CACA;AACA;;AACA,kDACA;iDACA;uCACA;AACA;;AACA,4EACA;iDACA,AACA;;6CACA;uDACA;wDACA;+EACA;2EACA,kEACA,KACA;wFACA;AACA;AACA;AACA;qDACA;sDACA;6CACA;AACA,AACA;;AACA,sDACA;8EACA,mDACA,AACA;AACA;;AACA,qDACA;wDACA,uGACA;AACA;;AACA,kEACA;qEACA,AACA;;8DACA;AACA;;AACA,oEACA;iDACA;0DACA;oCACA;0DACA;oDACA;AACA;yCACA;uCACA;AACA;;AACA,sFACA;+CACA;oFACA,AACA;;sDACA;+EACA,YACA,QACA;AACA;uCACA;yFACA;AACA;AACA;;AACA,yEACA;6DACA;;2CAEA;kDACA;gDACA;8CACA,AACA;AALA;8DAMA;uCACA;AACA;;AACA,gDACA;sCACA;AACA;;AACA,gEACA;yDACA,OACA,kBACA,oBACA,AACA,AACA;;oFACA;wFACA;2EACA;mDACA;AACA;AACA;2CACA;AACA,AACA;;+CACA;yDACA;0DACA;kDACA;wEACA;qFACA;gDACA;gDACA;+DACA;wDACA;uDACA;AACA;kFACA;+DACA;sEACA;mEACA;gGACA;0GACA;6DACA;AACA;AACA;qEACA;AACA;+CACA;AACA;uCACA;qDACA;0DACA;yEACA;kDACA,AACA,AACA;;0EACA;wEACA;yDACA;mDACA;oGACA;kGACA;iEACA;AACA;AACA;yDACA;AACA;AACA;+CACA;AACA;AACA,AACA;AACA;;AACA;AACA,iDACA;oCACA;kEACA;gEACA,AACA;;oFACA;2FACA,wCACA;4CACA,kGACA,AACA;;0DACA,qEACA;mDACA;AACA;AACA;2CACA;4CACA;2CACA;AACA;AACA;;AACA,2DACA,AACA;4DACA;4DACA;wCACA;;wCACA;wCACA;qCACA;AACA;;AACA;AACA,uDACA;mDACA;AACA;;AACA,wEACA;oDACA;gEACA;0DACA;AACA;uCACA;AACA;;AACA,uDACA;oCACA;iDACA;4CACA;2CACA;AACA;AACA;;AACA,kDACA;+CACA,uEACA,mCACA,gCACA;AACA;;AACA,uEACA;oCACA;0EACA;AACA,kDACA;AACA;;AACA,gEACA;sDACA;oFACA,2CACA;AACA;;AACA,yDACA;mFACA;AACA;;AACA,gEACA;+DACA;4DACA;0EACA;;;AACA;;AACA;AACA;uCACA;4DACA;0EACA;sEACA;AACA;AACA;AACA;;AACA,sDACA;wDACA;AACA;;AACA,uEACA;qDACA;sEACA;mDACA;qDACA;4CACA;gGACA;0DACA;AACA;AACA;AACA;;AACA,8DACA;oDACA;2CACA;AACA;uCACA;AACA;;AACA,kFACA;gGACA;sDACA;iDACA;8CACA;sDACA;wCACA;yEACA;0DACA;AACA;2CACA;AACA,AACA;;8DACA;wDACA;+CACA;sGACA;yDACA;AACA;2CACA;AACA;AACA;;AACA,4DACA,sDACA;;AACA,mDACA;4KACA;AACA;;AACA,wDACA;mEACA;wCACA;+EACA;8FACA;mDACA;AACA;iDACA;AACA;AACA;;AACA,0DACA;iDACA;AACA;;AACA;yCAEA;8CACA;mDACA;0DACA;yCACA;6CACA;yCACA;mDACA;6CACA;0CACA;yCACA;6CACA;0CACA;0CACA;0CACA;8CACA;kDACA;kDACA;6CACA;0CACA;gDACA;mDACA;yDACA;gEACA;6CACA;iDACA;8EACA,sCACA;wCACA;qCACA;wCACA;kDACA;4CACA;AAjCA;AAkCA,yEACA;mFACA;2FACA;AACA;;AACA,iEACA;;AACA;;;;;AACA,6CACA,AACA;wDACA;;;;;AACA;;;;8EC99KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;2FCZA,AACA,AACA,AACA;AACA;AACA","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.data = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import marked from 'marked';\r\nimport {bindable} from 'aurelia-framework';\r\n\r\nexport class MarkdownAurelia {\r\n  @bindable raw;\r\n  html = '';\r\n\r\n  rawChanged(newValue) {\r\n    this.html = marked(newValue);\r\n  }\r\n}\r\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","var $ = require('jquery');\r\n\r\nvar Util = function () {\r\n\r\n};\r\n\r\nUtil.prototype.inheritsFrom = function (child, parent) {\r\n    child.prototype = Object.create(parent.prototype);\r\n};\r\n\r\nUtil.prototype.registerPlugin = function (name, Plugin) {\r\n    $.fn[name] = function (options) {\r\n        return this.each(function () {\r\n            if (!$.data(this, name)) {\r\n                $.data(this, name,\r\n                    new Plugin(this, options));\r\n            }\r\n        });\r\n    };\r\n};\r\n\r\nUtil.prototype.guid = function () {\r\n    var id = '', i, random;\r\n    for (i = 0; i < 32; i++) {\r\n        random = Math.random() * 16 | 0;\r\n        if (i == 8 || i == 12 || i == 16 || i == 20) {\r\n            id += '-';\r\n        }\r\n        id += (i == 12 ? 4 : i == 16 ? random & 3 | 8 : random).toString(16);\r\n    }\r\n    return id;\r\n};\r\n\r\nmodule.exports = new Util();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/_util.js\n// module id = 10\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DialogController = undefined;\n\nvar _lifecycle = require('./lifecycle');\n\nvar _dialogResult = require('./dialog-result');\n\n\n\nvar DialogController = exports.DialogController = function () {\n  function DialogController(renderer, settings, resolve, reject) {\n    \n\n    this.renderer = renderer;\n    this.settings = settings;\n    this._resolve = resolve;\n    this._reject = reject;\n  }\n\n  DialogController.prototype.ok = function ok(output) {\n    return this.close(true, output);\n  };\n\n  DialogController.prototype.cancel = function cancel(output) {\n    return this.close(false, output);\n  };\n\n  DialogController.prototype.error = function error(message) {\n    var _this = this;\n\n    return (0, _lifecycle.invokeLifecycle)(this.viewModel, 'deactivate').then(function () {\n      return _this.renderer.hideDialog(_this);\n    }).then(function () {\n      _this.controller.unbind();\n      _this._reject(message);\n    });\n  };\n\n  DialogController.prototype.close = function close(ok, output) {\n    var _this2 = this;\n\n    if (this._closePromise) {\n      return this._closePromise;\n    }\n\n    this._closePromise = (0, _lifecycle.invokeLifecycle)(this.viewModel, 'canDeactivate').then(function (canDeactivate) {\n      if (canDeactivate) {\n        return (0, _lifecycle.invokeLifecycle)(_this2.viewModel, 'deactivate').then(function () {\n          return _this2.renderer.hideDialog(_this2);\n        }).then(function () {\n          var result = new _dialogResult.DialogResult(!ok, output);\n          _this2.controller.unbind();\n          _this2._resolve(result);\n          return result;\n        });\n      }\n\n      _this2._closePromise = undefined;\n    }, function (e) {\n      _this2._closePromise = undefined;\n      return Promise.reject(e);\n    });\n\n    return this._closePromise;\n  };\n\n  return DialogController;\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-controller.js\n// module id = 12\n// module chunks = 0","var $ = require('jquery');\r\nvar Util = require('./_util.js');\r\n\r\n// base widget. all the other viewer widgets should inherit from this one\r\nfunction ComponentBase(element, options, pluginName) {\r\n    this.element = element;\r\n\r\n    var baseDefaults = {\r\n        guid: Util.guid()\r\n    };\r\n\r\n    var extendedDefaults = $.extend(true, baseDefaults, this.defaults);\r\n    this.config = $.extend(true, extendedDefaults, options);\r\n\r\n    this._defaults = extendedDefaults;\r\n    this._name = pluginName;\r\n\r\n    this.init();\r\n}\r\n\r\nmodule.exports = ComponentBase;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/_base.js\n// module id = 15\n// module chunks = 0","// Simple JavaScript Templating\r\n// John Resig - http://ejohn.org/ - MIT Licensed\r\nvar cache = {};\r\n\r\nmodule.exports = function(str, data) {\r\n    // Figure out if we're getting a template, or if we need to\r\n    // load the template - and be sure to cache the result.\r\n    var fn = !/\\W/.test(str) ?\r\n        cache[str] = cache[str] ||\r\n            tmpl(document.getElementById(str).innerHTML) :\r\n\r\n        // Generate a reusable function that will serve as a template\r\n        // generator (and which will be cached).\r\n        new Function(\"obj\",\r\n            \"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n\r\n            // Introduce the data as local variables using with(){}\r\n            \"with(obj){p.push('\" +\r\n\r\n            // Convert the template into pure JavaScript\r\n            str\r\n                .replace(/[\\r\\t\\n]/g, \" \")\r\n                .split(\"<%\").join(\"\\t\")\r\n                .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n                .replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n                .split(\"\\t\").join(\"');\")\r\n                .split(\"%>\").join(\"p.push('\")\r\n                .split(\"\\r\").join(\"\\\\'\")\r\n            + \"');}return p.join('');\");\r\n\r\n    // Provide some basic currying to the user\r\n    return data ? fn(data) : fn;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/microtemplating.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AiDialogBody = undefined;\n\nvar _dec, _dec2, _class;\n\nvar _aureliaTemplating = require('aurelia-templating');\n\n\n\nvar AiDialogBody = exports.AiDialogBody = (_dec = (0, _aureliaTemplating.customElement)('ai-dialog-body'), _dec2 = (0, _aureliaTemplating.inlineView)('\\n  <template>\\n    <slot></slot>\\n  </template>\\n'), _dec(_class = _dec2(_class = function AiDialogBody() {\n  \n}) || _class) || _class);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/ai-dialog-body.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AiDialogFooter = undefined;\n\nvar _dec, _dec2, _class, _desc, _value, _class2, _descriptor, _descriptor2, _class3, _temp;\n\nvar _aureliaTemplating = require('aurelia-templating');\n\nvar _dialogController = require('./dialog-controller');\n\nfunction _initDefineProp(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n\n\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n\nfunction _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that transform-class-properties is enabled.');\n}\n\nvar AiDialogFooter = exports.AiDialogFooter = (_dec = (0, _aureliaTemplating.customElement)('ai-dialog-footer'), _dec2 = (0, _aureliaTemplating.inlineView)('\\n  <template>\\n    <slot></slot>\\n\\n    <template if.bind=\"buttons.length > 0\">\\n      <button type=\"button\" class=\"btn btn-default\" repeat.for=\"button of buttons\" click.trigger=\"close(button)\">${button}</button>\\n    </template>\\n  </template>\\n'), _dec(_class = _dec2(_class = (_class2 = (_temp = _class3 = function () {\n  function AiDialogFooter(controller) {\n    \n\n    _initDefineProp(this, 'buttons', _descriptor, this);\n\n    _initDefineProp(this, 'useDefaultButtons', _descriptor2, this);\n\n    this.controller = controller;\n  }\n\n  AiDialogFooter.prototype.close = function close(buttonValue) {\n    if (AiDialogFooter.isCancelButton(buttonValue)) {\n      this.controller.cancel(buttonValue);\n    } else {\n      this.controller.ok(buttonValue);\n    }\n  };\n\n  AiDialogFooter.prototype.useDefaultButtonsChanged = function useDefaultButtonsChanged(newValue) {\n    if (newValue) {\n      this.buttons = ['Cancel', 'Ok'];\n    }\n  };\n\n  AiDialogFooter.isCancelButton = function isCancelButton(value) {\n    return value === 'Cancel';\n  };\n\n  return AiDialogFooter;\n}(), _class3.inject = [_dialogController.DialogController], _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, 'buttons', [_aureliaTemplating.bindable], {\n  enumerable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, 'useDefaultButtons', [_aureliaTemplating.bindable], {\n  enumerable: true,\n  initializer: function initializer() {\n    return false;\n  }\n})), _class2)) || _class) || _class);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/ai-dialog-footer.js\n// module id = 19\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AiDialogHeader = undefined;\n\nvar _dec, _dec2, _class, _class2, _temp;\n\nvar _aureliaTemplating = require('aurelia-templating');\n\nvar _dialogController = require('./dialog-controller');\n\n\n\nvar AiDialogHeader = exports.AiDialogHeader = (_dec = (0, _aureliaTemplating.customElement)('ai-dialog-header'), _dec2 = (0, _aureliaTemplating.inlineView)('\\n  <template>\\n    <button type=\"button\" class=\"dialog-close\" aria-label=\"Close\" if.bind=\"!controller.settings.lock\" click.trigger=\"controller.cancel()\">\\n      <span aria-hidden=\"true\">&times;</span>\\n    </button>\\n\\n    <div class=\"dialog-header-content\">\\n      <slot></slot>\\n    </div>\\n  </template>\\n'), _dec(_class = _dec2(_class = (_temp = _class2 = function AiDialogHeader(controller) {\n  \n\n  this.controller = controller;\n}, _class2.inject = [_dialogController.DialogController], _temp)) || _class) || _class);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/ai-dialog-header.js\n// module id = 20\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AiDialog = undefined;\n\nvar _dec, _dec2, _class;\n\nvar _aureliaTemplating = require('aurelia-templating');\n\n\n\nvar AiDialog = exports.AiDialog = (_dec = (0, _aureliaTemplating.customElement)('ai-dialog'), _dec2 = (0, _aureliaTemplating.inlineView)('\\n  <template>\\n    <slot></slot>\\n  </template>\\n'), _dec(_class = _dec2(_class = function AiDialog() {\n  \n}) || _class) || _class);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/ai-dialog.js\n// module id = 21\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AttachFocus = undefined;\n\nvar _dec, _class, _class2, _temp;\n\nvar _aureliaTemplating = require('aurelia-templating');\n\n\n\nvar AttachFocus = exports.AttachFocus = (_dec = (0, _aureliaTemplating.customAttribute)('attach-focus'), _dec(_class = (_temp = _class2 = function () {\n  function AttachFocus(element) {\n    \n\n    this.value = true;\n\n    this.element = element;\n  }\n\n  AttachFocus.prototype.attached = function attached() {\n    if (this.value && this.value !== 'false') {\n      this.element.focus();\n    }\n  };\n\n  AttachFocus.prototype.valueChanged = function valueChanged(newValue) {\n    this.value = newValue;\n  };\n\n  return AttachFocus;\n}(), _class2.inject = [Element], _temp)) || _class);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/attach-focus.js\n// module id = 22\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\n\nvar DialogResult = exports.DialogResult = function DialogResult(cancelled, output) {\n  \n\n  this.wasCancelled = false;\n\n  this.wasCancelled = cancelled;\n  this.output = output;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-result.js\n// module id = 23\n// module chunks = 0","var $ = require('jquery');\r\n// import * as $ from 'jquery';\r\n\r\nexport class Endpoints {\r\n\r\n    apiBaseUrl: string;\r\n    urls = {\r\n        saveShapeInfo: selectedDocumentId => `/image/${selectedDocumentId}/save`,\r\n        saveRotationInfo: selectedDocumentId => `/image/${selectedDocumentId}/saverotationinfo`,\r\n        getPageCount: selectedDocumentId => `/image/${selectedDocumentId}/getpagecount`,\r\n        getexistingpreviewimages: selectedDocumentId => `/image/${selectedDocumentId}/getexistingpreviewimages`,\r\n        getShapes: selectedDocumentId => `/image/${selectedDocumentId}/getshapes`,\r\n        previewAvailable: (selectedDocumentId, index) => `/image/${selectedDocumentId}/previewavailable/${index}`\r\n    };\r\n\r\n    constructor(apiBaseUrlParam : string) {\r\n        this.apiBaseUrl = apiBaseUrlParam;\r\n    }\r\n\r\n    private ajaxGetOptions(url: string) {\r\n        return {\r\n            method: \"GET\",\r\n            url: url,\r\n            dataType: \"json\",\r\n            contentType: \"application/json; charset=utf-8\"\r\n        }\r\n    }\r\n\r\n    private ajaxPostOptions(url: string, data : any) {\r\n        return {\r\n            method: \"POST\",\r\n            url: url,\r\n            dataType: \"json\",\r\n            data: data,\r\n            contentType: \"application/json; charset=utf-8\"\r\n        }\r\n    }\r\n\r\n    private makeAjaxCall(options) {\r\n        return $.ajax(options);\r\n    }\r\n\r\n    public saveShapeInfo(selectedDocumentId: number, shapeInfo : any) {\r\n        const options = this.ajaxPostOptions(`${this.apiBaseUrl}${this.urls.saveShapeInfo(selectedDocumentId)}`,\r\n            JSON.stringify(shapeInfo));\r\n        return this.makeAjaxCall(options);\r\n    }\r\n\r\n    public saveRotationInfo(selectedDocumentId: number, rotationInfo : any) {\r\n        const options = this.ajaxPostOptions(`${this.apiBaseUrl}${this.urls.saveRotationInfo(selectedDocumentId)}`,\r\n            JSON.stringify(rotationInfo));\r\n        return this.makeAjaxCall(options);\r\n    }\r\n\r\n    public getPageCount(selectedDocumentId: number) {\r\n        const options = this.ajaxGetOptions(`${this.apiBaseUrl}${this.urls.getPageCount(selectedDocumentId)}`);\r\n        return this.makeAjaxCall(options);\r\n    }\r\n\r\n    public getExistingPreviewImages(selectedDocumentId: number) {\r\n        const options = this.ajaxGetOptions(`${this.apiBaseUrl}${this.urls\r\n            .getexistingpreviewimages(selectedDocumentId)}`);\r\n        return this.makeAjaxCall(options);\r\n    }\r\n\r\n    public getShapes(selectedDocumentId: number) {\r\n        const options = this.ajaxGetOptions(`${this.apiBaseUrl}${this.urls.getShapes(selectedDocumentId)}`);\r\n        return this.makeAjaxCall(options);\r\n    }\r\n\r\n    public previewAvailable(selectedDocumentId: number, index: number) {\r\n        const options = this.ajaxGetOptions(`${this.apiBaseUrl}${this.urls\r\n            .previewAvailable(selectedDocumentId, index)}`);\r\n        return this.makeAjaxCall(options);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// src/transcend/transcend-endpoints.ts","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar dialogOptions = exports.dialogOptions = {\n  lock: true,\n  centerHorizontalOnly: false,\n  startingZIndex: 1000,\n  ignoreTransitions: false\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-options.js\n// module id = 44\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.invokeLifecycle = invokeLifecycle;\nfunction invokeLifecycle(instance, name, model) {\n  if (typeof instance[name] === 'function') {\n    var result = instance[name](model);\n\n    if (result instanceof Promise) {\n      return result;\n    }\n\n    if (result !== null && result !== undefined) {\n      return Promise.resolve(result);\n    }\n\n    return Promise.resolve(true);\n  }\n\n  return Promise.resolve(true);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/lifecycle.js\n// module id = 45\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\n\nvar Renderer = exports.Renderer = function () {\n  function Renderer() {\n    \n  }\n\n  Renderer.prototype.getDialogContainer = function getDialogContainer() {\n    throw new Error('DialogRenderer must implement getDialogContainer().');\n  };\n\n  Renderer.prototype.showDialog = function showDialog(dialogController) {\n    throw new Error('DialogRenderer must implement showDialog().');\n  };\n\n  Renderer.prototype.hideDialog = function hideDialog(dialogController) {\n    throw new Error('DialogRenderer must implement hideDialog().');\n  };\n\n  return Renderer;\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/renderer.js\n// module id = 46\n// module chunks = 0","export class Authorization {\r\n    private cookieName = \"authToken\";\r\n\r\n    private getCookie(name: string) {\r\n        const match = document.cookie.match(new RegExp(name + '=([^;]+)'));\r\n        if (match) {\r\n            return match[1];\r\n        }\r\n\r\n        return \"\";\r\n    }\r\n\r\n    private setCookie(name: string, value: string) {\r\n        document.cookie = name + \"=\" + value;\r\n    }\r\n\r\n    get(): string {\r\n        const level = this.getCookie(this.cookieName);\r\n        return level;\r\n    }\r\n\r\n    set(level: string) {\r\n        this.setCookie(this.cookieName, level);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// src/demofiles/Authorization.ts","import { DialogController } from \"aurelia-dialog\";\r\nimport { useView } from \"aurelia-framework\";\r\n\r\n@useView(\"transcend/components/modal/exportModal.html\")\r\nexport class exportModal {\r\n\r\n    constructor(private dialogController: DialogController) {\r\n        this.init();\r\n    }\r\n\r\n    private sr: any;\r\n    private currentPage: number;\r\n    private pageCount: number;\r\n    private errors: string[] = [];\r\n    private showWatermarkDisabled: boolean;\r\n    private showRedactionsDisabled: boolean;\r\n    private showRedactions= false;\r\n    private showWatermark = false;\r\n    private isPagerangeSelected = false;\r\n    private pageFrom: string;\r\n    private pageTo: string;\r\n    private pagesToSend;\r\n    private pages;\r\n    private selectedPages;\r\n    private formats;\r\n    private selectedFormat;\r\n\r\n    private Submit() {\r\n        //Set pagesToSend to the selected value\r\n        this.selectedPageChanged();\r\n        //TODO should we use aurelia validation for this?\r\n        if (this.selectedPages.value === 'pages' && this.pagesToSend[0] >= this.pagesToSend[1]) {\r\n            this.errors.push(\"Number from should be smaller than number to\");\r\n            return;\r\n        }\r\n        this.errors.pop();\r\n        this.dialogController.ok({\r\n            showRedactions: this.showRedactions,\r\n            showWatermark: this.showWatermark,\r\n            selectedPages: this.pagesToSend,\r\n            selectedFormat: this.selectedFormat && this.selectedFormat.value\r\n        });\r\n    };\r\n\r\n    private Close() {\r\n        this.dialogController.cancel();\r\n    }\r\n\r\n    private selectedPageChanged() {\r\n        switch (this.selectedPages.value) {\r\n        case 'all':\r\n            this.isPagerangeSelected = false;\r\n            this.pagesToSend = [1, this.pageCount];\r\n            break;\r\n        case 'pages':\r\n            this.isPagerangeSelected = true;\r\n            this.pagesToSend = [parseInt(this.pageFrom), parseInt(this.pageTo)];\r\n            break;\r\n        case 'current':\r\n            this.pagesToSend = [this.currentPage, this.currentPage];\r\n            this.isPagerangeSelected = false;\r\n            break;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        this.sr = this.dialogController.settings.sr;\r\n        this.pages = [\r\n            { value: 'all', name: this.sr.allPages },\r\n            { value: 'pages', name: this.sr.pages },\r\n            { value: 'current', name: this.sr.currentPage }\r\n        ];\r\n        this.selectedPages = this.pages[0];\r\n        this.formats = [\r\n            { value: 'pdf', name: this.sr.pdfFormat },\r\n            { value: 'tiff', name: this.sr.tiffFormat }\r\n        ];\r\n        this.selectedFormat = this.formats[0];\r\n        this.currentPage = this.dialogController.settings.currentPage;\r\n        this.pageCount = this.dialogController.settings.pageCount;\r\n        this.showWatermarkDisabled = !this.dialogController.settings.permissions.toggleWatermark;\r\n        this.showRedactionsDisabled = !this.dialogController.settings.permissions.canSave;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// src/transcend/components/modal/exportModal.ts","import { DialogController } from \"aurelia-dialog\";\r\nimport { useView } from \"aurelia-framework\";\r\n\r\n@useView(\"transcend/components/modal/saveModal.html\")\r\nexport class saveModal {\r\n    protected sr: any; //StringResources\r\n\r\n    constructor(protected dialogController: DialogController) {\r\n        this.sr = dialogController.settings.sr;\r\n    }\r\n\r\n    protected submit(save: boolean) {\r\n        this.dialogController.ok(save);\r\n    }\r\n\r\n    protected Close() {\r\n        this.dialogController.cancel();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// src/transcend/components/modal/saveModal.ts","var $ = require('jquery');\r\n// import * as $ from 'jquery';\r\nimport { Endpoints } from './transcend-endpoints';\r\n\r\nexport class Printer {\r\n\r\n    selectedDocumentId: number;\r\n    options: any;\r\n    rotatedPages: any;\r\n    frame: HTMLIFrameElement;\r\n    afterPrintFunc: Function;\r\n    beforePrintFunc: Function;\r\n\r\n    constructor(selectedDocumentIdParam, optionsParam) {\r\n        this.selectedDocumentId = selectedDocumentIdParam;\r\n        this.options = optionsParam;\r\n    }\r\n\r\n    public printDocument(rotatedPages: any) {\r\n        this.rotatedPages = rotatedPages;\r\n        // NOTE:\r\n        // This feature works by creating a hidden iframe and calling the print method on its window object.\r\n        // It might not work reliably accross all browsers and the viewer attempts to remedy that by firing a callback if it won't work.\r\n        // ----------\r\n        // Useful reading about the topic:\r\n        // http://stackoverflow.com/questions/7570496/getting-the-document-object-of-an-iframe - getting document and window objects of an iframe\r\n        // https://developer.mozilla.org/en-US/docs/Printing - explains printing and event handling in IE and Firefox\r\n        // http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/ - explains a method for detecting printing in WebKit\r\n        // ----------\r\n\r\n        // Remove previous print iframes\r\n        $('#sn-docpreview-print-iframe').remove();\r\n        $('body').append('<div class=\"loading-print-view\"><img src=\"' + this.options.placeholderImgPath + '\" /><br />loading</div>');\r\n\r\n        const endpoints = new Endpoints(this.options.dataTransmission.apiBaseUrl);\r\n\r\n        endpoints.getExistingPreviewImages(this.selectedDocumentId).always(data => this.makePrintVersion(data));\r\n    }\r\n\r\n    private pageIsRotated(pageNumber: number): number {\r\n        for (let rotatedPage of this.rotatedPages) {\r\n            if (pageNumber === parseInt(rotatedPage.pageNum) && rotatedPage.options.degree !== 0) {\r\n                return parseInt(rotatedPage.options.degree);\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    private isIe(userAgent: string): boolean {\r\n        userAgent = userAgent || navigator.userAgent;\r\n        return userAgent.indexOf('MSIE ') > -1 || userAgent.indexOf('Trident/') > -1 || userAgent.indexOf('Edge') > -1;\r\n    }\r\n\r\n    private makePrintVersion(data) {\r\n\r\n        if (!data) {\r\n            throw new Error('Reply is incorrect for preview images request.');\r\n        }\r\n\r\n        const picsHtml = this.createHtmlForPictures(data);\r\n        // Create a hidden iframe element\r\n        const hiddFrameElement = this.createHiddenIframe();\r\n\r\n        document.body.appendChild(hiddFrameElement);\r\n\r\n        // Find the DOM document inside the iframe\r\n        const doc = hiddFrameElement.contentDocument || hiddFrameElement.contentWindow.document;\r\n\r\n        doc.open();\r\n        doc.write(picsHtml);\r\n        doc.close();\r\n\r\n        this.frame = document.getElementById(\"sn-docpreview-print-iframe\") as HTMLIFrameElement;\r\n\r\n        $(doc).ready(() => {\r\n            $('#sn-docpreview-print-iframe').contents().find(\"img\").each((index, value) => {\r\n                if (this.isIe) {\r\n                    $(value).css(\"height\", \"90%\");\r\n                } else {\r\n                    $(value).css(\"height\", \"95%\");\r\n                }\r\n            });\r\n        });\r\n\r\n        this.printHandlers(hiddFrameElement);\r\n\r\n        hiddFrameElement.onload = () => {\r\n            this.setPrint();\r\n        }\r\n\r\n        $('.loading-print-view').remove();\r\n    }\r\n\r\n    private createHiddenIframe() {\r\n        //TODO do this with class\r\n        const hiddFrameElement = document.createElement(\"iframe\");\r\n        hiddFrameElement.id = 'sn-docpreview-print-iframe';\r\n        hiddFrameElement.style.visibility = \"hidden\";\r\n        hiddFrameElement.style.position = \"fixed\";\r\n        hiddFrameElement.style.right = \"0\";\r\n        hiddFrameElement.style.bottom = \"0\";\r\n        hiddFrameElement.style.width = '100%';\r\n        hiddFrameElement.style.height = '100%';\r\n        return hiddFrameElement;\r\n    }\r\n\r\n    private setPrint() {\r\n        this.frame.contentWindow.onbeforeunload = () => { this.closePrint(); }\r\n        this.frame.contentWindow.focus(); // Required for IE\r\n        this.frame.contentWindow.print();\r\n    }\r\n\r\n    private closePrint() {\r\n        $('.loading-print-view').remove();\r\n        document.body.removeChild(this.frame);\r\n    }\r\n\r\n    private createHtmlForPictures(images): string {\r\n        const $watermarkIcon = $('.sn-icon-nowatermark');\r\n        const IsWatermarked = typeof $watermarkIcon !== 'undefined' && $watermarkIcon && $watermarkIcon.length > 0;\r\n        let pics = '<style type=\"text/css\">body{text-align: center;}</style>';\r\n        for (const image of images) {\r\n            let ind = this.pageIsRotated(image.Index);\r\n            if (typeof ind !== 'undefined' && ind !== -1) {\r\n                if (ind === -90) {\r\n                    ind = 270;\r\n                }\r\n                if (IsWatermarked) {\r\n                    pics += `<p class=\"break\"><img src=\"${image.PreviewAvailable}?watermark=true&rotation=${ind}\" /></p>`;\r\n                } else {\r\n                    pics += `<p class=\"break\"><img src=\"${image.PreviewAvailable}?rotation=${ind}\" /></p>`;\r\n                }\r\n            } else {\r\n                if (IsWatermarked) {\r\n                    pics += `<p class=\"break\"><img src=\"${image.PreviewAvailable}?watermark=true\" /></p>`;\r\n                } else {\r\n                    pics += `<p class=\"break\"><img src=\"${image.PreviewAvailable}\" /></p>`;\r\n                }\r\n            }\r\n        }\r\n        return pics;\r\n    }\r\n\r\n    private printHandlers(hiddFrameElement: HTMLIFrameElement) {\r\n\r\n        if (hiddFrameElement.contentWindow && hiddFrameElement.contentWindow.matchMedia) {\r\n            const mediaQueryList = hiddFrameElement.contentWindow.matchMedia('print');\r\n            mediaQueryList.addListener(mql => {\r\n                if (mql.matches) {\r\n                    this.beforePrint();\r\n                } else {\r\n                    this.afterPrint();\r\n                    this.closePrint();\r\n                }\r\n            });\r\n        }\r\n\r\n        // This works in IE and Firefox\r\n        $(hiddFrameElement.contentWindow).on(\"beforeprint.snDocViewer\", () => this.beforePrint());\r\n        $(hiddFrameElement.contentWindow).on(\"afterprint.snDocViewer\", () => {\r\n            this.afterPrint();\r\n            this.closePrint(); // Can't remove the element in Chrome in afterPrint() because then it crashes\r\n        });\r\n\r\n    }\r\n\r\n    private beforePrint() {\r\n        this.beforePrintFunc && this.beforePrintFunc();\r\n    }\r\n\r\n    private afterPrint() {\r\n        this.afterPrintFunc && this.afterPrintFunc();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// src/transcend/transcend-printer.ts","var $ = require('jquery');\r\n// import * as $ from 'jquery';\r\nimport { Endpoints } from './transcend-endpoints';\r\nimport { Printer } from './transcend-printer';\r\nimport { exportModal } from './components/modal/exportModal';\r\nimport { saveModal } from './components/modal/saveModal';\r\nimport { DialogService } from 'aurelia-dialog';\r\n\r\nexport class TranscendViewer {\r\n\r\n    options = null;\r\n    basicOptions = null;\r\n    $viewer = null;\r\n    $basicViewer = null;\r\n    viewer = null;\r\n    requests = [];\r\n    documentIdCollection = null;\r\n    documentOpened = null;\r\n    loadedShapes = {};\r\n    selectedDocumentId: number;\r\n    isErrorPage = false;\r\n    overlay = $('<div class=\"overlay\"></div>');\r\n\r\n    endpoints: Endpoints;\r\n    printer: Printer;\r\n\r\n    constructor(private dialogService: DialogService) {\r\n    }\r\n\r\n    private changeSelectedDocumentId(newId) {\r\n        this.basicOptions.isFullscreen = this.isViewerFullscreen();\r\n        this.selectedDocumentId = newId;\r\n        this.options.callbacks &&\r\n            this.options.callbacks.selectedDocumentChange &&\r\n            this.options.callbacks.selectedDocumentChange(newId);\r\n        this.hideViewer();\r\n        this.basicOptions.selectedDocumentId = this.selectedDocumentId;\r\n        this.options.title = $('.docViewerLink[data-id=\"' + newId + '\"]').text();\r\n        this.$viewer.show();\r\n        this.$viewer.removeData('snDocViewer');\r\n\r\n        this.initializeViewer(this.$viewer, this.basicOptions);\r\n    }\r\n\r\n    private initializeOptions() {\r\n        this.options.SR = $.extend({\r\n                DocViewerCloseTitle: 'Close',\r\n                PreviewGenerationFailed: 'Preveiw generation failed'\r\n            },\r\n            this.options.SR);\r\n\r\n        this.options.callbacks = $.extend({\r\n                //Called before the viewer is closed\r\n                beforeClose: null,\r\n                //Called after the viewer is closed\r\n                afterClose: null\r\n            },\r\n            this.options.callbacks);\r\n\r\n        this.selectedDocumentId = this.options.selectedDocumentId || 1;\r\n    };\r\n\r\n    private displayErrorMessage(errorMsg) {\r\n        this.isErrorPage = true;\r\n        var errorBlock = `<div class=\"sn-viewer-errorDiv\"><h2 class =\"errorTxt\">${errorMsg}</h2></div>`;\r\n        this.$viewer.html(errorBlock);\r\n    };\r\n\r\n    private isViewerFullscreen() {\r\n        return this.$viewer.data('snDocViewer').isFullscreen();\r\n    }\r\n\r\n    private setViewerDisplayMode(isFullscreen) {\r\n        if (isFullscreen === true) {\r\n            setTimeout(function() {\r\n                    var $viewerka = $('.sn-docpreview-container').parent();\r\n                    if ($viewerka.length > 0) {\r\n                        $viewerka.data('snDocViewer').enterFullscreenMode($('.sn-input-jumptopage').val());\r\n                    } else {\r\n                        this.$viewer.addClass('fullScreen');\r\n                    }\r\n                },\r\n                500);\r\n        } else {\r\n            this.$viewer.removeClass('fullScreen');\r\n        }\r\n    }\r\n\r\n    private hideViewer() {\r\n        if (this.viewer && this.viewer.destroy) {\r\n            this.viewer.destroy();\r\n            this.viewer = null;\r\n        }\r\n        this.$viewer.css('display', 'none');\r\n        $('.sn-doc-title').remove();\r\n    }\r\n\r\n    private toggleWatermark() {\r\n        var $this = $('#buttontoggleWatermark').children('span');\r\n        if ($this.hasClass('sn-icon-watermark')) {\r\n            $this.removeClass('sn-icon-watermark').addClass('sn-icon-nowatermark active')\r\n                .attr('title', 'Hide watermark');\r\n            this.switchWatermark(true);\r\n        } else {\r\n            $this.removeClass('sn-icon-nowatermark active').addClass('sn-icon-watermark')\r\n                .attr('title', 'Show watermark');\r\n            this.switchWatermark(false);\r\n        }\r\n    }\r\n\r\n    private async openModalForExport() {\r\n        const sr = {\r\n            title: 'Export Document',\r\n            pagesTitle: 'Pages',\r\n            from: 'From:',\r\n            to: 'To:',\r\n            formatTitle: 'Format',\r\n            watermarkTitle: 'Watermark',\r\n            showWatermark: 'Show watermark',\r\n            redactionTitle: 'Redactions',\r\n            showRedactions: 'Show redactions',\r\n            cancelBtn: 'Cancel',\r\n            submitBtn: 'Submit',\r\n            allPages: 'All Pages',\r\n            pages: 'Pages',\r\n            currentPage: 'Current Page',\r\n            pdfFormat: 'PDF',\r\n            tiffFormat: 'TIFF'\r\n        }\r\n        const response = await this.dialogService.open({\r\n            viewModel: exportModal,\r\n            currentPage: this.viewer.currentPage(),\r\n            pageCount: this.options.previewCount,\r\n            permissions: this.options.permissionInfo,\r\n            sr: sr\r\n        });\r\n        if (!response.wasCancelled) {\r\n            window.location.href =`${this.options.dataTransmission.apiBaseUrl}/document/export/${this\r\n                .selectedDocumentId}/?showRedactions=${response.output.showRedactions}&showWatermark=${response\r\n                    .output.showWatermark}&pageNumberFrom=${response.output.selectedPages[0]}&pageNumberTo=${response.output.selectedPages[1]}&selectedFormat=${response\r\n                .output.selectedFormat}`;\r\n        }\r\n    }\r\n\r\n    private download() {\r\n        window.location.href = `${this.options.dataTransmission.apiBaseUrl}/document/download/${this.selectedDocumentId}`;\r\n    }\r\n\r\n    appendPreviewPostfix = null;\r\n    wm = false;\r\n\r\n    private switchWatermark(enabled) {\r\n        var self = this;\r\n        var $images: any;\r\n        if (this.appendPreviewPostfix && typeof this.appendPreviewPostfix == 'function') {\r\n            this.wm = enabled;\r\n            $images = $('img[data-loaded=true]', $('.sn-docpreview-container'));\r\n\r\n            var wmParam = '&watermark=true';\r\n            // Iterate through all images\r\n            for (let i = 0; i < $images.length; i++) {\r\n                var $img = $($images[i]);\r\n                var oldsrc = $img.attr('src');\r\n                var rotationParam = '';\r\n                var rotation = $img.parent().attr('data-degree');\r\n                if (typeof rotation !== 'undefined' && parseInt(rotation) !== 0)\r\n                    rotationParam = '&rotation=' + rotation;\r\n\r\n                var path;\r\n                // Set the src parameter according to the watermark URL parameter\r\n\r\n                if (enabled) {\r\n                    // trimright: remove last '?' if there is one, to avoid having duplicate question marks ('??')\r\n                    //oldsrc = oldsrc.replace(new RegExp(\"[\\?]+$\"), \"\");\r\n                    path = self.appendPreviewPostfix(oldsrc.substring(0, oldsrc.indexOf('?')),\r\n                        true,\r\n                        true,\r\n                        rotationParam);\r\n                    $img.attr('src', path);\r\n                    self.wm = true;\r\n                } else {\r\n                    path = self.appendPreviewPostfix(oldsrc.substring(0, oldsrc.indexOf('?')),\r\n                        false,\r\n                        true,\r\n                        rotationParam);\r\n                    $img.attr('src', path);\r\n                    self.wm = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private getAvailableFunctions(permissionInfo) {\r\n        var self = this;\r\n        return {\r\n            export: {\r\n                action: () => this.openModalForExport(),\r\n                title: 'Export',\r\n                icon: '<span class=\"sn-icon sn-icon-download\"></span>',\r\n                type: 'dataRelated',\r\n                permission: permissionInfo.canDownload,\r\n                touch: false\r\n            },\r\n            print: {\r\n                action: () => this.printer.printDocument(this.viewer.saveShapes().PageAttributes),\r\n                title: 'Print',\r\n                icon: '<span class=\"sn-icon sn-icon-print\"></span>',\r\n                type: 'dataRelated',\r\n                permission: permissionInfo.canPrint,\r\n                touch: false\r\n            },\r\n            toggleWatermark: {\r\n                action: () => this.toggleWatermark(),\r\n                title: 'Show watermark',\r\n                icon: '<span class=\"sn-icon sn-icon-watermark\"></span>',\r\n                type: 'dataRelated',\r\n                permission: permissionInfo.toggleWatermark,\r\n                touch: false\r\n            },\r\n            save: {\r\n                action: function() { self.endpoints.saveShapeInfo(self.selectedDocumentId, self.viewer.saveShapes()); },\r\n                title: 'Save',\r\n                icon: '<span class=\"sn-icon sn-icon-save\">Save</span>',\r\n                type: 'dataRelated',\r\n                permission: permissionInfo.canSave,\r\n                touch: false\r\n            },\r\n            download: {\r\n                action: () => this.download(),\r\n                title: 'Download',\r\n                icon: '<span class=\"sn-icon sn-icon-download\"></span>',\r\n                type: 'dataRelated',\r\n                permission: permissionInfo.canDownload,\r\n                touch: false,\r\n                bindTo: this\r\n            }\r\n        };\r\n    }\r\n\r\n    private async openModalForSave(documentId: number) {\r\n        const stringResources = {\r\n                title: 'Save?',\r\n                doYouWantToSave: `Do you want to save ${this.options.title}?`,\r\n                saveBtn: 'Save',\r\n                dontSaveBtn: 'Don\\'t save',\r\n                cancelBtn: 'Cancel'\r\n        }\r\n        const response = await this.dialogService.open({ viewModel: saveModal, sr: stringResources });\r\n\r\n        if (response.wasCancelled) {\r\n            return;    \r\n        }\r\n        \r\n        if (response.output) {\r\n            this.endpoints.saveShapeInfo(this.selectedDocumentId, this.viewer.saveShapes());\r\n            this.changeSelectedDocumentId(documentId);\r\n        } else {\r\n            this.viewer.setUnsaved(false);\r\n            this.changeSelectedDocumentId(documentId);\r\n        }\r\n        \r\n    }\r\n\r\n    private initializeFunctions() {\r\n        var self = this;\r\n\r\n        var initializeHelper = {\r\n            getPagerObject: function() {\r\n                var pagerHelper = {\r\n                    firstDocumentClickAction: function() {\r\n                        if (!$(this).children('span').hasClass('disabled')) {\r\n                            if (JSON.stringify(self.loadedShapes) !== JSON.stringify(self.viewer.getAllShapes())) {\r\n                                self.openModalForSave(self.documentIdCollection[0]);\r\n                            } else {\r\n                                self.changeSelectedDocumentId(self.documentIdCollection[0]);\r\n                            }\r\n                        }\r\n                    },\r\n                    previousDocumentClickAction: function() {\r\n                        if (!$(this).children('span').hasClass('disabled')) {\r\n                            var currentIndex = self.documentIdCollection.indexOf(self.selectedDocumentId);\r\n                            if (JSON.stringify(self.loadedShapes) !== JSON.stringify(self.viewer.getAllShapes())) {\r\n                                self.openModalForSave(self.documentIdCollection[currentIndex - 1]);\r\n                            } else {\r\n                                self.changeSelectedDocumentId(self.documentIdCollection[currentIndex - 1]);\r\n                            }\r\n                        }\r\n                    },\r\n                    nextDocumentClickAction: function() {\r\n                        if (!$(this).children('span').hasClass('disabled')) {\r\n                            var currentIndex = self.documentIdCollection.indexOf(self.selectedDocumentId);\r\n                            if (JSON.stringify(self.loadedShapes) !== JSON.stringify(self.viewer.getAllShapes())) {\r\n                                self.openModalForSave(self.documentIdCollection[currentIndex + 1]);\r\n                            } else {\r\n                                self.changeSelectedDocumentId(self.documentIdCollection[currentIndex + 1]);\r\n                            }\r\n                        }\r\n                    },\r\n                    lastDocumentClickAction: function() {\r\n                        if (!$(this).children('span').hasClass('disabled')) {\r\n                            if (JSON.stringify(self.loadedShapes) !== JSON.stringify(self.viewer.getAllShapes())) {\r\n                                self.openModalForSave(self.documentIdCollection[self.documentIdCollection.length - 1]);\r\n                            } else {\r\n                                self\r\n                                    .changeSelectedDocumentId(self\r\n                                        .documentIdCollection[self.documentIdCollection.length - 1]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return {\r\n                    firstdocument: {\r\n                        action: self.options.firstDocumentClick && self.options.firstDocumentClick.action ||\r\n                            pagerHelper.firstDocumentClickAction,\r\n                        title: self.options.firstDocumentClick && self.options.firstDocumentClick.title ||\r\n                            'First document',\r\n                        icon: '<span id=\"firstDoc\" class=\"sn-icon ' +\r\n                            (self.options.firstDocumentClick && self.options.firstDocumentClick.icon) +\r\n                            ' paging\"></span>',\r\n                        type: self.options.firstDocumentClick && self.options.firstDocumentClick.type || 'dataRelated',\r\n                        permission: self.options.firstDocumentClick && self.options.firstDocumentClick.permission ||\r\n                            true,\r\n                        touch: self.options.firstDocumentClick && self.options.firstDocumentClick.touch || true\r\n                    },\r\n                    prevdocument: {\r\n                        action: self.options.previousDocumentClick && self.options.previousDocumentClick.action ||\r\n                            pagerHelper.previousDocumentClickAction,\r\n                        title: self.options.previousDocumentClick && self.options.previousDocumentClick.title ||\r\n                            'Previous document',\r\n                        icon: '<span id=\"prevDoc\" class=\"sn-icon ' +\r\n                            (self.options.previousDocumentClick && self.options.previousDocumentClick.icon) +\r\n                            ' paging\"></span>',\r\n                        type: self.options.previousDocumentClick && self.options.previousDocumentClick.type ||\r\n                            'dataRelated',\r\n                        permission: self.options\r\n                            .previousDocumentClick &&\r\n                            self.options.previousDocumentClick.permission ||\r\n                            true,\r\n                        touch: self.options.previousDocumentClick && self.options.previousDocumentClick.touch || true\r\n                    },\r\n                    nextdocument: {\r\n                        action: self.options.nextDocumentClick && self.options.nextDocumentClick.action ||\r\n                            pagerHelper.nextDocumentClickAction,\r\n                        title: self.options\r\n                            .nextDocumentClick &&\r\n                            self.options.nextDocumentClick.title ||\r\n                            'Next document',\r\n                        icon: '<span id=\"nextDoc\" class=\"sn-icon ' +\r\n                            (self.options.nextDocumentClick && self.options.nextDocumentClick.icon) +\r\n                            ' paging\"></span>',\r\n                        type: self.options.nextDocumentClick && self.options.nextDocumentClick.type || 'dataRelated',\r\n                        permission: self.options.nextDocumentClick && self.options.nextDocumentClick.permission || true,\r\n                        touch: self.options.nextDocumentClick && self.options.nextDocumentClick.touch || true\r\n                    },\r\n                    lastdocument: {\r\n                        action: self.options.lastDocumentClick && self.options.lastDocumentClick.action ||\r\n                            pagerHelper.lastDocumentClickAction,\r\n                        title: self.options\r\n                            .lastDocumentClick &&\r\n                            self.options.lastDocumentClick.title ||\r\n                            'Last document',\r\n                        icon: '<span id=\"lastDoc\" class=\"sn-icon ' +\r\n                            (self.options.lastDocumentClick && self.options.lastDocumentClick.icon) +\r\n                            ' paging\"></span>',\r\n                        type: self.options.lastDocumentClick && self.options.lastDocumentClick.type || 'dataRelated',\r\n                        permission: self.options.lastDocumentClick && self.options.lastDocumentClick.permission || true,\r\n                        touch: self.options.lastDocumentClick && self.options.lastDocumentClick.touch || true\r\n                    }\r\n                }\r\n            },\r\n\r\n            initializeDataTransmissionUrls: function() {\r\n                var apiBaseUrl = self.options.dataTransmission.apiBaseUrl;\r\n                if (apiBaseUrl) {\r\n                    var isAbsoluteUrlRegex = /^(?:[a-z]+:)?\\/\\//i;\r\n                    for (var transmissionProp in self.options.dataTransmission) {\r\n                        if (transmissionProp !== 'apiBaseUrl' &&\r\n                            self.options.dataTransmission.hasOwnProperty(transmissionProp)) {\r\n                            var url = self.options.dataTransmission[transmissionProp].url;\r\n                            if (!isAbsoluteUrlRegex.test(url)) {\r\n                                self.options.dataTransmission[transmissionProp].url = apiBaseUrl + '/' + url;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            //#region getImages\r\n\r\n            Request: function(p, id, dead) {\r\n                this.p = p;\r\n                this.id = id;\r\n                this.dead = dead;\r\n            },\r\n\r\n            addPromiseToArray: function(p, id) {\r\n                var req = new initializeHelper.Request(p, id, false);\r\n                self.requests.push(req);\r\n                self.requests[self.requests.length - 1].p = p;\r\n                self.requests[self.requests.length - 1].idx = id;\r\n                self.requests[self.requests.length - 1].dead = false;\r\n            },\r\n\r\n            getImage: function(item) {\r\n                var promise = $.Deferred();\r\n                initializeHelper.addPromiseToArray(promise, item);\r\n                self.previewExists(item).done(function(data) {\r\n                    promise.resolve(data);\r\n                });\r\n                return promise;\r\n            },\r\n\r\n            //#endregion\r\n\r\n            toolbarDropDownHandler: function() {\r\n\r\n                var $openedToolbarDropdown;\r\n\r\n                var $fittTools =\r\n                    $('.sn-icon-originalsize, .sn-icon-fittowindow, .sn-icon-fittoheight, .sn-icon-fittowidth');\r\n                var $zoomTools = $('.sn-icon-zoomout, .sn-icon-zoomin, .sn-icon-rubberband');\r\n\r\n                $('.sn-zooming-tools').each(function() {\r\n                    $(this).find($fittTools).parent()\r\n                        .wrapAll('<div id=\"fittingToolsContainer\" class=\"fitting-tools-container\"/>');\r\n                    $(this).find($zoomTools).parent()\r\n                        .wrapAll('<div id=\"zoomingToolsContainer\" class=\"zooming-tools-container\"/>');\r\n                });\r\n\r\n                var $rotateContainer = $('.sn-viewer-rotate');\r\n                var $fittContainer = $('#fittingToolsContainer');\r\n                var $zoomContainer = $('#zoomingToolsContainer');\r\n\r\n                $fittContainer.css({ \"margin-left\": '123px' });\r\n                $zoomContainer.css({ \"margin-left\": '209px' });\r\n\r\n                $rotateContainer.before(\"<span class='rotate-tool-collector sn-icon'>ROTATE</span>\");\r\n                $fittContainer.before(\"<span class='fitting-tool-collector sn-icon'>FIT</span>\");\r\n                $zoomContainer.before(\"<span class='zooming-tool-collector sn-icon'>ZOOM</span>\");\r\n\r\n                var dropdownHandler = function($newDropdownContainer) {\r\n                    if ($newDropdownContainer) {\r\n                        $newDropdownContainer.show();\r\n                    }\r\n                    if ($openedToolbarDropdown && $openedToolbarDropdown.length > 0) {\r\n                        $openedToolbarDropdown.hide();\r\n                    }\r\n                    if (!$newDropdownContainer || $newDropdownContainer.is(':hidden')) {\r\n                        $openedToolbarDropdown = null;\r\n                    } else {\r\n                        $openedToolbarDropdown = $newDropdownContainer;\r\n                    }\r\n                }\r\n\r\n                $(document.body).on('click',\r\n                    function(event) {\r\n                        var $dropdownContainer = $(event.target).next();\r\n                        if ($dropdownContainer.is($rotateContainer) ||\r\n                            $dropdownContainer.is($fittContainer) ||\r\n                            $dropdownContainer.is($zoomContainer)) {\r\n                            dropdownHandler($dropdownContainer);\r\n                        } else {\r\n                            dropdownHandler(null);\r\n                        }\r\n\r\n                    });\r\n\r\n                $rotateContainer.add($fittContainer).add($zoomContainer).children('span').each(function() {\r\n                    var text = $(this).attr('title');\r\n                    $(this).children().append('<span class=\"button-title\"> ' + text + '</span>');\r\n                });\r\n\r\n                $rotateContainer.hide();\r\n                $fittContainer.hide();\r\n                $zoomContainer.hide();\r\n\r\n                // add save rotation button\r\n                $rotateContainer\r\n                    .append('<span class=\"saveRotation\" title=\"Save rotation\"><span class=\"sn-icon sn-icon-saverotate saverotation\">Save rotation<span/></span>');\r\n                $rotateContainer.children('.saveRotation')\r\n                    .click(function() {\r\n                        self.endpoints.saveRotationInfo(self.selectedDocumentId,\r\n                        {\r\n                            rotationInfo: self.viewer.saveShapes().PageAttributes\r\n                        });\r\n                    });\r\n            },\r\n\r\n            pagerHandler: function() {\r\n                $('#viewerContainer').on('mouseover',\r\n                    function() {\r\n                        $('.sn-docpreview-container').mouseover(function() {\r\n                            $('.sn-paging-tools').fadeIn(400);\r\n                            $('.sn-doc-title').fadeIn(400);\r\n                        });\r\n\r\n                        $('.sn-docpreview-container').mouseleave(function() {\r\n                            $('.sn-paging-tools').fadeOut(400);\r\n                            $('.sn-doc-title').fadeOut(400);\r\n                        });\r\n                    });\r\n            },\r\n\r\n            closeXHandler: function() {\r\n                var $closeButton = $('<button class=\"closeDocPreview\" title=\"' +\r\n                    self.options.SR.DocViewerCloseTitle +\r\n                    '\">&nbsp</button>').on('click.di9',\r\n                    function() {\r\n                        self.options.callbacks.beforeClose && self.options.callbacks.beforeClose();\r\n                        self.hideViewer();\r\n                        self.options.callbacks.afterClose && self.options.callbacks.afterClose();\r\n                    });\r\n\r\n                $closeButton.appendTo(self.viewer.getContainer());\r\n            }\r\n        }\r\n\r\n        if (self.options.documentIdCollection) {\r\n            self.documentIdCollection = self.options.documentIdCollection;\r\n        }\r\n\r\n        if (self.options.enableDocumentPager) {\r\n            var functions = $.extend(initializeHelper.getPagerObject(), self.options.functions);\r\n            self.options.functions = functions;\r\n        }\r\n\r\n        if (self.options.dataTransmission) {\r\n            if (self.options.dataTransmission.getExistingPreviewImages &&\r\n                self.options.dataTransmission.getExistingPreviewImages.url) {\r\n                self.options.getExistingPreviewImages = function() {\r\n                    return self.endpoints.getExistingPreviewImages(self.selectedDocumentId);\r\n                };\r\n            }\r\n        }\r\n\r\n        self.documentOpened = self.options.callbacks.documentOpened;\r\n        self.options.callbacks.documentOpened = function() {\r\n            initializeHelper.toolbarDropDownHandler();\r\n\r\n            initializeHelper.pagerHandler();\r\n\r\n            if (self.options.needCloseButton) {\r\n                initializeHelper.closeXHandler();\r\n            }\r\n\r\n            if (self.options.thumbnailDirection) {\r\n                if (self.options.thumbnailDirection === 'vertical') {\r\n                    $('.sn-doc-thumbnails').addClass('vertical');\r\n                } else {\r\n                    $('.sn-doc-thumbnails').addClass('horizontal');\r\n                }\r\n            }\r\n\r\n            if (self.options.enableDocumentPager) {\r\n                var currentDocNum = self.documentIdCollection.indexOf(self.selectedDocumentId) + 1;\r\n                var $currentInput = $(\"<input type='text' id='currentDocNum' value='\" + currentDocNum + \"'/>\");\r\n                var $documentCountSpan = $(\"<span type='text' id='documentCountContainer'>/\" +\r\n                    self.documentIdCollection.length +\r\n                    '</span>');\r\n                var $previousDocumentContainer = $('#prevDoc').parent('span');\r\n                $currentInput.insertAfter($previousDocumentContainer);\r\n                $documentCountSpan.insertAfter($currentInput);\r\n\r\n                $currentInput.on('blur',\r\n                    function() {\r\n                        $currentInput.val(currentDocNum);\r\n                    });\r\n\r\n                $currentInput.keydown(function(e) {\r\n                    // Enter: jump\r\n                    if (e.keyCode === 13) {\r\n                        if ($currentInput.val() > self.documentIdCollection.length) {\r\n                            $currentInput.val(self.documentIdCollection.length);\r\n                            return;\r\n                        }\r\n                        var selectedDocInd = parseInt($currentInput.val(), 10) - 1;\r\n                        self.changeSelectedDocumentId(self.documentIdCollection[selectedDocInd]);\r\n                    }\r\n                    // Allow: backspace, delete, tab, escape, and .\r\n                    if ($.inArray(e.keyCode, [46, 8, 9, 27, 110, 190]) !== -1 ||\r\n                        // Allow: Ctrl+A\r\n                        (e.keyCode === 65 && e.ctrlKey === true) ||\r\n                        // Allow: home, end, left, right\r\n                        (e.keyCode >= 35 && e.keyCode <= 39)) {\r\n                        // let it happen, don't do anything\r\n                        return;\r\n                    }\r\n                    // Ensure that it is a number and stop the keypress\r\n                    if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {\r\n                        e.preventDefault();\r\n                    }\r\n                });\r\n\r\n\r\n                //#region handle disable\r\n\r\n                var $firstDoc = $('#firstDoc');\r\n                var $prevDoc = $('#prevDoc');\r\n                var $nextDoc = $('#nextDoc');\r\n                var $lastDoc = $('#lastDoc');\r\n\r\n                if (currentDocNum === self.documentIdCollection.length) {\r\n                    $firstDoc.removeClass('disabled');\r\n                    $prevDoc.removeClass('disabled');\r\n\r\n                    $nextDoc.addClass('disabled');\r\n                    $lastDoc.addClass('disabled');\r\n                }\r\n\r\n                if (currentDocNum === self.documentIdCollection[0]) {\r\n                    $firstDoc.addClass('disabled');\r\n                    $prevDoc.addClass('disabled');\r\n\r\n                    $nextDoc.removeClass('disabled');\r\n                    $lastDoc.removeClass('disabled');\r\n                }\r\n\r\n                //#endregion\r\n            }\r\n\r\n\r\n            var $container = self.viewer.getContainer();\r\n            $container.find('.sn-doc-thumbnails').css('overflow', 'scroll');\r\n            $container.find('.sn-doc-thumbnails').css('height', '600px');\r\n        }\r\n\r\n        self.options.getImage = initializeHelper.getImage;\r\n    }\r\n\r\n    // TODO: remove glbInitializeHelper\r\n\r\n    private initByGetPageCount() {\r\n        var deferred = $.Deferred();\r\n        var self = this;\r\n        this.endpoints.getPageCount(this.selectedDocumentId).then(function(previewCount) {\r\n            self.enableDefaultDisplay(true);\r\n            switch (previewCount) {\r\n            case -1:\r\n                setTimeout(function() {\r\n                        self.initByGetPageCount();\r\n                    },\r\n                    self.options.pollTimeout || 3000);\r\n                break;\r\n            case -3:\r\n                self.enableDefaultDisplay(false);\r\n                self.displayErrorMessage(self.options.SR.PreviewGenerationFailed);\r\n                break;\r\n            default:\r\n                self.options.previewCount = previewCount;\r\n                self.pollUntilPreviewAvailable();\r\n                self.pollUntilGetExistingPreviewImage(previewCount).done(function(data) {\r\n                    deferred.resolve(data);\r\n                });\r\n            }\r\n        });\r\n\r\n        return deferred;\r\n    }\r\n\r\n    private enableDefaultDisplay(isEnable) {\r\n        var $viewerContainer = $('#viewerContainer');\r\n        var loader =\r\n            '<div class=\"loader\"><h3>Loading is in progress</h3><br/><img src=\"/images/ajax-loader.gif\"/></div>';\r\n        (isEnable && $viewerContainer.html(loader)) || $('.loader').remove();\r\n    }\r\n\r\n    private previewExists(index) {\r\n        if (!index) {\r\n            index = 1;\r\n        }\r\n        var promise = $.Deferred();\r\n\r\n        if (this.viewer && this.viewer.pageCount && this.viewer.pageCount() < index)\r\n            return promise;\r\n        var self = this;\r\n        this.endpoints.previewAvailable(this.selectedDocumentId, index).then(function(msg: any) {\r\n                if (msg && msg.PreviewAvailable !== null) {\r\n                    promise.resolve(msg);\r\n                } else {\r\n                    if (self.$viewer.is(':visible'))\r\n                        setTimeout(function() {\r\n                                self.previewExists(index).done(function(msg: any) {\r\n                                    if (msg.PreviewAvailable) {\r\n                                        promise.resolve(msg);\r\n                                    } else {\r\n                                        promise.reject();\r\n                                    }\r\n                                }).fail(function() {\r\n                                    promise.reject();\r\n                                });\r\n                            },\r\n                            5000);\r\n                }\r\n            },\r\n            function() {\r\n                promise.reject();\r\n            });\r\n\r\n        return promise;\r\n    }\r\n\r\n    private pollUntilPreviewAvailable() {\r\n        this.previewExists(1);\r\n    }\r\n\r\n    private pollUntilGetExistingPreviewImage(pageCount) {\r\n        var deferred = $.Deferred();\r\n        var self = this;\r\n        this.endpoints.getExistingPreviewImages(this.selectedDocumentId).then(function(msg: any) {\r\n            if ((pageCount <= 5 && msg.length !== pageCount) || (pageCount > 5 && msg.length < 5)) {\r\n                setTimeout(function() {\r\n                        self.pollUntilGetExistingPreviewImage(pageCount);\r\n                    },\r\n                    self.options.pollTimeout || 3000);\r\n            } else {\r\n                if (self.isErrorPage) {\r\n                    self.$viewer.html('');\r\n                }\r\n                self.isErrorPage = false;\r\n                self.options.functions = $.extend(self.getAvailableFunctions(self.options.permissionInfo),\r\n                    self.options.functions);\r\n                self.options.isAdmin = self.options.permissionInfo.canSave;\r\n                self.options.toggleWatermark = self.options.permissionInfo.toggleWatermark;\r\n                self.options.noWatermark = true;\r\n                self.options.noRedaction = self.options.permissionInfo.canRedact;\r\n                //options.showShapes = false;\r\n\r\n                self.viewer = self.$viewer.documentViewer(self.options).data('snDocViewer');\r\n\r\n                self.loadedShapes = $.extend(true, {}, self.viewer.getAllShapes());\r\n\r\n                self.appendPreviewPostfix = self.viewer.appendPreviewPostfix;\r\n                self.enableDefaultDisplay(false);\r\n\r\n                deferred.resolve(this.viewer);\r\n            }\r\n        });\r\n\r\n        return deferred;\r\n    }\r\n\r\n    private rejectAndRemoveAllPromises() {\r\n        this.requests.forEach(function(request) {\r\n                request.p.reject();\r\n            },\r\n            this);\r\n        this.requests.length = 0;\r\n    }\r\n\r\n    // TODO end glblinitlaziationhelper\r\n\r\n    private isLoaderVisible = false;\r\n\r\n    private showLoader() {\r\n        if (this.isLoaderVisible === false) {\r\n            $('#preview-overlay').addClass('overlay-transition');\r\n            $('#preview-overlay').css('z-index', 9999);\r\n\r\n            this.isLoaderVisible = true;            \r\n        }\r\n    }\r\n\r\n    private hideLoader() {\r\n        var self = this;\r\n\r\n        $('#preview-overlay').off();\r\n        $('#preview-overlay').one('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', () => {\r\n            $('#preview-overlay').off();\r\n            $('#preview-overlay').css('z-index', -9999);\r\n            self.isLoaderVisible = false;\r\n        });\r\n        $('#preview-overlay').removeClass('overlay-transition');\r\n    }\r\n\r\n    public initializeViewer($viewerParam, optionsParam) {\r\n        var deferred = $.Deferred();\r\n\r\n        this.rejectAndRemoveAllPromises();\r\n\r\n        this.options = optionsParam;\r\n        this.basicOptions = optionsParam;\r\n        this.$viewer = $viewerParam;\r\n        this.$basicViewer = $viewerParam;\r\n\r\n        this.initializeOptions();\r\n        this.initializeFunctions();\r\n\r\n        this.endpoints = new Endpoints(this.options.dataTransmission.apiBaseUrl);\r\n        var self = this;\r\n        this.endpoints.getShapes(this.selectedDocumentId).then(function(shapes: any) {\r\n            self.options.shapes = shapes.RedactionInfo.Shapes;\r\n\r\n            optionsParam.callbacks.loadingStarted = () => {\r\n                self.showLoader();\r\n            };\r\n\r\n            optionsParam.callbacks.loadingEnded = () => {\r\n                self.hideLoader();\r\n            };\r\n\r\n            self.printer = new Printer(self.selectedDocumentId, self.options);\r\n            self.initByGetPageCount().done(function(data) {\r\n                deferred.resolve(data);\r\n            });\r\n\r\n            self.setViewerDisplayMode(self.basicOptions.isFullscreen);\r\n        });\r\n\r\n        return deferred;\r\n    };\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// src/transcend/transcend-viewer.ts","module.exports = \"\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/dropdown/Dropdown.tpl.html\n// module id = 62\n// module chunks = 0","module.exports = \"\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/modal/Modal.tpl.html\n// module id = 63\n// module chunks = 0","module.exports = \"\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/toolbar/Toolbar.tpl.html\n// module id = 64\n// module chunks = 0","var $ = require('jquery');\r\nvar templateCompile = require('../../microtemplating.js');\r\nvar template = require('./Dropdown.tpl.html');\r\nvar ComponentBase = require('../_base.js');\r\nvar Util = require('../_util.js');\r\n\r\nvar _C = {\r\n    name: 'viewerDropdown'\r\n};\r\n\r\nfunction Dropdown(element, options) {\r\n    this.defaults = {\r\n    };\r\n\r\n    ComponentBase.call(this, element, options, _C.name);\r\n}\r\n\r\nUtil.inheritsFrom(Dropdown, ComponentBase);\r\n\r\nDropdown.prototype.init = function () {\r\n    console.log('Dropdown init');\r\n};\r\n\r\nUtil.registerPlugin(_C.name, Dropdown);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/dropdown/Dropdown.js\n// module id = 65\n// module chunks = 0","var $ = require('jquery');\r\nvar templateCompile = require('../../microtemplating.js');\r\nvar template = require('./Modal.tpl.html');\r\nvar ComponentBase = require('../_base.js');\r\nvar Util = require('../_util.js');\r\n\r\nvar _C = {\r\n    name: 'viewerModal'\r\n};\r\n\r\nfunction Modal(element, options) {\r\n    this.defaults = {\r\n    };\r\n\r\n    ComponentBase.call(this, element, options, _C.name);\r\n}\r\n\r\nUtil.inheritsFrom(Modal, ComponentBase);\r\n\r\nModal.prototype.init = function () {\r\n    console.log('Modal init');\r\n};\r\n\r\nUtil.registerPlugin(_C.name, Modal);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/modal/Modal.js\n// module id = 66\n// module chunks = 0","var $ = require('jquery');\r\nvar templateCompile = require('../../microtemplating.js');\r\nvar template = require('./Toolbar.tpl.html');\r\nvar ComponentBase = require('../_base.js');\r\nvar Util = require('../_util.js');\r\n\r\nvar _C = {\r\n    name: 'viewerToolbar'\r\n};\r\n\r\nfunction Toolbar(element, options) {\r\n    this.defaults = {\r\n    };\r\n\r\n    ComponentBase.call(this, element, options, _C.name);\r\n}\r\n\r\nUtil.inheritsFrom(Toolbar, ComponentBase);\r\n\r\nToolbar.prototype.init = function () {\r\n    console.log('Toolbar init');\r\n};\r\n\r\nUtil.registerPlugin(_C.name, Toolbar);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/components/toolbar/Toolbar.js\n// module id = 67\n// module chunks = 0","require('./components/dropdown/Dropdown.js');\r\nrequire('./components/modal/Modal.js');\r\nrequire('./components/toolbar/Toolbar.js');\r\n\r\n(function ($) {\r\n    var lastDocViewerId = 0;\r\n    var resizeFlags = {\r\n        fromTop: 1,\r\n        fromRight: 2,\r\n        fromBottom: 4,\r\n        fromLeft: 8\r\n    };\r\n\r\n    $.fn.extend({\r\n        documentViewer: function (options) {\r\n            // Prevent the plugin from running twice\r\n            if (this.data('snDocViewer'))\r\n                return;\r\n\r\n            // Save an identifier for this document viewer\r\n            var docViewerId = ++lastDocViewerId;\r\n            var $pluginSubject = $(this[0]);\r\n            var $container = $('<div class=\"sn-docpreview-container\"></div>').appendTo($pluginSubject);\r\n\r\n            // Read options and fill in with defaults where necessary\r\n\r\n            // Localization\r\n            var SR = $.extend({\r\n                toolbarNotes: 'Edit annotations',\r\n                toolbarHighlight: 'Edit highlight',\r\n                toolbarRedaction: 'Edit redaction',\r\n                toolbarFirstPage: 'Go to first page',\r\n                toolbarPreviousPage: 'Go to previous page',\r\n                toolbarNextPage: 'Go to next page',\r\n                toolbarLastPage: 'Go to last page',\r\n                toolbarFitWindow: 'Fit document to viewer',\r\n                toolbarFitHeight: 'Fit document to viewer height',\r\n                toolbarFitWidth: 'Fit document to viewer width',\r\n                toolbarZoomOut: 'Zoom out',\r\n                toolbarZoomIn: 'Zoom in',\r\n                toolbarPrint: 'Print the document',\r\n                toolbarRubberBandZoom: 'Rubberband zoom',\r\n                toolbarFullscreen: 'Switch to full screen mode',\r\n                toolbarExitFullscreen: 'Exit full screen mode',\r\n                toolbarShowShapes: 'Show document with shapes',\r\n                toolbarHideShapes: 'Hide shapes',\r\n                toolbarShowWatermark: 'Show document with watermark',\r\n                toolbarHideWatermark: 'Hide watermark',\r\n                toolbarBurn: 'Burn shapes',\r\n                toolbarRotatePageLeft: 'Rotate current page left',\r\n                toolbarRotatePageRight: 'Rotate current page right',\r\n                toolbarRotateDocLeft: 'Rotate document left',\r\n                toolbarRotateDocRight: 'Rotate document right',\r\n                annotationDefaultText: 'Double click to edit text',\r\n                page: 'Page',\r\n                showThumbnails: 'Show thumbnails',\r\n                deleteText: 'Delete',\r\n                saveText: 'Save',\r\n                cancelText: 'Cancel',\r\n                originalSizeText: 'Original size',\r\n                downloadText: 'Download',\r\n                errorWithDrawingOnSelectedPage: 'Please click on the page where you want to draw!',\r\n                otherPageIsSelected: 'Page is selected! Now you can draw on it!',\r\n                otherPageIsSelectedRubberband: 'Page is selected! Now you can use the rubberband zoom on it!'\r\n            }, options.SR);\r\n\r\n            // Callbacks for various events\r\n            var callbacks = $.extend({\r\n                // Called when the document was opened,\r\n                // ie. when this plugin was initialized\r\n                documentOpened: null,\r\n\r\n                // Called when the document is closed,\r\n                // ie. when either the plugin is destroyed or the window is unloaded\r\n                documentClosed: null,\r\n\r\n                // Called after going to a different page of the document (parameter: page number)\r\n                // NOTE: this is called when the user scrolls to a different page, or clicks a thumbnail, or when the viewer otherwise goes to a different page\r\n                pageChanged: null,\r\n\r\n                // Called after a context menu is shown\r\n                contextMenuShown: null,\r\n\r\n                // Called when the zoom level is changed\r\n                zoomLevelChanged: null,\r\n\r\n                //Called when an error occured\r\n                viewerError: null,\r\n\r\n                //Called when an error occured\r\n                viewerWarning: null,\r\n\r\n                //Called when an error occured\r\n                viewerInfo: null,\r\n\r\n                //Called when the document is modified\r\n                documentChanged: null,\r\n\r\n                //Called when rotation is started\r\n                rotationStarted: null,\r\n\r\n                //Called when rotation is ended\r\n                rotationEnded: null,\r\n\r\n                //Called when image loading is started\r\n                loadingStarted: null,\r\n\r\n                //Called when image loading is ended\r\n                loadingEnded: null\r\n\r\n            }, options.callbacks);\r\n\r\n            // Other options\r\n            var metadataHtml = options.metadataHtml || null;\r\n            var showtoolbar = options.showtoolbar || false;\r\n            var edittoolbar = options.edittoolbar || false;\r\n            var showthumbnails = options.showthumbnails || false;\r\n            var metadata = options.metadata || false;\r\n            var isAdmin = options.isAdmin || false;\r\n            var showShapes = options.showShapes || true;\r\n            var title = options.title || \"\";\r\n            var showTitle = options.showTitle !== undefined ? options.showTitle : true;\r\n            var containerWidth = (typeof (options.containerWidth) === \"function\" ? options.containerWidth() : options.containerWidth) || $pluginSubject.width();\r\n            var containerHeight = (typeof (options.containerHeight) === \"function\" ? options.containerHeight() : options.containerHeight) || $pluginSubject.height();\r\n            var reactToResize = options.reactToResize === true ? true : false;\r\n            var redrawInterval = options.redrawInterval || 20;\r\n            var minZoomLevel = options.minZoomLevel || 0.5;\r\n            var maxZoomLevel = options.maxZoomLevel || 2.5;\r\n            var annotationDefaultText = options.annotationDefaultText || SR.annotationDefaultText;\r\n            var pageMargin = options.pageMargin || 50;\r\n            var filePath = options.filePath || null;\r\n            var scale = options.defaultScale || 1;\r\n            var imgWidth = options.imgWidth || 1240;\r\n            var imgHeight = options.imgHeight || 1754;\r\n            var customFunctions = options.functions || null;\r\n            var maxpreview = parseInt(options.previewCount) || 0;\r\n            var pageNum = options.pageNum || 1;\r\n            var previewNumInTheSameTime = options.previewNumInTheSameTime || 3;\r\n            var placeholderImgPath = options.placeholderImgPath || '/Root/Global/images/ajax-loader.gif';\r\n            var fitContainer = options.fitContainer || false;\r\n            var shapes = options.shapes || [];\r\n            var pageAttributes = options.pageAttributes || [];\r\n            var noWatermark = options.noWatermark || false;\r\n            var iHeight = null;\r\n            var addNoChachePostfix = options.addNoChachePostfix || false;\r\n            var origWidth = imgWidth;\r\n            var pageAttributesObj = [];\r\n            var thumbnailWidth, thumbnailHeight;\r\n            var firstLoad = false;\r\n            var documentDegree = 0;\r\n            var $ul, $thumbnailList;\r\n            var ulWidth = containerWidth;\r\n            var numberOfPagesForRotation = 0;\r\n            var multipleRotation = false;\r\n            var $rubbertechnicalcanvas;\r\n\r\n            // Get some values\r\n            var currentpreview = maxpreview > 0 ? pageNum : 0;\r\n            var currentpreviewWidth = 0;\r\n            var editbuttons = {\r\n                annotations: '<span title=\"' + SR.toolbarNotes + '\"><span class=\"sn-icon sn-icon-notes\" data-canvastype=\"annotation\"></span></span>',\r\n                highlights: '<span title=\"' + SR.toolbarHighlight + '\"><span class=\"sn-icon sn-icon-highlight\" data-canvastype=\"highlight\"></span></span>',\r\n                redaction: '<span title=\"' + SR.toolbarRedaction + '\"><span class=\"sn-icon sn-icon-redaction\" data-canvastype=\"redaction\"></span></span>',\r\n                pager: '<div class=\"sn-pager\">\\\r\n                            <span title=\"' + SR.toolbarFirstPage + '\"><span class=\"sn-icon sn-icon-firstpage\"></span></span>\\\r\n                            <span title=\"' + SR.toolbarPreviousPage + '\"><span class=\"sn-icon sn-icon-prev\"></span></span>\\\r\n                            <input class=\"sn-input-jumptopage\" value=\"' + currentpreview + '\" />\\\r\n                            <span class=\"pagenumber\"><span id=\"docpreviewpage\"> / ' + maxpreview + '</span></span>\\\r\n                            <span title=\"' + SR.toolbarNextPage + '\" ><span class=\"sn-icon sn-icon-next\"></span></span>\\\r\n                            <span title=\"' + SR.toolbarLastPage + '\"><span class=\"sn-icon sn-icon-lastpage\"></span></span>\\\r\n                        </div>',\r\n                rotation: '<div class=sn-viewer-rotate>\\\r\n                             <span title=\"' + SR.toolbarRotatePageLeft + '\"><span class=\"sn-icon sn-icon-rotateleft\"></span></span>\\\r\n                            <span title=\"' + SR.toolbarRotatePageRight + '\"><span class=\"sn-icon sn-icon-rotateright\"></span></span>\\\r\n                            <span title=\"' + SR.toolbarRotateDocLeft + '\"><span class=\"sn-icon sn-icon-rotatedocleft\"><span class=\"sn-icon-overlay\"></span></span></span>\\\r\n                            <span title=\"' + SR.toolbarRotateDocRight + '\"><span class=\"sn-icon sn-icon-rotatedocright\"><span class=\"sn-icon-overlay\"></span></span></span>\\\r\n                            </div>',\r\n                fittowindow: '<span title=\"' + SR.toolbarFitWindow + '\"><span class=\"sn-icon sn-icon-fittowindow\"></span></span>',\r\n                fittowidth: '<span title=\"' + SR.toolbarFitWidth + '\"><span class=\"sn-icon sn-icon-fittowidth\"></span></span>',\r\n                fittoheight: '<span title=\"' + SR.toolbarFitHeight + '\"><span class=\"sn-icon sn-icon-fittoheight\"></span></span>',\r\n                fullscreen: '<span title=\"' + SR.toolbarFullscreen + '\"><span class=\"sn-icon sn-icon-fullscreen\"></span></span>',\r\n                rubberbandzoom: '<span title=\"' + SR.toolbarRubberBandZoom + '\"><span class=\"sn-icon sn-icon-rubberband\" id=\"sn-rubberband\"></span></span>',\r\n                zoomout: '<span title=\"' + SR.toolbarZoomOut + '\"><span class=\"sn-icon sn-icon-zoomout\" ></span></span>',\r\n                zoomin: '<span title=\"' + SR.toolbarZoomIn + '\"><span class=\"sn-icon sn-icon-zoomin\" ></span></span>',\r\n                originaldocument: '<span title=\"' + SR.toolbarHideShapes + '\"><span class=\"sn-icon sn-icon-original\"></span></span>',\r\n                editeddocument: '<span title=\"' + SR.toolbarShowShapes + '\"><span class=\"sn-icon sn-icon-edited\"></span></span>',\r\n                originalsize: '<span title=\"' + SR.originalSizeText + '\"><span class=\"sn-icon sn-icon-originalsize\"></span></span>'\r\n            };\r\n\r\n            // Variables for the plugin\r\n            var allshapes = {\r\n                redaction: [],\r\n                highlight: [],\r\n                annotation: []\r\n            };\r\n            var saveableshapes = {\r\n                redaction: [],\r\n                highlight: [],\r\n                annotation: []\r\n            };\r\n            var mouseover = false; var touched = false;\r\n            var msie8 = false;\r\n            var agentStr = navigator.userAgent;\r\n            if (agentStr.indexOf(\"Trident/4.0\") > -1) { msie8 = true; }\r\n            var touch = false;\r\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10/i.test(navigator.userAgent))\r\n                touch = true;\r\n            if (touch)\r\n                $('body').addClass('touch');\r\n\r\n            var mySel = null;\r\n            var mySelColor = '#007dc6';\r\n            var mySelWidth = 2;\r\n            var mySelBoxColor = '007dc6';\r\n            var mySelBoxSize = 6;\r\n            var isDrag = false;\r\n            var isResizeDrag = false;\r\n            var selectionHandles = [];\r\n            var canvasValid = false;\r\n            var shapeIndex = null;\r\n            var contexts = {};\r\n            var expectResize = 0;\r\n            var rmx, rmy, rmstart;\r\n            var canvasType;\r\n            var editmode = false;\r\n            var shapesAreShowing = showShapes;\r\n            var $imagecontainer, $metadatacontainer, $docpreview, $toolbarContainer;\r\n            var started = false;\r\n            var x0, y0;\r\n            var unsaved = false;\r\n            var pages = []; var hpages = []; var thumbnails = []; var hthumbnails = []; var existingPages = [];\r\n            var thumbnailUrls;\r\n\r\n            var lastPosition = 0;\r\n            var timer;\r\n            var firstInit = true;\r\n            var jumpDistance = 1;\r\n\r\n            // Initializes the plugin - constructs the basic elements\r\n            function initializeDocViewerPlugin() {\r\n\r\n                parseShapesJson(shapes);\r\n\r\n                parsePageAttributesJson(pageAttributes);\r\n\r\n\r\n                if (pageAttributesObj.allValuesSame() && typeof pageAttributesObj[0] !== 'undefined' && pageAttributesObj.length === maxpreview) {\r\n                    documentDegree = pageAttributesObj[0].options.degree;\r\n                }\r\n\r\n                $container.html(\"\");\r\n                if (maxpreview !== 0)\r\n                    $imagecontainer = $('<div class=\"image-container\"></div>');\r\n                else {\r\n                    $imagecontainer = $('<div class=\"image-container\"><div class=\"no-preview\">' + options.SR.noPreview + '</div></div>');\r\n                    $('.sn-docpreview-container').addClass('empty');\r\n                }\r\n\r\n                $metadatacontainer = $();\r\n                $docpreview = $('<div class=\"sn-docpreview-desktop docpreview\" id=\"docpreview\"><div class=\"zoomer\" id=\"zoomr\"><ul></ul></div></div>');\r\n                $toolbarContainer = $();\r\n                $imagecontainer.appendTo($container);\r\n\r\n                if (!metadata && !showthumbnails) {\r\n                    $imagecontainer.width('100%');\r\n                }\r\n                if (showtoolbar) {\r\n                    $toolbarContainer = $('<div class=\"sn-docviewer-tools\"></div>');\r\n                    $toolbarContainer.appendTo($imagecontainer);\r\n                    createToolbar();\r\n                }\r\n                if (metadata || showthumbnails) {\r\n                    $metadatacontainer = $('<div class=\"metadatas\"></div>');\r\n                    $metadatacontainer.appendTo($container);\r\n                }\r\n                if (showthumbnails) {\r\n                    if (maxpreview !== '0')\r\n                        $metadatacontainer.append('<div class=\"sn-doc-thumbnails\"></div></div>');\r\n                    else\r\n                        $metadatacontainer.append('<div class=\"sn-doc-thumbnails\"><div class=\"no-thumbnail\">No thumbnail!</div></div>');\r\n                }\r\n                if (metadata) {\r\n                    $metadatacontainer.append(metadataHtml);\r\n                }\r\n\r\n                $container.append('<div style=\"clear:both;height:1px;\">&nbsp;</div>');\r\n                var wi = containerWidth;\r\n                if (window.innerWidth < 800)\r\n                    wi = $docpreview.parent().width;\r\n                else if (!showthumbnails && !metadata)\r\n                    wi = $container.width();\r\n                $docpreview.width(wi).height(containerHeight).on('contextmenu.snDocViewer', function () { return false; }).appendTo($imagecontainer);\r\n                var $imageList = $('ul', $docpreview);\r\n\r\n                if (typeof (options.getExistingPreviewImages) === \"function\") {\r\n                    options.getExistingPreviewImages().then(function (data) {\r\n                        thumbnailUrls = data.map(function (m) { return m.ThumbnailAvailable });\r\n                        existingPages = data;\r\n                        if (showthumbnails) {\r\n                            $('.sn-doc-thumbnails').append('<ul></ul>');\r\n                            $thumbnailList = $('ul', $('.sn-doc-thumbnails'));\r\n\r\n\r\n                            createThumbnailContainersOnInterval(data, $thumbnailList);\r\n                        }\r\n\r\n\r\n                        //if (pageNum <= maxpreview && pageNum > 0) {\r\n\r\n                        createImageContainersOnInterval(data, $imageList);\r\n                        getDeletableAndLoadableCanvases(1, data);\r\n                        if ((ulWidth - 240) < data[0].Width)\r\n                            ulWidth = data[0].Width + 240;\r\n\r\n                        $docpreview.find('ul').width(ulWidth);\r\n                        firstLoad = 0;\r\n                        //getDeletableAndLoadableImages(pageNum);\r\n                        //    if (showthumbnails)\r\n                        //        createThumbnailContainersOnInterval(data, $thumbnailList);\r\n                        //}\r\n\r\n                        $(window).on(\"unload.snDocViewer_\" + docViewerId, function (e) {\r\n                            // Call document closed callback\r\n                            callbacks.documentClosed && callbacks.documentClosed();\r\n                        });\r\n\r\n                        $docpreview.hover(function () {\r\n                            mouseover = true;\r\n                        }, function () {\r\n                            mouseover = false;\r\n                        });\r\n\r\n                        $docpreview.on('touchstart', function (e) {\r\n                            touched = true;\r\n                        });\r\n\r\n                        if (reactToResize) {\r\n                            var onResized = function () {\r\n                                var isFullscreen = dataObj.isFullscreen();\r\n\r\n                                //window resize delay\r\n                                setTimeout(function () {\r\n                                    if (isFullscreen) {\r\n                                        // In fullscreen mode\r\n                                        containerHeight = $(window).height() - $docpreview.offset().top;\r\n                                        containerWidth = $(window).width();\r\n                                    }\r\n                                    else {\r\n                                        // In normal (non-fullscreen) mode\r\n                                        containerHeight = (typeof (options.containerHeight) === \"function\" ? options.containerHeight() : options.containerHeight) || $pluginSubject.height();\r\n                                        containerWidth = (typeof (options.containerWidth) === \"function\" ? options.containerWidth() : options.containerWidth) || $pluginSubject.width();\r\n                                    }\r\n                                    $docpreview.width(containerWidth).height(containerHeight);\r\n                                    $('.sn-doc-thumbnails').height(containerHeight);\r\n                                }, 300);\r\n                            };\r\n                            $(window).on(\"resize.snDocViewer_\" + docViewerId, onResized);\r\n                            // Resize on tablets\r\n                            $(window).on(\"orientationchange.snDocViewer_\" + docViewerId, onResized);\r\n\r\n                            onResized(); // do an explicit resize call to handle the case when resizing took place before we registered the events\r\n                        }\r\n                        // Call document opened callback\r\n\r\n                        callbacks.documentOpened && callbacks.documentOpened();\r\n\r\n                        if (scale !== 1 && scale <= maxZoomLevel && scale >= minZoomLevel && !touch) {\r\n                            setZoomLevel(scale);\r\n                        }\r\n\r\n                        if (touch) {\r\n\r\n                            var rate = containerWidth / imgWidth;\r\n                            if (!fitContainer)\r\n                                rate = scale;\r\n\r\n                            scale = rate;\r\n\r\n                            $('.docpreview').ready(function () {\r\n\r\n                                var rate = $('body').width() / imgWidth;\r\n\r\n                                var myScroll = new IScroll('#docpreview', {\r\n                                    zoom: true,\r\n                                    scrollX: true,\r\n                                    scrollY: true,\r\n                                    mouseWheel: true,\r\n                                    zoomMin: minZoomLevel,\r\n                                    zoomMax: maxZoomLevel,\r\n                                    startZoom: rate\r\n                                });\r\n\r\n                                enterFullscreenMode(currentpreview);\r\n\r\n                                myScroll.on('scrollEnd', updatePosition);\r\n\r\n                                $('.sn-icon-originalsize').on('click', function () {\r\n                                    myScroll.zoom(1);\r\n                                });\r\n\r\n                                $('.sn-icon-fittowindow').on('click', function () {\r\n                                    var containerWidth, fitToWidthScale;\r\n                                    containerWidth = myScroll.wrapperWidth;\r\n                                    fitToWidthScale = (containerWidth / imgWidth).toFixed(2);\r\n                                    myScroll.zoom(fitToWidthScale);\r\n                                });\r\n\r\n\r\n                            });\r\n\r\n                        }\r\n\r\n                        $docpreview.scrollTop(0);\r\n\r\n                        unsaved = false;\r\n\r\n                        $docpreview.scroll($.debounce(500, function () {\r\n                            if ($('.sn-docpreview-desktop:hover').length !== 0) {\r\n                                setPageAccordingToScroll(true);\r\n                            }\r\n                        }));\r\n\r\n                        $('.sn-doc-thumbnails').scroll($.debounce(250, function () {\r\n                            scrollThumbnails();\r\n                        }));\r\n\r\n                        $('.sn-docviewer-page').on('click.snDocViewer', myClick);\r\n\r\n\r\n                        $thumbnailList.on('click.snDocViewer', '.sn-thumbnail-page', function () {\r\n                            if ($(this).children('img').attr('data-loaded') === \"true\") {\r\n                                var thumbnailNum = parseInt($(this).attr('data-page'));\r\n                                removeAllContextMenu();\r\n\r\n                                if (newPage(thumbnailNum)) {\r\n                                    demandNewPage(thumbnailNum);\r\n                                    setDataTops(thumbnailNum);\r\n                                }\r\n\r\n                                getDeletableAndLoadableCanvases(thumbnailNum);\r\n                                SetPreviewControls(thumbnailNum);\r\n                            }\r\n                        });\r\n                        fitToWidth(data[0].Width);\r\n                    });\r\n                }\r\n                SetPreviewControls(1);\r\n            }\r\n\r\n            function wholeDocumentRotated() {\r\n                var wholeDocRotationDegrees = 0;\r\n                var degrees = [0, 90, -90, 180];\r\n                for (var i = 0; i < degrees.length; i++) {\r\n                    if ($('.sn-docviewer-page').length === $('.sn-docviewer-page.rotated').length && $('.sn-docviewer-page[data-degree=\"' + degrees[i] + '\"]').length === $('.sn-docviewer-page').length) {\r\n                        wholeDocRotationDegrees = degrees[i];\r\n                    }\r\n                }\r\n\r\n                return wholeDocRotationDegrees;\r\n            }\r\n\r\n            function createImageContainersOnInterval(data, $imageList) {\r\n                var orientation = 'portrait';\r\n\r\n                displayImage(data[0], $imageList, orientation);\r\n                callbacks.loadingStarted && callbacks.loadingStarted();\r\n\r\n                $('#imageContainer1 img').imageLoad(function () {\r\n                    if (!multipleRotation) {\r\n                        callbacks.loadingEnded && callbacks.loadingEnded();\r\n                        if ($('.sn-docviewer-page[data-page=\"2\"]').length === 0) {\r\n                            $.each(data, function (i, item) {\r\n                                if (i > 0 && i < 10) {\r\n                                    displayImage(item, $imageList, orientation);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }\r\n\r\n            function displayImage(item, $imageList, orientation) {\r\n\r\n                if (item.Width > item.Height)\r\n                    orientation = 'landscape';\r\n\r\n                var path = item.PreviewAvailable;\r\n\r\n                path = appendPreviewPostfix(path, !noWatermark, addNoChachePostfix);\r\n\r\n                var $li = $('<li class=\"sn-docviewer-page ' + orientation + '\" id=\"imageContainer' + item.Index + '\" data-page=\"' + item.Index + '\" data-width=\"' + item.Width + '\" data-height=\"' + item.Height + '\"><img src=\"' + path + '\" data-loaded=\"true\" /></li>');\r\n                // $li.insertIndex(ind, $imageList);\r\n\r\n                $imageList.append($li);\r\n\r\n                $li.css({\r\n                    'width': item.Width + 240,\r\n                    'height': item.Height\r\n                });\r\n\r\n                var ind = pageIsRotated(item.Index);\r\n                if (ind > -1) {\r\n                    var newDegree = parseInt(pageAttributesObj[ind].options.degree);\r\n                    multipleRotation = false;\r\n                    rotate(newDegree, item.Index, false, true);\r\n                    rotateThumbnail(newDegree, item.Index);\r\n                    //saveRotation(item.Index, newDegree);\r\n                }\r\n\r\n                //resizeListItemContainers();\r\n                //fitToWidth();\r\n\r\n                $('#imageContainer' + item.Index + ' img').imageLoad(function () {\r\n                    setPageMargins(item.Index);\r\n                    setDataTops(item.Index);\r\n                });\r\n            }\r\n\r\n            function setPageMargins(p) {\r\n                var $that = $('#imageContainer' + p);\r\n                var leftMargin = Math.abs(ulWidth - $that.width()) / 2;\r\n                $that.css({ 'margin': '0px auto 50px' });\r\n            }\r\n\r\n            function createThumbnailContainersOnInterval(data) {\r\n                $.each(data, function (i, item) {\r\n                    if (i < 10)\r\n                        displayThumbnail(item.Index, item.PreviewAvailable, item.Width, item.Height, item.ThumbnailAvailable);\r\n                });\r\n            }\r\n\r\n            function updatePosition() {\r\n                var scale = myScroll.scale;\r\n                var itemHeight = $('.sn-docviewer-page').height() * scale;\r\n                var outer = myScroll.y;\r\n                var pNum;\r\n                if (outer !== 0 && itemHeight !== 0)\r\n                    pNum = -1 * (parseInt(Math.round(outer / itemHeight)));\r\n                else\r\n                    pNum = 0;\r\n\r\n                if (pNum > -1 && pNum < maxpreview) {\r\n                    pNum = pNum + 1;\r\n                }\r\n                if (pNum > maxpreview)\r\n                    pNum = maxpreview;\r\n\r\n                getDeletableAndLoadableCanvases(pNum);\r\n\r\n                if (pNum) {\r\n                    $('#docpreviewpage').text(pNum);\r\n                    currentpreview = Number(pNum);\r\n                    currentpreviewWidth = $('#imageContainer' + pNum).attr('data-width');\r\n                }\r\n                else { $('#docpreviewpage').text(0); }\r\n\r\n                $thumbnailList.children('li').removeClass('active');\r\n                $thumbnailList.children('li[data-page=\"' + currentpreview + '\"]').addClass('active');\r\n            }\r\n\r\n            function scrollThumbnails() {\r\n\r\n                var containerWidth = $('.sn-doc-thumbnails').width();\r\n                var containerHeight = $('.sn-doc-thumbnails').height();\r\n                var orientation, scrollPosition, thumbnailNum;\r\n                if (containerWidth > containerHeight) {\r\n                    var itemWidth = 115; // 90 + 20 img width + its margin\r\n                    scrollPosition = $('.sn-doc-thumbnails ul').position().left - 17;\r\n                    thumbnailNum = parseInt(Math.abs(scrollPosition / itemWidth)) + 1;\r\n                    orientation = 'h';\r\n                }\r\n                else {\r\n                    var itemHeight = 160;\r\n                    scrollPosition = $('.sn-doc-thumbnails ul').position().top;\r\n                    thumbnailNum = parseInt(Math.abs(scrollPosition / itemHeight)) + 1;\r\n                    orientation = 'v';\r\n                }\r\n\r\n                var lastThumbnail = parseInt($('.sn-thumbnail-page').last().attr('data-page'));\r\n\r\n                if ((lastThumbnail + 1) <= maxpreview && newPage(lastThumbnail + 1)) {\r\n                    if ((lastThumbnail + 1) === maxpreview) {\r\n                        demandNewPage((lastThumbnail + 1), false);\r\n                        setDataTops(lastThumbnail + 1);\r\n                    }\r\n                    else {\r\n                        demandNewPage((lastThumbnail + 1), false);\r\n                        setDataTops(lastThumbnail + 1);\r\n                    }\r\n                }\r\n\r\n                lastPosition = scrollPosition;\r\n\r\n\r\n            }\r\n\r\n            function createToolbar() {\r\n                if (showTitle) {\r\n                    if (title.length >= 30) {\r\n                        title = title.slice(0, 27).trim() + \"...\";\r\n                    }\r\n                    $toolbarContainer.append('<div class=\"sn-doc-title\" title=\"' + title + '\"><span class=\"sn-doc-title-text\">' + title + '</span></div><div class=\"sn-paging-tools\"><div class=\"sn-pager\">' + editbuttons.pager + '</div></div>');\r\n                } else {\r\n                    $toolbarContainer.append('<div class=\"sn-paging-tools\"><div class=\"sn-pager\">' + editbuttons.pager + '</div></div>');\r\n                }\r\n\r\n                if (showtoolbar && edittoolbar && isAdmin && !touch) {\r\n                    $toolbarContainer.append('<div class=\"sn-additional-tools\">' + editbuttons.annotations + editbuttons.highlights + editbuttons.redaction + '</div>');\r\n                }\r\n                \r\n                if (showShapes) {\r\n                    $toolbarContainer.append('<div class=\"sn-zooming-tools\">' + editbuttons.rotation + editbuttons.originalsize + editbuttons.fittowindow + editbuttons.fittoheight + editbuttons.fittowidth + editbuttons.zoomout + editbuttons.zoomin + editbuttons.rubberbandzoom + editbuttons.fullscreen + editbuttons.originaldocument + '</div>');\r\n                }\r\n                else {\r\n                    $toolbarContainer.append('<div class=\"sn-zooming-tools\">' + editbuttons.rotation + editbuttons.originalsize + editbuttons.fittowindow + editbuttons.fittoheight + editbuttons.fittowidth + editbuttons.zoomout + editbuttons.zoomin + editbuttons.rubberbandzoom + editbuttons.fullscreen + editbuttons.editeddocument + '</div>');\r\n                }\r\n\r\n                function adminbutton(name, disabled) {\r\n                    this.name = name;\r\n                    this.disable = disabled;\r\n                }\r\n\r\n                var admintoolbar = [];\r\n                var $admintoolbar = $('.sn-additional-tools');\r\n                $admintoolbar.find('span.sn-icon').each(function (i) {\r\n                    var that = $(this);\r\n                    var name = that.attr('data-canvastype');\r\n                    var disabled = false;\r\n                    var attr = that.attr('disabled');\r\n                    if (typeof attr !== typeof undefined && attr !== false)\r\n                        disabled = true;\r\n                    admintoolbar[i] = new adminbutton(name, disabled);\r\n                });\r\n\r\n                if (customFunctions) {\r\n                    $.each(customFunctions, function (i, item) {\r\n                        if (touch && item.touch === true || !touch) {\r\n                            var $button = $('<span id=\"' + 'button' + i + '\" title=\"' + item.title + '\">' + item.icon + '</span>');\r\n                            if (item.type === 'dataRelated') {\r\n                                if (typeof item.permission !== 'undefined' && item.permission)\r\n                                    $('.sn-zooming-tools').append($button);\r\n                                if (typeof item.permission === 'undefined')\r\n                                    $('.sn-zooming-tools').append($button);\r\n                            }\r\n                            if (item.type === 'drawingRelated') {\r\n                                if (typeof item.permission !== 'undefined' && item.permission)\r\n                                    $('.sn-additional-tools').append($button);\r\n                                if (typeof item.permission === 'undefined')\r\n                                    $('.sn-additional-tools').append($button);\r\n                            }\r\n                            if (item.bindTo !== undefined) {\r\n                                $button.on('click', function () { item.action.call(item.bindTo) });\r\n                            } else {\r\n                                $button.on('click', item.action);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-notes', function () {\r\n                    var attr = $(this).attr('disabled');\r\n                    if (!(typeof attr !== typeof undefined && attr !== false)) {\r\n                        clearMenuSelection($(this));\r\n                        initializeCanvasFeature(\"annotation\");\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-highlight', function () {\r\n                    var attr = $(this).attr('disabled');\r\n                    if (!(typeof attr !== typeof undefined && attr !== false)) {\r\n                        clearMenuSelection($(this));\r\n                        initializeCanvasFeature(\"highlight\");\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-redaction', function () {\r\n                    var attr = $(this).attr('disabled');\r\n                    if (!(typeof attr !== typeof undefined && attr !== false)) {\r\n                        clearMenuSelection($(this));\r\n                        initializeCanvasFeature(\"redaction\");\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-firstpage', function () {\r\n                    removeAllContextMenu();\r\n                    getDeletableAndLoadableCanvases(1);\r\n                    SetPreviewControls(1);\r\n                    scrollToThumbnail(1);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-prev', function () {\r\n                    removeAllContextMenu();\r\n                    if (currentpreview !== 1) {\r\n                        getDeletableAndLoadableCanvases(currentpreview - 1);\r\n                        SetPreviewControls(currentpreview - 1);\r\n                        scrollToThumbnail(currentpreview);\r\n                        if (newPage(currentpreview)) {\r\n                            demandNewPage(currentpreview);\r\n                            setDataTops(currentpreview);\r\n                        }\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-next', function () {\r\n                    removeAllContextMenu();\r\n                    if (currentpreview !== maxpreview && $('.sn-docviewer-page[data-page=\"' + (currentpreview + 1) + '\"] img').attr('data-loaded') === \"true\") {\r\n                        getDeletableAndLoadableCanvases(currentpreview + 1);\r\n                        SetPreviewControls(currentpreview + 1);\r\n                        scrollToThumbnail(currentpreview);\r\n                        if (newPage(currentpreview + 2) && (currentpreview + 2) <= maxpreview) {\r\n                            demandNewPage(currentpreview + 2);\r\n                            setDataTops(currentpreview + 2);\r\n                        }\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-lastpage', function () {\r\n                    removeAllContextMenu();\r\n                    if (newPage(maxpreview)) {\r\n                        for (var i = (currentpreview + 1); i < (maxpreview + 1); i++) {\r\n                            if (newPage(i)) {\r\n                                if (i === maxpreview) {\r\n                                    demandNewPage(i, true);\r\n                                    setDataTops(i);\r\n                                }\r\n                                else {\r\n                                    demandNewPage(i, false);\r\n                                    setDataTops(i);\r\n                                }\r\n                            }\r\n                        }\r\n                        $('.sn-doc-thumbnails li').removeClass('active');\r\n                        $('.sn-doc-thumbnails li[data-page=\"' + maxpreview + '\"]', $container).addClass('active');\r\n                        $docpreview.scrollTop(1000000);\r\n                        scrollToThumbnail(maxpreview);\r\n                    }\r\n                    else {\r\n                        getDeletableAndLoadableCanvases(maxpreview);\r\n                        SetPreviewControls(maxpreview, false);\r\n                        scrollToThumbnail(maxpreview);\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-originalsize', function () {\r\n                    clearMenuSelection();\r\n                    if (!touch) {\r\n                        setZoomLevel(1);\r\n                        fitPreviewsToLeftEdge(false, false, currentpreviewWidth);\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-fittowidth', function () {\r\n                    removeAllContextMenu();\r\n                    if (!touch)\r\n                        fitToWidth(currentpreviewWidth);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-fittoheight', function () {\r\n                    removeAllContextMenu();\r\n                    fitToHeight();\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-fittowindow', function () {\r\n                    removeAllContextMenu();\r\n                    if (!touch)\r\n                        fitToWindow();\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-rubberband', function () {\r\n                    var $this = $(this);\r\n\r\n                    if ($this.hasClass('active')) {\r\n                        clearMenuSelection();\r\n                        setZoomLevel(1);\r\n                        return;\r\n                    }\r\n\r\n                    clearMenuSelection($this);\r\n                    editmode = false;\r\n                    isDrag = false;\r\n\r\n                    setTechnicalCanvasForRubberbandZoom(currentpreview);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-zoomout', function () {\r\n                    removeAllContextMenu();\r\n                    $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                    if (scale >= minZoomLevel) {\r\n                        setZoomLevel(scale - 0.1);\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-zoomin', function () {\r\n                    removeAllContextMenu();\r\n                    $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                    if ((scale + 0.1) <= maxZoomLevel) {\r\n                        setZoomLevel(scale + 0.1);\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-fullscreen', function () {\r\n                    removeAllContextMenu();\r\n                    var $this = $(this);\r\n                    if ($this.hasClass('normalscreen')) {\r\n                        exitFullscreenMode(currentpreview);\r\n                    }\r\n                    else {\r\n                        enterFullscreenMode(currentpreview);\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-original', function () {\r\n                    var $this = $(this);\r\n                    clearMenuSelection($this);\r\n                    removeAllContextMenu();\r\n                    $('.sn-additional-tools', $toolbarContainer).hide();\r\n                    $this.removeClass('sn-icon-original').addClass('sn-icon-edited').attr('title', SR.toolbarShowShapes);\r\n                    $('canvas', $container).hide();\r\n                    editmode = false;\r\n                    shapesAreShowing = false;\r\n\r\n                    clearInterval(mainDraw);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-edited', function () {\r\n                    clearMenuSelection();\r\n                    removeAllContextMenu();\r\n                    var $this = $(this);\r\n                    if (!msie8) {\r\n                        $('.sn-additional-tools', $toolbarContainer).show();\r\n                    }\r\n                    $this.removeClass('sn-icon-edited').addClass('sn-icon-original').attr('title', SR.toolbarHideShapes);\r\n\r\n                    $container.find(\"canvas\").show();\r\n                    if (!isAdmin) {\r\n                        $container.find(\"canvas.redaction-canvas\").hide();\r\n                    }\r\n\r\n                    shapesAreShowing = true;\r\n                    clearInterval(mainDraw);\r\n                    setInterval(mainDraw, redrawInterval);\r\n                });\r\n\r\n                $toolbarContainer.on('keyup.snDocViewer', '.sn-input-jumptopage', function (e) {\r\n                    if (e.keyCode === 13) {\r\n                        var pageNum = parseInt($(this).val());\r\n                        if (pageNum < (maxpreview + 1) && pageNum > 0) {\r\n                            removeAllContextMenu();\r\n                            if (newPage(pageNum)) {\r\n                                for (var i = (currentpreview + 1); i < (pageNum + 1); i++) {\r\n                                    if (newPage(i)) {\r\n                                        if (i === pageNum) {\r\n                                            demandNewPage(i, true);\r\n                                            setDataTops(i);\r\n                                        }\r\n                                        else {\r\n                                            demandNewPage(i, false);\r\n                                            setDataTops(i);\r\n                                        }\r\n                                    }\r\n                                }\r\n                                $('.sn-doc-thumbnails li').removeClass('active');\r\n                                $('.sn-doc-thumbnails li[data-page=\"' + pageNum + '\"]', $container).addClass('active');\r\n                                scrollToThumbnail(pageNum);\r\n                                $('.sn-doc-thumbnails li[data-page=\"' + pageNum + '\"] img', $container).imageLoad(function () {\r\n                                    getDeletableAndLoadableCanvases(pageNum);\r\n                                });\r\n                            }\r\n                            else {\r\n                                scrollToThumbnail(pageNum);\r\n                                getDeletableAndLoadableCanvases(pageNum);\r\n                                SetPreviewControls(pageNum, false);\r\n                            }\r\n                        }\r\n                        else if (pageNum > maxpreview) {\r\n                            removeAllContextMenu();\r\n                            if (newPage(maxpreview)) {\r\n                                for (var i = (currentpreview + 1); i < (maxpreview + 1); i++) {\r\n                                    if (newPage(i)) {\r\n                                        demandNewPage(i, true);\r\n                                        setDataTops(i);\r\n                                    }\r\n                                }\r\n                                $('.sn-doc-thumbnails li').removeClass('active');\r\n                                $('.sn-doc-thumbnails li[data-page=\"' + maxpreview + '\"]', $container).addClass('active');\r\n                                scrollToThumbnail(maxpreview);\r\n                            }\r\n                            else {\r\n                                getDeletableAndLoadableCanvases(maxpreview);\r\n                                SetPreviewControls(maxpreview, false);\r\n                                scrollToThumbnail(maxpreview);\r\n                            }\r\n                        }\r\n                        else if (pageNum < 1) {\r\n                            removeAllContextMenu();\r\n                            jumpDistance = Math.abs(1 - currentpreview);\r\n                            getDeletableAndLoadableCanvases(1);\r\n                            SetPreviewControls(1);\r\n                        }\r\n                        e.preventDefault();\r\n                    }\r\n                });\r\n                $toolbarContainer.on('keypress.snDocViewer', '.sn-input-jumptopage', function (e) {\r\n                    var theEvent = e || window.event;\r\n                    var key = theEvent.keyCode || theEvent.which;\r\n                    key = String.fromCharCode(key);\r\n                    var regex = /[0-9]|\\./;\r\n                    if (!regex.test(key)) {\r\n                        theEvent.returnValue = false;\r\n                        if (theEvent.preventDefault) theEvent.preventDefault();\r\n                    }\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-rotateleft', function () {\r\n                    var $button = $(this);\r\n                    callbacks.rotationStarted && callbacks.rotationStarted($button);\r\n                    var currentDegree = 0;\r\n                    if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree') !== 'undefined')\r\n                        currentDegree = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree'));\r\n                    var newDegree = computeDegree(currentDegree, -90);\r\n                    multipleRotation = false;\r\n                    rotate(newDegree, currentpreview, false);\r\n                    rotateThumbnail(newDegree, currentpreview);\r\n                    saveRotation(currentpreview, newDegree);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-rotateright', function () {\r\n                    var $button = $(this);\r\n                    callbacks.rotationStarted && callbacks.rotationStarted($button);\r\n                    var currentDegree = 0;\r\n                    if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree') !== 'undefined')\r\n                        currentDegree = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree'));\r\n                    var newDegree = computeDegree(currentDegree, 90);\r\n                    multipleRotation = false;\r\n                    rotate(newDegree, currentpreview, false);\r\n                    rotateThumbnail(newDegree, currentpreview, false);\r\n                    saveRotation(currentpreview, newDegree);\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-rotatedocleft', function () {\r\n                    var $button = $(this);\r\n                    callbacks.rotationStarted && callbacks.rotationStarted($button);\r\n                    documentDegree = computeDegree(documentDegree, -90);\r\n                    $('.sn-docviewer-page').each(function () {\r\n                        numberOfPagesForRotation += 1;\r\n                        var currentPageNum = parseInt($(this).attr('data-page'));\r\n                        var currentDegree = documentDegree;\r\n                        if (typeof $('.sn-docviewer-page[data-page=\"' + currentPageNum + '\"]').attr('data-degree') !== 'undefined')\r\n                            currentDegree = computeDegree(parseInt($('.sn-docviewer-page[data-page=\"' + currentPageNum + '\"]').attr('data-degree')), -90);\r\n                        multipleRotation = true;\r\n                        rotate(currentDegree, currentPageNum, true);\r\n                        rotateThumbnail(currentDegree, currentPageNum);\r\n                    });\r\n                    for (var i = 1; i < maxpreview + 1; i++) {\r\n                        saveRotation(i, documentDegree);\r\n                    }\r\n                    //fitToWidth();\r\n                });\r\n                $toolbarContainer.on('click.snDocViewer', '.sn-icon-rotatedocright', function () {\r\n                    var $button = $(this);\r\n                    callbacks.rotationStarted && callbacks.rotationStarted($button);\r\n                    documentDegree = computeDegree(documentDegree, 90);\r\n                    $('.sn-docviewer-page').each(function () {\r\n                        numberOfPagesForRotation += 1;\r\n                        var currentPageNum = parseInt($(this).attr('data-page'));\r\n                        var currentDegree = documentDegree;\r\n                        if (typeof $('.sn-docviewer-page[data-page=\"' + currentPageNum + '\"]').attr('data-degree') !== 'undefined')\r\n                            currentDegree = computeDegree(parseInt($('.sn-docviewer-page[data-page=\"' + currentPageNum + '\"]').attr('data-degree')), 90);\r\n                        multipleRotation = true;\r\n                        rotate(currentDegree, currentPageNum, true);\r\n                        rotateThumbnail(currentDegree, currentPageNum);\r\n                    });\r\n                    for (var i = 1; i < maxpreview + 1; i++) {\r\n                        saveRotation(i, documentDegree);\r\n                    }\r\n                    //fitToWidth();\r\n                });\r\n            }\r\n\r\n            function setTechnicalCanvasForRubberbandZoom(page) {\r\n                var $rubbertechnicalcanvas = $('.sn-docviewer-page[data-page=\"' + page + '\"]').find('canvas.technical-canvas');\r\n                $rubbertechnicalcanvas.off('mousedown.snDocViewer').off('mousemove.snDocViewer').off('mouseup.snDocViewer');\r\n                $rubbertechnicalcanvas.on('mousedown.snDocViewer', drawRectangle).on('mousemove.snDocViewer', drawRectangleMove).on('mouseup.snDocViewer', function (e) {\r\n                    if (parseInt($(this).closest('.sn-docviewer-page').attr('data-page')) === page) {\r\n                        rubberBandZoom.call(this, e);\r\n                        $rubbertechnicalcanvas.off('mousedown.snDocViewer');\r\n                        $rubbertechnicalcanvas.off('mousemove.snDocViewer');\r\n                        $rubbertechnicalcanvas.css({ 'cursor': 'default' });\r\n                    }\r\n                    else {\r\n                        callbacks.viewerInfo && callbacks.viewerInfo(SR.otherPageIsSelectedRubberBand);\r\n                        var $currentPage = $('.sn-docviewer-page[data-page=\"' + page + '\"]');\r\n                        var technicalctx = $currentPage.find('.technical-canvas')[0].getContext('2d');\r\n                        clear(technicalctx);\r\n                        $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                        started = false;\r\n                        $rubbertechnicalcanvas.off('mousedown.snDocViewer');\r\n                        $rubbertechnicalcanvas.off('mousemove.snDocViewer');\r\n                        $rubbertechnicalcanvas.css({ 'cursor': 'default' });\r\n                    }\r\n                });\r\n            }\r\n\r\n            function newPage(ind) {\r\n                return $('li.sn-docviewer-page[data-page=\"' + ind + '\"]').length === 0;\r\n            }\r\n\r\n            function demandNewPage(ind, jump) {\r\n                if (ind <= maxpreview) {\r\n                    var $li = $('<li class=\"sn-docviewer-page\" id=\"imageContainer' + ind + '\" data-page=\"' + ind + '\" data-top=\"0\"><img src=\"' + placeholderImgPath + '\" data-loaded=\"false\" data-top=\"0\" /></li>').appendTo($ul);\r\n                    var $thumbnail = $('<li class=\"sn-thumbnail-page\" data-page=\"' + ind + '\"><img src=\"' + placeholderImgPath + '\" data-loaded=\"false\" /><span>Page ' + ind + '</span></li>').appendTo($thumbnailList);\r\n                    displayNewPage(ind, $li, $thumbnail, jump);\r\n\r\n                }\r\n            }\r\n\r\n            function displayNewPage(ind, $li, $thumbnail, jump) {\r\n\r\n                if (typeof (options.getImage) === \"function\") {\r\n                    var $img = $li.children('img');\r\n                    options.getImage(ind).done(function (data) {\r\n                        if (typeof data !== 'undefined') {\r\n                            var page = data;\r\n                            page.Index = ind;\r\n                            existingPages.push(page);\r\n\r\n                            var path = appendPreviewPostfix(page.PreviewAvailable, dataObj.isWatermarked(), addNoChachePostfix);\r\n                            $img.attr('src', path);\r\n                            $img.attr('data-loaded', true);\r\n\r\n                            var thumbnailPath = data.ThumbnailAvailable;//data.PreviewAvailable.substring(0, data.PreviewAvailable.lastIndexOf(\"/\") + 1) + 'thumbnail' + ind + '.png';\r\n\r\n                            var that = $('.sn-thumbnail-page[data-page=\"' + ind + '\"] img');\r\n\r\n                            thumbnailPath = appendPreviewPostfix(thumbnailPath, dataObj.isWatermarked(), addNoChachePostfix);\r\n\r\n                            that.attr('data-loaded', true);\r\n                            that.attr('src', thumbnailPath);\r\n\r\n                            $li.css({\r\n                                'width': data.Width + 240,\r\n                                'height': data.Height,\r\n                                'margin': '0 auto ' + pageMargin + 'px auto'\r\n                            });\r\n\r\n                            $li.attr('data-top', getTopOfThePage(ind));\r\n                            $li.attr('data-width', data.Width);\r\n                            $li.attr('data-height', data.Height);\r\n\r\n                            var twidth = '105px'; var theight = '150px';\r\n                            if (data.Width > data.Height) {\r\n                                twidth = '120px';\r\n                                theight = '100px';\r\n                            }\r\n                            $thumbnail.css({\r\n                                'margin-right': '20px',\r\n                                'width': twidth,\r\n                                'height': theight\r\n                            });\r\n\r\n                            $thumbnail.find('img').css({ 'margin': '0px auto;width:90%' })\r\n\r\n                            var cwidth = 95;\r\n                            var cheight = 130;\r\n\r\n                            $thumbnail.attr('data-width', cwidth).attr('data-height', cheight)\r\n                            if (data.Width > data.Height)\r\n                                $thumbnail.attr('data-width', cheight).attr('data-height', cwidth)\r\n\r\n                            if (jump)\r\n                                SetPreviewControls(ind, false);\r\n\r\n                            var index = pageIsRotated(ind);\r\n\r\n                            if (index > -1) {\r\n                                var newDegree = parseInt(pageAttributesObj[index].options.degree);\r\n                                multipleRotation = false;\r\n                                rotate(newDegree, ind, false);\r\n                                rotateThumbnail(newDegree, ind);\r\n                                saveRotation(ind, newDegree);\r\n                            }\r\n\r\n\r\n                            if ((ulWidth - 240) < data.Width) {\r\n                                ulWidth = data.Width + 240;\r\n                                $ul.width(ulWidth).css('width', ulWidth);\r\n                                fitPreviewsToLeftEdge(dataObj.isFullscreen(), false, currentpreviewWidth);\r\n                            }\r\n\r\n                            $docpreview.on('click.snDocViewer', '.sn-docviewer-page', function () {\r\n                                if ($(this).children('img').attr('data-loaded') === 'true' && parseInt($(this).attr('data-page')) !== currentpreview) {\r\n                                    var pNum = parseInt($(this).attr('data-page'));\r\n                                    removeAllContextMenu();\r\n\r\n                                    getDeletableAndLoadableCanvases(pNum);\r\n                                    SetPreviewControls(pNum, true);\r\n                                }\r\n                            });\r\n\r\n                            $thumbnail.on('click.snDocViewer', function () {\r\n                                if ($(this).attr('data-loaded') === 'true') {\r\n                                    var thumbnailNum = parseInt($(this).attr('data-page'));\r\n                                    removeAllContextMenu();\r\n\r\n                                    if (newPage(pageNum)) {\r\n                                        demandNewPage(pageNum);\r\n                                        setDataTops(pageNum);\r\n                                    }\r\n                                    getDeletableAndLoadableCanvases(thumbnailNum);\r\n                                    SetPreviewControls(thumbnailNum);\r\n                                }\r\n                            });\r\n\r\n                            if (documentDegree !== 0) {\r\n                                multipleRotation = false;\r\n                                rotate(documentDegree, page.Index, false);\r\n                                rotateThumbnail(documentDegree, page.Index, false);\r\n                            }\r\n\r\n                            getDeletableAndLoadableCanvases(ind);\r\n\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n            function pageIsRotated(p) {\r\n                var ind = -1;\r\n                for (var i = 0; i < pageAttributesObj.length; i++) {\r\n                    if (parseInt(pageAttributesObj[i].pageNum) === p)\r\n                        ind = i;\r\n                }\r\n                return ind;\r\n            }\r\n\r\n            function getTopOfThePage(ind) {\r\n                var $prev = $('.sn-docviewer-page[data-page=\"' + (ind - 1) + '\"]').first();\r\n                return parseInt($prev.attr('data-top')) + $prev.height() + 50;\r\n            }\r\n\r\n            function scrollToThumbnail(p) {\r\n\r\n                var thumbnailContainerOrientation, position;\r\n                if ($('.sn-doc-thumbnails').width() > $('.sn-doc-thumbnails').height()) { thumbnailContainerOrientation = 'landscape'; }\r\n                else { thumbnailContainerOrientation = 'portrait'; }\r\n\r\n                if (thumbnailContainerOrientation === 'portrait') {\r\n                    var pos = 1;\r\n                    if (p !== 1)\r\n                        pos = p - 1;\r\n\r\n                    position = $('.sn-thumbnail-page[data-page=\"' + pos + '\"]').position().top - $('.sn-doc-thumbnails ul').position().top;\r\n\r\n\r\n                    if (dataObj.isFullscreen())\r\n                        $('.sn-doc-thumbnails').scrollTop($('.sn-thumbnail-page[data-page=\"' + pos + '\"]').offset().top - $('.sn-doc-thumbnails ul').offset().top + $('.sn-doc-thumbnails ul').scrollTop());\r\n                    else\r\n                        $('.sn-doc-thumbnails').animate({ scrollTop: position });\r\n                }\r\n                else {\r\n                    position = $('.sn-thumbnail-page[data-page=\"' + p + '\"]').position().left - $('.sn-doc-thumbnails ul').position().left;\r\n\r\n                    if (dataObj.isFullscreen())\r\n                        $('.sn-doc-thumbnails').animate({ scrollLeft: position });\r\n                    else\r\n                        $('.sn-doc-thumbnails').animate({ scrollLeft: position });\r\n                }\r\n            }\r\n\r\n            function setPageAccordingToScroll(scrolling) {\r\n                var pageNum = parseInt(getCurrentPage());\r\n                if (!isNaN(parseInt(pageNum)) && parseInt(pageNum) <= maxpreview && scrolling) {\r\n                    // if (pageMustBeRequested(pageNum)) {\r\n                    if ((pageNum + 1) <= maxpreview && pageNum === parseInt($('.sn-docviewer-page').last().attr('data-page')) || $docpreview.scrollTop() + $docpreview.innerHeight() >= $docpreview[0].scrollHeight) {\r\n                        pageNum = parseInt($('.sn-docviewer-page').last().attr('data-page'));\r\n                        if ((pageNum + 1 <= maxpreview) && newPage(pageNum + 1)) {\r\n                            var pNum = pageNum + 1;\r\n                            demandNewPage(pNum);\r\n                            setDataTops(pNum);\r\n                            SetPreviewControls(pageNum, true);\r\n                            $('.sn-doc-thumbnails li').removeClass('active');\r\n                            $('.sn-doc-thumbnails li[data-page=\"' + pageNum + '\"]', $container).addClass('active');\r\n                            scrollToThumbnail(pageNum);\r\n                        }\r\n                    }\r\n                    else if (scrolling) {\r\n                        getDeletableAndLoadableCanvases(pageNum);\r\n                        SetPreviewControls(pageNum, true);\r\n                        $('.sn-doc-thumbnails li').removeClass('active');\r\n                        $('.sn-doc-thumbnails li[data-page=\"' + pageNum + '\"]', $container).addClass('active');\r\n\r\n                        scrollToThumbnail(pageNum);\r\n                    }\r\n                    //}\r\n                }\r\n            }\r\n\r\n            function addNewThumbnailPlaceHolder($imageList, orientation, ind, placeholderImgPath, dataLoaded, w, h) {\r\n                var twidth = 95;\r\n                var theight = 130;\r\n                if (w > h) {\r\n                    var a = twidth;\r\n                    twidth = theight;\r\n                    theight = a;\r\n                }\r\n\r\n                if (ind <= maxpreview) {\r\n                    var $thumbnail = $('<li class=\"sn-thumbnail-page\" data-page=\"' + ind + '\" data-width=\"' + twidth + '\" data-height=\"' + theight + '\"><img src=\"' + placeholderImgPath + '\" data-loaded=\"' + dataLoaded + '\" /><span>Page ' + ind + '</span></li>');\r\n\r\n                    $thumbnail.insertIndex(ind, $('ul', $('.sn-doc-thumbnails')));\r\n\r\n                    var twidth = '100px'; var theight = '150px';\r\n                    if (w > h) {\r\n                        twidth = '120px';\r\n                        theight = '100px';\r\n                    }\r\n\r\n                    $thumbnail.css({\r\n                        'margin-right': '20px',\r\n                        'width': twidth,\r\n                        'height': theight\r\n                    });\r\n\r\n                    $('.sn-thumbnail-page').on('click.snDocViewer', function () {\r\n                        if ($(this).attr('data-loaded') === 'true') {\r\n                            var thumbnailNum = parseInt($(this).attr('data-page'));\r\n                            removeAllContextMenu();\r\n\r\n                            if (newPage(pageNum)) {\r\n                                demandNewPage(pageNum);\r\n                                setDataTops(pageNum);\r\n                            }\r\n\r\n                            getDeletableAndLoadableCanvases(thumbnailNum);\r\n                            SetPreviewControls(thumbnailNum);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            function getCurrentPage() {\r\n                var pageNum;\r\n\r\n                $docpreview.find('li').each(function () {\r\n                    var $that = this;\r\n                    $that = $($that);\r\n                    var top = $that.offset().top - (($that.height() * scale) / 2);\r\n\r\n                    if ($that.attr('data-page') === $docpreview.children().last('li').attr('data-page'))\r\n                        top = $that.offset().top;\r\n\r\n                    var height = $that.height() * scale;\r\n                    if (top > -(height) && top < height && ($that.attr('data-page') !== NaN)) {\r\n                        pageNum = parseInt($that.attr('data-page'));\r\n                        if (pageNum === 'NaN')\r\n                            pageNum = currentpreview + 1;\r\n                        return false;\r\n                    }\r\n                });\r\n                return pageNum;\r\n            }\r\n\r\n            var showable = [];\r\n            function getDeletableAndLoadableCanvases(num) {\r\n                num = parseInt(num);\r\n                showable = [];\r\n                var pages = [];\r\n                var hpages = [];\r\n                var deletable = [];\r\n                if (num === 1) {\r\n                    if (previewNumInTheSameTime > maxpreview) { previewNumInTheSameTime = maxpreview; }\r\n                    for (var i = num; i < (num + previewNumInTheSameTime); i++) {\r\n                        pages.push(i);\r\n                    }\r\n                }\r\n                else if (num === parseInt(maxpreview)) {\r\n                    for (var j = num; j > (num - (previewNumInTheSameTime + 1)); j--) {\r\n                        pages.push(j);\r\n                    }\r\n                }\r\n                else if (num < parseInt(maxpreview)) {  //count number of pages need to be add before and after the called page\r\n                    var n = (previewNumInTheSameTime - 1) % 2;  //check if the number of additional page is even or odd\r\n                    var m, start, end;\r\n                    if (n === 0) {  //the number of additional page is even\r\n                        m = Math.round((previewNumInTheSameTime - 1) / 2);\r\n\r\n                        start = (num - m);\r\n                        end = (num + (m + 1));\r\n\r\n                        if ((num - m) < 1) { //first additional pages pagenumber must be 1 or bigger\r\n                            start = 1;\r\n                        }\r\n\r\n                        if ((num + (m + 1)) > maxpreview) {//last additional pages pagenumber must be the count of the pages or less\r\n                            end = maxpreview;\r\n                        }\r\n\r\n                        else if (lastEixistingPage() - (num + (previewNumInTheSameTime - 1)) <= 0 && (num + (m + 1)) <= maxpreview)\r\n                            end = lastEixistingPage();\r\n\r\n                        for (i = start; i < (end + 1); i++) {\r\n                            pages.push(i);\r\n                        }\r\n                    }\r\n                    else { //the number of additional page is odd (one more page will be added before the called page)\r\n                        m = Math.round((previewNumInTheSameTime - 1) / 2) - 1;\r\n\r\n                        start = (num - (m + 1));\r\n                        end = (num + (m + 1));\r\n\r\n                        if ((num - m) < 1) { //first additional pages pagenumber must be 1 or bigger\r\n                            start = 1;\r\n                        }\r\n\r\n                        if ((num + (m + 1)) > maxpreview) { //last additional pages pagenumber must be the count of the pages or less\r\n                            end = maxpreview;\r\n                        }\r\n\r\n                        if (lastEixistingPage() - (num + (previewNumInTheSameTime - 1)) <= 0 && (num + (m + 1)) <= maxpreview)\r\n                            end = lastEixistingPage();\r\n\r\n                        for (i = start; i < (end + 1); i++) {\r\n                            pages.push(i);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                $.grep(pages, function (el) {\r\n                    if ($.inArray(el, hpages) === -1) {\r\n                        showable.push(el);\r\n                    }\r\n                });\r\n\r\n                $.grep(hpages, function (el) {\r\n                    if ($.inArray(el, pages) === -1) {\r\n                        deletable.push(el);\r\n                    }\r\n                });\r\n\r\n                hpages = pages;\r\n                //remove unnecessary canvases from th DOM\r\n                deleteUnnecessaryCanvases(deletable);\r\n                //push the pagenumber list of the canvases must be loaded\r\n\r\n                $.each(showable, function (i, item) {\r\n\r\n                    var preview = getPreviewInfoByIndex(item, existingPages);\r\n\r\n                    if (typeof preview !== 'undefined') {\r\n                        var $current = $('.sn-docviewer-page[data-page=\"' + item + '\"]');\r\n                        displayCanvases(item, preview.Width, preview.Height);\r\n\r\n                        $currentPage = $('.sn-docviewer-page[data-page=\"' + item + '\"]');\r\n\r\n                        if ($currentPage.hasClass('rotated')) {\r\n                            rotateCanvases($('.sn-docviewer-page[data-page=\"' + item + '\"]'));\r\n                        }\r\n\r\n                        if (isShapeOnThisPage(item)) {\r\n                            setTimeout(function () {\r\n                                showShapesOnPages(item);\r\n                            }, 300);\r\n                        }\r\n\r\n                        var wholeDocRotation = wholeDocumentRotated();\r\n                        if (wholeDocRotation > 0)\r\n                            documentDegree = wholeDocRotation;\r\n                    }\r\n                });\r\n\r\n\r\n            }\r\n\r\n            function getPreviewInfoByIndex(ind, data) {\r\n                var preview;\r\n                $.each(data, function (i, item) {\r\n                    if (item.Index === ind)\r\n                        preview = item;\r\n                });\r\n                return preview;\r\n            }\r\n\r\n            function lastEixistingPage() {\r\n                return parseInt($('.sn-docviewer-page').last().attr('data-page'));\r\n            }\r\n\r\n            function deleteUnnecessaryCanvases(deletable) {\r\n                $.each(deletable, function (i, item) {\r\n                    $('.sn-docviewer-page[data-page=\"' + item + '\"]').children('canvas').remove();\r\n                });\r\n            }\r\n\r\n            function deleteUnnecessaryThumbnails(deletable) {\r\n                $.each(deletable, function (i, item) {\r\n                    var that = $('.sn-thumbnail-page[data-page=\"' + item + '\"] img');\r\n                    that.attr('src', placeholderImgPath);\r\n                    that.attr('data-loaded', false);\r\n                    that.parent().removeClass('active');\r\n                });\r\n            }\r\n\r\n            function appendPreviewPostfix(url, addWatermark, addNoChache, rotation) {\r\n                if (url.indexOf('?') === -1) {\r\n                    url += '?';\r\n                    if (addWatermark) {\r\n                        url += 'watermark=true';\r\n                    }\r\n                }\r\n                else if (addWatermark && url.indexOf('?') > -1) {\r\n                    url += '&watermark=true';\r\n                }\r\n                if (addNoChache) {\r\n                    url += '&nochache=' + new Date().getTime();\r\n                }\r\n                if (typeof rotation !== 'undefined' && rotation !== \"\") {\r\n                    url += rotation;\r\n                }\r\n                return url;\r\n            }\r\n\r\n            function displayCanvases(i, w, h) {\r\n\r\n                var that = $('li[data-page=\"' + i + '\"]', $docpreview);\r\n\r\n                contexts = {};\r\n                if (that.children('canvas').length === 0)\r\n                    contexts[i] = createCanvases(i, w, h);\r\n                if (typeof canvasType !== 'undefined' && canvasType !== 'undefined') {\r\n                    setTimeout(function () { initializeCanvasFeature(canvasType); }, 500);\r\n                }\r\n\r\n                // Start the redraw interval\r\n                clearInterval(mainDraw);\r\n                setInterval(mainDraw, redrawInterval);\r\n\r\n            }\r\n\r\n            function displayThumbnail(i, path, w, h, thumbnailPathParam) {\r\n                var orientation = 'portrait';\r\n                if (w > h)\r\n                    orientation = 'landscape';\r\n                var $imageList = $('ul', $('.sn-doc-thumbnails'));\r\n\r\n                if ($('.sn-thumbnail-page[data-page=\"' + i + '\"]').length === 0)\r\n                    addNewThumbnailPlaceHolder($imageList, orientation, i, placeholderImgPath, false, w, h);\r\n\r\n                var thumbnailPath = thumbnailPathParam || path; //.substring(0, path.lastIndexOf(\"/\") + 1) + 'thumbnail' + i + '.png';\r\n\r\n                var that = $('.sn-thumbnail-page[data-page=\"' + i + '\"] img');\r\n                thumbnailPath = appendPreviewPostfix(thumbnailPath, !noWatermark, addNoChachePostfix);\r\n                that.attr('data-loaded', true);\r\n                that.attr('src', thumbnailPath);\r\n\r\n\r\n                var twidth;\r\n                if (w < h)\r\n                    twidth = 95;\r\n                else\r\n                    twidth = 125;\r\n\r\n                that.attr('width', twidth);\r\n                if (typeof w !== 'undefined' && typeof h !== 'undefined' && w !== null && h !== null) {\r\n                    if (w > h)\r\n                        that.addClass('landscape');\r\n                }\r\n\r\n                if (currentpreview === Number(i))\r\n                    that.parent().addClass('active');\r\n            }\r\n\r\n            function isShapeOnThisPage(num) {\r\n                var shapeExistsOnThisPage = false;\r\n                $.each(allshapes, function (a, item) {\r\n                    $.each(item, function (c, d) {\r\n                        if (d.imageIndex === num) {\r\n                            shapeExistsOnThisPage = true;\r\n                        }\r\n                    });\r\n                });\r\n\r\n                return shapeExistsOnThisPage;\r\n            }\r\n\r\n            function fitToWidth(w) {\r\n                $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                // Fit the document to the width of the viewer\r\n                if (typeof w !== 'undefined')\r\n                    imgWidth = w;\r\n\r\n                var rate = containerWidth / imgWidth;\r\n                setZoomLevel(rate);\r\n                if (rate < minZoomLevel)\r\n                    minZoomLevel = rate;\r\n                fitPreviewsToLeftEdge(dataObj.isFullscreen(), true, w);\r\n\r\n            }\r\n\r\n            function fitToHeight() {\r\n                $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                // Fit the document to the height of the viewer\r\n                var rate = containerHeight / $('li.sn-docviewer-page[data-page=\"' + currentpreview + '\"] img', $docpreview).height();\r\n                setZoomLevel(rate);\r\n                if (rate < minZoomLevel)\r\n                    minZoomLevel = rate;\r\n            }\r\n\r\n            function fitToWindow() {\r\n                $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                // Fit the document to the height or the width of the viewer, depending on which ratio is lower\r\n                var rate1 = containerWidth / $('li.sn-docviewer-page[data-page=\"' + currentpreview + '\"] img', $docpreview).width();\r\n                var rate2 = containerHeight / $('li.sn-docviewer-page[data-page=\"' + currentpreview + '\"] img', $docpreview).height();\r\n                if (!touch) {\r\n                    setZoomLevel(Math.min(rate1, rate2));\r\n                    if (Math.min(rate1, rate2) < minZoomLevel)\r\n                        minZoomLevel = Math.min(rate1, rate2);\r\n                }\r\n                else {\r\n                    var rate = $('body').width() / imgWidth;\r\n                    setZoomLevel(rate);\r\n                    if (rate < minZoomLevel)\r\n                        minZoomLevel = rate;\r\n                }\r\n            }\r\n\r\n            function fitPreviewsToLeftEdge(full, fit, w) {\r\n\r\n                //var scrollLeft = 120 * scale;\r\n                var currentDegree = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree'));\r\n                if (currentDegree === 90 || currentDegree === -90)\r\n                    scrollLeft = 0;\r\n\r\n                $docpreview.scrollLeft(((ulWidth - w) / 2) * scale);\r\n\r\n                //if ((!touch && !full) || (full && fit)) {\r\n                //    var $first = $('.sn-docviewer-page').first().find('img');\r\n                //    var firstPos = (($docpreview.find('ul').innerWidth() - $first.width()) / 2) * scale;\r\n                //    if (($first.width() * scale + 1) < containerWidth)\r\n                //        firstPos = (($docpreview.find('ul').innerWidth() - containerWidth) / 2) * scale;\r\n                //    $docpreview.scrollLeft(firstPos);\r\n                //}\r\n                //else if (full && !touch) {\r\n                //    var $first = $('.sn-docviewer-page').first();\r\n                //    var firstPos = (window.innerWidth - $first.width()) / 2;\r\n                //    $docpreview.scrollLeft(firstPos);\r\n                //}\r\n                //else {\r\n                //    $docpreview.scrollLeft(scrollLeft);\r\n                //}\r\n            }\r\n\r\n            function resizeListItemContainers() {\r\n                $('.sn-docviewer-page img[data-loaded=\"true\"]').each(function () {\r\n                    var that = $(this);\r\n                    var w = parseInt(that.parent().attr('data-width'));\r\n                    var h = parseInt(that.parent().attr('data-height'));\r\n                    if (that.parent().hasClass('rotated') && (that.parent().attr('data-degree') === '90' || that.parent().attr('data-degree') === '-90')) {\r\n                        if (w > h) {\r\n                            that.parent('li').css({\r\n                                'width': h + 240,\r\n                                'height': w\r\n                            });\r\n                        }\r\n                        else {\r\n                            that.parent('li').css({\r\n                                'width': h,\r\n                                'height': w + 240\r\n                            });\r\n                        }\r\n                    }\r\n                    else if (that.parent().hasClass('rotated') && that.parent().attr('data-degree') === '180') {\r\n                        if (that.width() > that.height()) {\r\n                            that.parent('li').css({\r\n                                'width': w + 240,\r\n                                'height': h\r\n                            });\r\n                        }\r\n                        else {\r\n                            that.parent('li').css({\r\n                                'width': w + 240,\r\n                                'height': h\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        that.parent('li').css({\r\n                            'width': w + 240,\r\n                            'height': h\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n            function createCanvases(page, w, h) {\r\n\r\n                // Create all the new canvases\r\n                var $redactioncanvas = $('<canvas/>', { 'class': 'redaction-canvas' });\r\n                var $highlightcanvas = $('<canvas/>', { 'class': 'highlight-canvas' });\r\n                var $annotationcanvas = $('<canvas/>', { 'class': 'annotation-canvas' });\r\n                var $technicalcanvas = $('<canvas/>', { 'class': 'technical-canvas' });\r\n                var $allCanvases = $().add($redactioncanvas).add($highlightcanvas).add($annotationcanvas).add($technicalcanvas);\r\n\r\n                var $li = $($('.sn-docpreview-desktop ul li[data-page=\"' + page + '\"]', $container));\r\n                var $img = $('img', $li);\r\n                var canvasWidth = w;\r\n                var wideCanvasWidth = w + 240;\r\n\r\n                // Initialize redaction canvas\r\n                var redactioncanvas = $redactioncanvas[0];\r\n                redactioncanvas.width = canvasWidth;\r\n                redactioncanvas.height = h;\r\n\r\n                // Initialize highlight canvas\r\n                var highlightcanvas = $highlightcanvas[0];\r\n                highlightcanvas.width = canvasWidth;\r\n                highlightcanvas.height = h;\r\n\r\n                // Initialize annotation canvas\r\n                var annotationcanvas = $annotationcanvas[0];\r\n                annotationcanvas.width = wideCanvasWidth;\r\n                annotationcanvas.height = h;\r\n\r\n                // Initialize technical canvas\r\n                var technicalcanvas = $technicalcanvas[0];\r\n                technicalcanvas.width = wideCanvasWidth;\r\n                technicalcanvas.height = h;\r\n\r\n                // Disable selection for all canvases\r\n                $allCanvases.on('selectstart.snDocViewer', function () { return false; });\r\n                // Set the position for all canvases and the image as well\r\n                $allCanvases.add($img).css({\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    left: 0,\r\n                    'user-select': 'none',\r\n                    '-moz-user-select': 'none',\r\n                    '-webkit-user-select': 'none'\r\n                }).on('selectstart.snDocViewer', function (e) { e.preventDefault(); return false; });\r\n                if (!$li.hasClass('rotated') || $li.attr('data-degree') === 180) {\r\n                    $img.css('margin-left', 120);\r\n                }\r\n                $redactioncanvas.add($highlightcanvas).css('margin-left', 120);\r\n                $annotationcanvas.add($technicalcanvas).css('margin-left', 0);\r\n\r\n                // Append these to the li element representing the current page\r\n                $('.sn-docpreview-desktop ul li[data-page=\"' + page + '\"]').append($allCanvases);\r\n\r\n                if (!showShapes) {\r\n                    $allCanvases.hide();\r\n                }\r\n\r\n                else if (!shapesAreShowing) {\r\n                    $allCanvases.hide();\r\n                }\r\n                else {\r\n                    editmode = false;\r\n                    shapesAreShowing = true;\r\n\r\n                }\r\n                if (!isAdmin) {\r\n                    $redactioncanvas.hide();\r\n                }\r\n                // Initialize the contexts\r\n                if (agentStr.indexOf(\"Trident/4.0\") > -1) { // ie IE\r\n                    $('.sn-additional-tools').hide();\r\n                    redactioncanvas = G_vmlCanvasManager.initElement(redactioncanvas);\r\n                    highlightcanvas = G_vmlCanvasManager.initElement(highlightcanvas);\r\n                    annotationcanvas = G_vmlCanvasManager.initElement(annotationcanvas);\r\n                    technicalcanvas = G_vmlCanvasManager.initElement(technicalcanvas);\r\n                }\r\n                if (redactioncanvas.getContext) {\r\n\r\n                    return {\r\n                        \"redaction\": redactioncanvas.getContext('2d'),\r\n                        \"highlight\": highlightcanvas.getContext('2d'),\r\n                        \"annotation\": annotationcanvas.getContext('2d'),\r\n                        \"technical\": technicalcanvas.getContext('2d')\r\n                    };\r\n                }\r\n            }\r\n\r\n            function parseShapesJson(shapes) {\r\n                if (shapes && shapes.length > 0) {\r\n                    var shapeObj = shapes;\r\n                    if (typeof (shapes) === \"string\")\r\n                        shapeObj = $.parseJSON(shapes);\r\n                    if (typeof (shapeObj) !== \"object\")\r\n                        $.error(\"The shapes option is invalid\");\r\n                    var drawShapes = function (shapeObj, i, p, canvasType) {\r\n                        $.each(shapeObj[i][p], function (index, value) {\r\n                            addRect(value.x, value.y, value.w, value.h, value.imageIndex, canvasType, value.fontSize, value.fontFamily, value.fontColor, value.fontBold, value.fontItalic, value.text, value.lineHeight);\r\n                        });\r\n                    };\r\n                    drawShapes(shapeObj, 0, \"redactions\", \"redaction\");\r\n                    drawShapes(shapeObj, 1, \"highlights\", \"highlight\");\r\n                    drawShapes(shapeObj, 2, \"annotations\", \"annotation\");\r\n                }\r\n                else if (shapes.length === 0) {\r\n                    allshapes = {\r\n                        redaction: [],\r\n                        highlight: [],\r\n                        annotation: []\r\n                    };\r\n                }\r\n            }\r\n\r\n            function parsePageAttributesJson() {\r\n                if (pageAttributes && pageAttributes.length > 0) {\r\n                    pageAttributesObj = pageAttributes;\r\n                    if (typeof (pageAttributes) === \"string\")\r\n                        pageAttributesObj = $.parseJSON(pageAttributes);\r\n                    if (typeof (pageAttributesObj) !== \"object\")\r\n                        $.error(\"The shapes option is invalid\");\r\n\r\n                }\r\n            }\r\n\r\n            function SetPreviewControls(page, dontScroll, fullScreen) {\r\n                if (currentpreview === page && !fullScreen) {\r\n                    if (page === maxpreview)\r\n                        $('.sn-input-jumptopage').val(maxpreview);\r\n                    else {\r\n                        $('.sn-doc-thumbnails li').removeClass('active');\r\n                        $('.sn-doc-thumbnails li[data-page=\"' + currentpreview + '\"]').addClass('active');\r\n                    }\r\n                }\r\n                if (maxpreview === 0) {\r\n                    //console.log(\"The are no preview images, can't set page.\");\r\n                    currentpreview = 0;\r\n                    return;\r\n                }\r\n                if (page < 1 || page > maxpreview) {\r\n                    //console.log(\"The page parameter is outside the range of possible pages: \", page, \" NOTE: you can use pageCount() to get the number of pages.\");\r\n                    return;\r\n                }\r\n\r\n\r\n                if ((!dontScroll && currentpreview !== page) || (!dontScroll && fullScreen)) {\r\n\r\n                    currentpreview = Number(page);\r\n                    currentpreviewWidth = $('#imageContainer' + page).attr('data-width');\r\n\r\n                    var currentimageId = \"imageContainer\" + currentpreview;\r\n                    var currentImageObj = $('#' + currentimageId, $container);\r\n                    var position;\r\n                    if (iHeight === null)\r\n                        iHeight = currentImageObj.height();\r\n                    if (!touch) {\r\n                        //if (!dataObj.isFullscreen()) {\r\n                        //position = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').first().attr('data-top')) * scale;\r\n                        position = $('#imageContainer' + currentpreview).aPosition().top + $docpreview.aPosition().top;\r\n\r\n                        // $($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').first()[0].attributes).each(function () {\r\n                        //     if (this.name === 'data-top' && this.value !== 'NaN') {\r\n                        //         position = parseInt(this.nodeValue) * scale;\r\n                        //     }\r\n                        // });\r\n                        //}\r\n                        //    //position = ((currentpreview - 1) * (iHeight + pageMargin) * scale) - pageMargin * 0.2;\r\n                        //else\r\n                        //    position = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').first().attr('data-top')) * scale;\r\n\r\n                        $docpreview.animate({ scrollTop: position }, function () {\r\n                            $('.sn-input-jumptopage', $container).val(currentpreview);\r\n                            jumpDistance = 1;\r\n\r\n                            if (currentpreview === 1) {\r\n                                setTimeout(function () { showShapesOnPages(currentpreview); }, 200);\r\n                            }\r\n                        });\r\n                        $('.sn-doc-thumbnails li').removeClass('active');\r\n                        $('.sn-doc-thumbnails li[data-page=\"' + currentpreview + '\"]').addClass('active');\r\n                    }\r\n                    else {\r\n                        var currentItemOffsetTop = $('#docpreview').offset().top - (currentImageObj.aPosition().top + 120);\r\n                        var currentItemOffsetLeft = myScroll.x;\r\n                        myScroll.scrollTo(currentItemOffsetLeft, currentItemOffsetTop, 100);\r\n                        $('.sn-input-jumptopage', $container).val(currentpreview);\r\n                        if (currentpreview === 1) {\r\n                            setTimeout(function () { showShapesOnPages(currentpreview); }, 200);\r\n                        }\r\n                    }\r\n\r\n                    scrollToThumbnail(currentpreview);\r\n                }\r\n                if (dontScroll) {\r\n\r\n                    currentpreview = Number(page);\r\n                    currentpreviewWidth = $('#imageContainer' + page).attr('data-width');\r\n                    $('.sn-input-jumptopage', $container).val(currentpreview);\r\n                    if (currentpreview === 1) {\r\n                        setTimeout(function () { showShapesOnPages(currentpreview); touched = false; }, 200);\r\n                    }\r\n                }\r\n\r\n\r\n                if (currentpreview === 1 && currentpreview !== maxpreview) {\r\n                    $('.sn-icon-prev, .sn-icon-firstpage').addClass('disabled');\r\n                    $('.sn-icon-next, .sn-icon-lastpage').removeClass('disabled');\r\n                }\r\n                else if (currentpreview === maxpreview && currentpreview !== 1) {\r\n                    $('.sn-icon-next, .sn-icon-lastpage').addClass('disabled');\r\n                    $('.sn-icon-prev, .sn-icon-firstpage').removeClass('disabled');\r\n                }\r\n                else {\r\n                    $('.sn-icon-next, .sn-icon-lastpage').removeClass('disabled');\r\n                    $('.sn-icon-prev, .sn-icon-firstpage').removeClass('disabled');\r\n                }\r\n\r\n                if ($('.sn-docviewer-page[data-page=\"' + page + '\"]').hasClass('rotated')) {\r\n                    disableEditorButtons();\r\n                }\r\n                else if (!$('.sn-docviewer-page[data-page=\"' + page + '\"]').hasClass('rotated')) // && !$('.sn-additional-tools .sn-icon').hasClass('active')\r\n                    enableEditorButtons();\r\n\r\n\r\n                if ($('.sn-icon-rubberband').hasClass('active'))\r\n                    setTechnicalCanvasForRubberbandZoom(page);\r\n\r\n                callbacks.pageChanged && callbacks.pageChanged(currentpreview);\r\n            }\r\n\r\n            // Sets the zoom level of the document\r\n            //TODO: Revise this method functionality\r\n            function setZoomLevel(newLevel, x0, y0, $rel, rb) {\r\n                var $zoo = $('.zoomer', $docpreview);\r\n                $ul = $('ul', $docpreview);\r\n                var $li = $('li', $ul);\r\n                var $img = $('img', $li);\r\n                var $rel = $rel || $('.sn-docviewer-page:first').children('technicalcanvas');\r\n                var $currentLi = $rel.closest('li.sn-docviewer-page');\r\n                if (!$currentLi.length)\r\n                    $currentLi = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                if (!x0) {\r\n                    x0 = x0 || $img.width() * 0.25;\r\n                    y0 = y0 || ($docpreview.scrollTop() / scale);\r\n                }\r\n                var oldWidth = imgWidth * scale + (240 * scale);\r\n                var newWidth = imgWidth * newLevel + (240 * scale);\r\n\r\n                var origScale = scale;\r\n                scale = newLevel;\r\n\r\n                $ul.css({\r\n                    'transform': 'scale(' + scale + ')',\r\n                    '-moz-transform': 'scale(' + scale + ')',\r\n                    '-ms-transform': 'scale(' + scale + ')',\r\n                    '-webkit-transform': 'scale(' + scale + ')',\r\n                    '-o-transform': 'scale(' + scale + ')',\r\n                    'transform-origin': scale > 1 ? '0 0' : '0 0',\r\n                    '-moz-transform-origin': scale > 1 ? '0 0' : '0 0',\r\n                    '-ms-transform-origin': scale > 1 ? '0 0' : '0 0',\r\n                    '-webkit-transform-origin': scale > 1 ? '0 0' : '0 0',\r\n                    '-o-transform-origin': scale > 1 ? '0 0' : '0 0',\r\n                    'width': ulWidth,\r\n                    'text-align': 'center'\r\n                });\r\n\r\n                $zoo.css({\r\n                    'width': ulWidth * scale,\r\n                    'height': $ul.height() * scale,\r\n                    'margin': '0px auto'\r\n                });\r\n\r\n                if (rb) {\r\n                    var diff = $rel ? ($li.offset().left - $rel.offset().left - $li.position().left) : 0;\r\n                    $docpreview.scrollLeft(Math.max(0, x0 * scale - diff));\r\n                    $docpreview.scrollTop(Math.max(0, $currentLi.position().top + y0 * scale));\r\n                }\r\n                else {\r\n\r\n                    var relScale = scale / origScale;\r\n\r\n                    var y = containerHeight / 2;\r\n\r\n                    y = y + $('#docpreview').position().top - $docpreview.scrollTop();\r\n\r\n                    y = y - y * relScale + $docpreview.scrollTop();\r\n\r\n                    if ($docpreview.scrollTop() === 0) {\r\n                        y = 0;\r\n                    }\r\n\r\n                    $docpreview.scrollTop(y);\r\n                    $docpreview.scrollLeft($docpreview.scrollLeft() + (newWidth - oldWidth) / 2);\r\n\r\n                }\r\n\r\n                if (newLevel === 1 && $container.parent().hasClass(\"sn-docpreview-fullscreen-wrapper\")) {\r\n                    fitPreviewsToLeftEdge(true, false, currentpreviewWidth);\r\n                }\r\n\r\n                setDataTops();\r\n                setPageAccordingToScroll(false);\r\n                callbacks.zoomLevelChanged && callbacks.zoomLevelChanged(scale);\r\n            }\r\n\r\n            function widestPageWidth() {\r\n                var widestWidth = imgWidth;\r\n                $('.sn-docviewer-page').each(function () {\r\n                    $element = $(this);\r\n                    if ($element.width() > widestWidth) {\r\n                        widestWidth = $element.width();\r\n                    }\r\n                });\r\n                return widestWidth;\r\n            }\r\n\r\n            function setDataTops(i) {\r\n                if (typeof i !== 'undefined' || i !== undefined) {\r\n                    var $that = $('#imageContainer' + i);\r\n                    var prev = $that.prev('li');\r\n                    var prevTop = parseInt(prev.attr('data-top'));\r\n                    var prevHeight = prev.height();\r\n                    if ($that.attr('data-page') !== '1')\r\n                        $that.attr('data-top', prevTop + prevHeight + 50);\r\n                    else\r\n                        $that.attr('data-top', 0);\r\n                }\r\n                else {\r\n                    $('.sn-docviewer-page').each(function () {\r\n                        var prev = $(this).prev('li');\r\n                        var prevTop = parseInt(prev.attr('data-top'));\r\n                        var prevHeight = prev.height();\r\n                        var $that = $(this);\r\n                        if ($that.attr('data-page') !== '1')\r\n                            $that.attr('data-top', prevTop + prevHeight + 50);\r\n                        else\r\n                            $that.attr('data-top', 0);\r\n                    });\r\n                }\r\n            }\r\n\r\n            function ShowThumbnails() {\r\n\r\n                var $this = $(this);\r\n\r\n                if (!$this.hasClass('active')) {\r\n                    $this.addClass('active');\r\n                    $metadatacontainer.addClass('fulscreen-metadata').fadeIn();\r\n                    //getDeletableAndLoadableThumbnails(pageNum);\r\n                }\r\n                else {\r\n                    $this.removeClass('active');\r\n                    $metadatacontainer.fadeOut(200, function () { $metadatacontainer.removeClass('fulscreen-metadata'); });\r\n                }\r\n\r\n                if (currentpreview > 1)\r\n                    scrollToThumbnail(currentpreview);\r\n\r\n            }\r\n\r\n            function enterFullscreenMode(pnum) {\r\n                if (dataObj.isFullscreen())\r\n                    return;\r\n                var width = $(window).width();\r\n                var height = $(window).height();\r\n                var $fullscreenWrapper = $(\".sn-docpreview-fullscreen-wrapper\");\r\n                if ($fullscreenWrapper.length)\r\n                    $.error(\"Another document viewer is already in fullscreen mode, can't switch this one to fullscreen mode too.\");\r\n\r\n                var heightDiff = $pluginSubject.height() - containerHeight;\r\n                // Create a wrapper for fullscreen mode\r\n                $fullscreenWrapper = $('<div class=\"sn-docpreview-fullscreen-wrapper\"></div>').css({\r\n                    left: 0,\r\n                    top: 0,\r\n                    position: \"absolute\",\r\n                    width: width,\r\n                    height: height,\r\n                    'z-index': 1000\r\n                }).appendTo($(\"body\"));\r\n                $(window).off('resize.snDocViewerFullscreen').on('resize.snDocViewerFullscreen', function () {\r\n                    $fullscreenWrapper.css({\r\n                        width: width,\r\n                        height: height\r\n                    });\r\n                });\r\n                // Move the container element into the new wrapper\r\n                $container.appendTo($fullscreenWrapper);\r\n                // Adjust the user interface\r\n                $docpreview.height(height - heightDiff);\r\n                $metadatacontainer.hide();\r\n                $imagecontainer.width('100%');\r\n                $(\".sn-doc-title\").addClass('viewer-fullScreen').removeClass('viewer-normalScreen');\r\n                $toolbarContainer.find('.sn-icon-fullscreen').addClass('normalscreen').parent().attr('title', SR.toolbarExitFullscreen);\r\n                $('<div class=\"seeThumbnails\" title=\"' + SR.showThumbnails + '\"><span class=\"sn-icon sn-icon-thumbnails\"></span></div>').on('click.snDocViewer', ShowThumbnails).appendTo($docpreview.parent());\r\n\r\n                hpages = [];\r\n\r\n                var thumbnailListHeight = height;\r\n                $('.sn-doc-thumbnails').height(thumbnailListHeight);\r\n\r\n\r\n\r\n                if (touch) {\r\n                    myScroll.scrollTo((-130 * scale), 0);\r\n                }\r\n\r\n                // Trigger resize to make the items sized correctly\r\n                $(window).trigger(\"resize\");\r\n\r\n                setTimeout(function () {\r\n                    SetPreviewControls(pnum, false, true);\r\n                    fitPreviewsToLeftEdge(true, false, currentpreviewWidth);\r\n                }, 1000);\r\n\r\n                //if ($('.sn-paging-tools .sn-doc-title').length === 0) {\r\n                //    var $doctitle = $('.sn-doc-title');\r\n                //    $('.sn-docpreview-fullscreen-wrapper .image-container').prepend($doctitle);\r\n                //    var docTitleWidth = $('.sn-docviewer-tools').offset().left;\r\n                //    $doctitle.children('h1').width(docTitleWidth - 20);\r\n                //}\r\n            }\r\n\r\n            function exitFullscreenMode() {\r\n                if (!dataObj.isFullscreen())\r\n                    return;\r\n\r\n                $(window).off('resize.snDocViewerFullscreen');\r\n                var $fullscreenWrapper = $(\".sn-docpreview-fullscreen-wrapper\");\r\n                // Move the container to the old place\r\n                $container.appendTo($pluginSubject);\r\n                // Delete the fullscreen wrapper from the DOM\r\n                $fullscreenWrapper.remove();\r\n                // Adjust the user interface\r\n                $docpreview.height(containerHeight);\r\n                $metadatacontainer.show();\r\n                $imagecontainer.width('75%');\r\n                $toolbarContainer.find('.sn-icon-fullscreen').removeClass('normalscreen').parent().attr('title', 'Fullscreen');\r\n                $docpreview.find('.seeThumbnails').remove();\r\n                $docpreview.parent().find('.seeThumbnails').remove();\r\n                $metadatacontainer.removeClass('fulscreen-metadata');\r\n                $(\".sn-doc-title\").removeClass('viewer-fullScreen').addClass('viewer-normalScreen');\r\n                // Trigger resize to make the items sized correctly\r\n                $(window).trigger(\"resize\");\r\n\r\n                SetPreviewControls(currentpreview, false, true);\r\n                var left = $('.sn-thumbnail-page[data-page=\"' + currentpreview + '\"]').position().left;\r\n                if (left === 0) {\r\n                    //getDeletableAndLoadableThumbnails(1);\r\n                }\r\n                else {\r\n                    if ($('.sn-doc-thumbnails').width() > $('.sn-doc-thumbnails').height()) {\r\n                        $('.sn-doc-thumbnails').scrollLeft(left);\r\n                    }\r\n                    else {\r\n                        $('.sn-doc-thumbnails').animate({ scrollTop: (left) }, 100);\r\n                    }\r\n                }\r\n\r\n\r\n                setTimeout(function () {\r\n                    fitPreviewsToLeftEdge(false, false, currentpreviewWidth);\r\n                    var thumbnailListHeight = containerHeight;\r\n                    $('.sn-doc-thumbnails').height(thumbnailListHeight);\r\n                }, 500);\r\n            }\r\n\r\n            function Shape() {\r\n                this.x = 0;\r\n                this.y = 0;\r\n                this.w = mySelBoxSize;\r\n                this.h = mySelBoxSize;\r\n            };\r\n\r\n            function Redaction() {\r\n                Shape.call(this);\r\n            }\r\n\r\n            function Highlight() {\r\n                Shape.call(this);\r\n            }\r\n\r\n            function Annotation() {\r\n                Shape.call(this);\r\n            }\r\n\r\n            Shape.prototype = {\r\n                fill: 'rgba(0,0,0,1)',\r\n                drawSelectionHandles: function (context) {\r\n                    // Calculate position of selection handles\r\n                    var half = mySelBoxSize / 2;\r\n\r\n                    selectionHandles[0].x = this.x - half;\r\n                    selectionHandles[0].y = this.y - half;\r\n\r\n                    selectionHandles[1].x = this.x + this.w / 2 - half;\r\n                    selectionHandles[1].y = this.y - half;\r\n\r\n                    selectionHandles[2].x = this.x + this.w - half;\r\n                    selectionHandles[2].y = this.y - half;\r\n\r\n                    selectionHandles[3].x = this.x - half;\r\n                    selectionHandles[3].y = this.y + this.h / 2 - half;\r\n\r\n                    selectionHandles[4].x = this.x + this.w - half;\r\n                    selectionHandles[4].y = this.y + this.h / 2 - half;\r\n\r\n                    selectionHandles[6].x = this.x + this.w / 2 - half;\r\n                    selectionHandles[6].y = this.y + this.h - half;\r\n\r\n                    selectionHandles[5].x = this.x - half;\r\n                    selectionHandles[5].y = this.y + this.h - half;\r\n\r\n                    selectionHandles[7].x = this.x + this.w - half;\r\n                    selectionHandles[7].y = this.y + this.h - half;\r\n\r\n                    // Stroke the current shape\r\n                    context.strokeStyle = mySelColor;\r\n                    context.lineWidth = mySelWidth;\r\n                    context.strokeRect(this.x, this.y, this.w, this.h);\r\n\r\n                    // Draw the selection handles\r\n                    for (var i = 0; i < 8; i++) {\r\n                        selectionHandles[i].draw(context);\r\n                    }\r\n                },\r\n                draw: function (context, optionalColor) {\r\n                    var d = 0;\r\n                    if (typeof $(context.canvas).closest('li').attr('data-degree') !== 'undefined')\r\n                        d = parseInt($(context.canvas).closest('li').attr('data-degree'));\r\n                    // Check position\r\n                    if (!context || !context.canvas)\r\n                        return;\r\n                    if (this.x > context.canvas.width || this.y > context.canvas.height || this.x + this.w < 0 || this.y + this.h < 0)\r\n                        return;\r\n\r\n                    // Draw the shape\r\n                    context.fillStyle = this.fill;\r\n                    context.fillRect(this.x, this.y, this.w, this.h);\r\n\r\n                    // If the current shape is selected, draw selection handles\r\n                    if (mySel === this)\r\n                        this.drawSelectionHandles(context);\r\n                }\r\n            };\r\n\r\n            Redaction.prototype = {\r\n                fill: 'rgba(0,0,0,1)',\r\n                drawSelectionHandles: Shape.prototype.drawSelectionHandles,\r\n                draw: Shape.prototype.draw\r\n            };\r\n\r\n            Highlight.prototype = {\r\n                fill: 'rgba(255,255,0,0.4)',\r\n                drawSelectionHandles: Shape.prototype.drawSelectionHandles,\r\n                draw: Shape.prototype.draw\r\n            };\r\n\r\n            Annotation.prototype = {\r\n                minWidth: 120,\r\n                minHeight: 140,\r\n                fill: 'rgba(248,236,194,1)',\r\n                drawSelectionHandles: Redaction.prototype.drawSelectionHandles,\r\n                draw: function (context, optionalColor) {\r\n                    if (this.x > context.canvas.width || this.y > context.canvas.height || this.x + this.w < 0 || this.y + this.h < 0)\r\n                        return;\r\n\r\n                    context.fillStyle = this.fill;\r\n                    context.shadowColor = '#999';\r\n                    context.shadowBlur = 20;\r\n                    context.shadowOffsetX = 5;\r\n                    context.shadowOffsetY = 5;\r\n                    context.fillRect(this.x, this.y, this.w, this.h);\r\n\r\n                    context.shadowColor = 'transparent';\r\n                    context.font = this.fontBold + ' ' + this.fontItalic + ' ' + this.fontSize + ' ' + this.fontFamily;\r\n                    context.fillStyle = this.fontColor;\r\n\r\n                    wrapText(context, this.text, this.x + 10, this.y + 30, this.w - 10, this.h, this.lineHeight + 5);\r\n\r\n                    if (mySel === this)\r\n                        this.drawSelectionHandles(context);\r\n                }\r\n            };\r\n\r\n            function wrapText(context, text, x, y, maxWidth, maxHeight, lineHeight) {\r\n                var cars = text.split(\"\\n\");\r\n                var lines = [];\r\n                var totalHeight = 0;\r\n\r\n                // This will break long words into multiple lines\r\n                var addLineBreakLongWords = function (line) {\r\n                    if (!line || !(line = line.trim()))\r\n                        return;\r\n\r\n                    var line1 = line;\r\n                    var line2 = \"\";\r\n\r\n                    var testWidth = context.measureText(line1).width;\r\n                    while (testWidth > maxWidth) {\r\n                        line2 = line1.substr(line1.length - 1, 1) + line2;\r\n                        line1 = line1.substr(0, line1.length - 1);\r\n                        testWidth = context.measureText(line1).width;\r\n                    }\r\n\r\n                    if (line1)\r\n                        lines.push(line1);\r\n                    if (line2)\r\n                        addLineBreakLongWords(line2);\r\n                };\r\n\r\n                // This will break lines into multiple lines by spaces\r\n                var addLineBreakOnSpaces = function (car) {\r\n                    var line = \"\";\r\n                    var words = car.split(\" \");\r\n\r\n                    for (var n = 0; n < words.length; n++) {\r\n                        var testLine = line + words[n] + \" \";\r\n                        var metrics = context.measureText(testLine);\r\n                        var testWidth = metrics.width;\r\n\r\n                        if (testWidth > maxWidth) {\r\n                            addLineBreakLongWords(line);\r\n                            line = words[n] + \" \";\r\n                        }\r\n                        else {\r\n                            line = testLine;\r\n                        }\r\n                    }\r\n\r\n                    addLineBreakLongWords(line);\r\n                };\r\n\r\n                // Go through each line and break into multiple lines if necessary\r\n                for (var ii = 0; ii < cars.length; ii++) {\r\n                    addLineBreakOnSpaces(cars[ii]);\r\n                }\r\n\r\n                // Go through all the resulting lines and draw them as needed\r\n                for (var yy = 0; yy < lines.length; yy++) {\r\n                    var line = lines[yy];\r\n                    context.fillText(line, x, y);\r\n                    y += lineHeight;\r\n                    totalHeight += lineHeight;\r\n\r\n                    if (totalHeight + lineHeight * 2.3 > maxHeight && yy < lines.length - 2) {\r\n                        context.fillText(\"...\", x, y);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function addRect(x, y, w, h, imageIndex, type, fontSize, fontFamily, fontColor, fontBold, fontItalic, text, lineHeight) {\r\n\r\n                var degree = 0;\r\n                if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree') !== 'undefined')\r\n                    degree = parseInt($('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]').attr('data-degree'));\r\n\r\n                var rect;\r\n                if (type === \"redaction\") {\r\n                    rect = new Redaction();\r\n                }\r\n                else if (type === \"highlight\") {\r\n                    rect = new Highlight();\r\n                }\r\n                else if (type === \"annotation\") {\r\n                    rect = new Annotation();\r\n                    rect.fontSize = fontSize || '24pt';\r\n                    rect.fontFamily = fontFamily || 'Arial';\r\n                    rect.fontColor = fontColor || '#333';\r\n                    rect.fontBold = fontBold || 'Normal';\r\n                    rect.fontItalic = fontItalic || 'Normal';\r\n                    rect.text = text || 'Double click to edit text';\r\n                    rect.lineHeight = lineHeight || 20;\r\n                }\r\n                rect.x = x;\r\n                rect.y = y;\r\n                rect.w = w;\r\n                rect.h = h;\r\n                rect.imageIndex = parseInt(imageIndex);\r\n                var rRect = rotateShape(rect, degree, imageIndex, type);\r\n\r\n                allshapes[type].push(rRect);\r\n                saveableshapes[type].push(rect);\r\n                invalidate();\r\n            }\r\n\r\n            function rotateShape(r, d, img, t) {\r\n                var $context = $('.sn-docviewer-page[data-page=\"' + img + '\"]').find('canvas.' + t + '-canvas');\r\n                if (d === 0) {\r\n                    var x = r.x,\r\n                        y = r.y,\r\n                        w = r.w,\r\n                        h = r.h;\r\n                }\r\n                else if (d === -90) {\r\n                    var x = ($context.width() - (r.y + r.h) + (120 * scale)),\r\n                        y = r.x,\r\n                        w = r.h,\r\n                        h = r.w;\r\n                }\r\n                else if (d === 90) {\r\n                    var x = r.y - 120,\r\n                        y = ($context.height() - (r.x + r.w)),\r\n                        w = r.h,\r\n                        h = r.w;\r\n                }\r\n                else {\r\n                    var x = $context.width() - (r.x + r.w),\r\n                        y = $context.height() - (r.y + r.h),\r\n                        w = r.w,\r\n                        h = r.h;\r\n                }\r\n\r\n                r.x = x,\r\n                    r.y = y,\r\n                    r.w = w,\r\n                    r.h = h;\r\n\r\n                return r;\r\n            }\r\n\r\n            function rotateCoordinates(s, d, page, t) {\r\n                var $context = page.find('canvas.' + t + '-canvas');\r\n                if (d === 0) {\r\n                    var x = s.x,\r\n                        y = s.y;\r\n                }\r\n                else if (d === -90) {\r\n                    var x = ($context.width() - s.y + (120 * scale)),\r\n                        y = s.x;\r\n                }\r\n                else if (d === 90) {\r\n                    var x = s.y - 120,\r\n                        y = ($context.height() - s.x + s.w);\r\n                }\r\n                else {\r\n                    var x = $context.width() - s.x,\r\n                        y = $context.height() - s.y;\r\n                }\r\n\r\n                s.x = x,\r\n                    s.y = y;\r\n                return s;\r\n            }\r\n\r\n            function removeRect(index) {\r\n                allshapes[canvasType].splice(index, 1);\r\n                saveableshapes[canvasType].splice(index, 1);\r\n                removeAllContextMenu();\r\n                invalidate();\r\n            }\r\n\r\n            function initializeCanvasFeature(newType) {\r\n                setTimeout(function () { clearShapeSelections(); }, 200);\r\n                canvasType = newType || canvasType;\r\n                editmode = true;\r\n\r\n                var $canvas = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .' + newType + '-canvas');\r\n                var $technicalcanvas = $container.find('canvas.technical-canvas'); $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] canvas.technical-canvas');\r\n\r\n                // Set z-indexes\r\n                resetCanvasZIndexes();\r\n                $canvas.css('z-index', 100);\r\n                // Remove all previous event handlers\r\n                $technicalcanvas.off('mousedown.snDocViewer').off('mouseup.snDocViewer').off('mousemove.snDocViewer').off('dblclick.snDocViewer');\r\n                // Add new event handlers\r\n                $technicalcanvas.on('mousedown.snDocViewer', myDown).on('mouseup.snDocViewer', myUp).on('mousemove.snDocViewer', myMove).on('dblclick.snDocViewer', myDblClick).on('click.snDocViewer', myClick);\r\n\r\n                // Initialize selection handles\r\n                selectionHandles = [];\r\n                for (var i = 0; i < 8; i++) {\r\n                    selectionHandles.push(new Shape());\r\n                }\r\n            }\r\n\r\n            function destroyCanvasFeature() {\r\n                if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas') !== 'undefined' && $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas').length > 0) {\r\n                    setTimeout(function () { clearShapeSelections(); }, 200);\r\n                }\r\n                editmode = false;\r\n                resetCanvasZIndexes();\r\n                var $technicalcanvas = $('canvas.technical-canvas');\r\n                $technicalcanvas.off('mousedown.snDocViewer').off('mouseup.snDocViewer').off('mousemove.snDocViewer').off('dblclick.snDocViewer');\r\n            }\r\n\r\n            function resetCanvasZIndexes() {\r\n                // reset\r\n                $container.find(\"canvas.annotation-canvas\").css('z-index', 40);\r\n                $container.find(\"canvas.redaction-canvas\").css('z-index', 30);\r\n                $container.find(\"canvas.highlight-canvas\").css('z-index', 20);\r\n                $container.find(\"canvas.technical-canvas\").css('z-index', 101);\r\n            }\r\n\r\n            function clear(ctx) {\r\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n            }\r\n            var currentshapes;\r\n            function mainDraw(ignoreValid) {\r\n                if ((!ignoreValid && canvasValid) || !canvasType)\r\n                    return;\r\n\r\n                var p = currentpreview;\r\n                if (typeof $('.sn-docviewer-page[data-page=\"' + p + '\"] .' + canvasType + '-canvas')[0] !== 'undefined') {\r\n                    var ctx = $('.sn-docviewer-page[data-page=\"' + p + '\"] .' + canvasType + '-canvas')[0].getContext('2d');\r\n                    currentshapes = allshapes[canvasType];\r\n                    clear(ctx);\r\n                    canvasValid = true;\r\n\r\n                    for (var i = currentshapes.length; i--;) {\r\n                        if (parseInt(currentshapes[i].imageIndex) === p) {\r\n                            currentshapes[i].draw(ctx);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            function myMove(e) {\r\n\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var $canvas = $currentPage.find('.' + canvasType + '-canvas');\r\n                var $technicalcanvas = $currentPage.find('.technical-canvas');\r\n                var diff = ($canvas.offset().left - $technicalcanvas.offset().left) / scale;\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n\r\n                var rm = {};\r\n                rm.x = p.x;\r\n                rm.y = p.y;\r\n\r\n                if (d !== 0)\r\n                    rm = rotateCoordinates(rm, d, $currentPage, canvasType);\r\n\r\n                rmx = rm.x;\r\n                rmy = rm.y;\r\n\r\n                if (rmstart === this) {\r\n                    if (isDrag && mySel) {\r\n                        started = false;\r\n                        mySel.x = rmx - x0;\r\n                        mySel.y = rmy - y0;\r\n\r\n                        $technicalcanvas.css({ 'cursor': 'move' });\r\n                        invalidate();\r\n                    }\r\n                    else if (isResizeDrag) {\r\n                        var oldx = mySel.x;\r\n                        var oldy = mySel.y;\r\n                        started = false;\r\n\r\n                        if (expectResize & resizeFlags.fromTop) {\r\n                            if (!mySel.minHeight || mySel.h + oldy - rmy >= mySel.minHeight) {\r\n                                mySel.y = rmy;\r\n                                mySel.h += oldy - rmy;\r\n                            }\r\n                        }\r\n                        if (expectResize & resizeFlags.fromRight) {\r\n                            mySel.w = mySel.minWidth ? Math.max(rmx - diff - oldx, mySel.minWidth) : rmx - diff - oldx;\r\n                        }\r\n                        if (expectResize & resizeFlags.fromBottom) {\r\n                            mySel.h = mySel.minHeight ? Math.max(rmy - oldy, mySel.minHeight) : rmy - oldy;\r\n                        }\r\n                        if (expectResize & resizeFlags.fromLeft) {\r\n                            if (!mySel.minWidth || mySel.w + oldx - rmx + diff >= mySel.minWidth) {\r\n                                mySel.x = rmx - diff;\r\n                                mySel.w += oldx - rmx + diff;\r\n                            }\r\n                        }\r\n\r\n                        invalidate();\r\n                    }\r\n                    else {\r\n                        drawRectangleMove.call($technicalcanvas, e);\r\n                    }\r\n                }\r\n\r\n                if (mySel && !isResizeDrag) {\r\n                    for (var i = 0; i < 8; i++) {\r\n                        var cur = selectionHandles[i];\r\n                        if (rmx - diff >= cur.x && rmx - diff <= cur.x + mySelBoxSize + 15 && rmy >= cur.y && rmy <= cur.y + mySelBoxSize + 15) {\r\n                            switch (i) {\r\n                                case 0:\r\n                                    expectResize = resizeFlags.fromTop | resizeFlags.fromLeft;\r\n                                    this.style.cursor = 'nw-resize';\r\n                                    break;\r\n                                case 1:\r\n                                    expectResize = resizeFlags.fromTop;\r\n                                    this.style.cursor = 'n-resize';\r\n                                    break;\r\n                                case 2:\r\n                                    expectResize = resizeFlags.fromTop | resizeFlags.fromRight;\r\n                                    this.style.cursor = 'ne-resize';\r\n                                    break;\r\n                                case 3:\r\n                                    expectResize = resizeFlags.fromLeft;\r\n                                    this.style.cursor = 'w-resize';\r\n                                    break;\r\n                                case 4:\r\n                                    expectResize = resizeFlags.fromRight;\r\n                                    this.style.cursor = 'e-resize';\r\n                                    break;\r\n                                case 5:\r\n                                    expectResize = resizeFlags.fromBottom | resizeFlags.fromLeft;\r\n                                    this.style.cursor = 'sw-resize';\r\n                                    break;\r\n                                case 6:\r\n                                    expectResize = resizeFlags.fromBottom;\r\n                                    this.style.cursor = 's-resize';\r\n                                    break;\r\n                                case 7:\r\n                                    expectResize = resizeFlags.fromBottom | resizeFlags.fromRight;\r\n                                    this.style.cursor = 'se-resize';\r\n                                    break;\r\n                            }\r\n                            invalidate();\r\n                            return;\r\n                        }\r\n                        else if (!isDrag) { $technicalcanvas.css({ 'cursor': 'default' }); }\r\n                    }\r\n                    isResizeDrag = false;\r\n                    expectResize = 0;\r\n                }\r\n            }\r\n\r\n            function myDown(e) {\r\n                if (Number($(e.target).closest('li').attr('data-page')) === Number(currentpreview)) {\r\n                    var $technicalcanvas = $(this);\r\n                    // Reset variables which maintain drag state\r\n                    rmstart = this;\r\n                    rmx = undefined;\r\n                    rmy = undefined;\r\n\r\n                    // Keydown for delete button\r\n                    $technicalcanvas.off('keydown.snDocViewer');\r\n                    $technicalcanvas.attr('tabindex', '0').on('keydown.snDocViewer', function (e) {\r\n                        if (mySel && e.which === 46) {\r\n                            index = mySel.index;\r\n                            removeRect(index);\r\n                        }\r\n                    });\r\n\r\n                    // Clear technical canvas in case the user doesn't release the mouse over the current canvas\r\n                    $(window).on(\"mouseup.snDocViewer_\" + docViewerId, function (e) {\r\n                        $(window).off(\"mouseup.snDocViewer_\" + docViewerId);\r\n                        isDrag = false;\r\n                        isResizeDrag = false;\r\n                        expectResize = 0;\r\n                        rmstart = null;\r\n\r\n                        if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas')[0] !== 'undefined')\r\n                            var technicalctx = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas')[0].getContext('2d');\r\n\r\n                        clear(technicalctx);\r\n                        $technicalcanvas.css({ 'cursor': 'auto' });\r\n                    });\r\n\r\n                    if (expectResize !== 0) {\r\n                        isResizeDrag = true;\r\n                        return;\r\n                    }\r\n                    if (e.which == 1 || e.which == 3) {\r\n                        removeAllContextMenu();\r\n                    }\r\n\r\n                    findSelectedRect.call($technicalcanvas, e);\r\n\r\n\r\n                    if (!mySel) {\r\n                        drawRectangle.call($technicalcanvas, e);\r\n                        invalidate();\r\n                    }\r\n                    else if (mySel && e.which == 3) {\r\n                        showContextMenuForSelectedRect();\r\n                        e.preventDefault();\r\n                        return false;\r\n                    }\r\n                    else if (mySel) {\r\n                        isDrag = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function myUp(e) {\r\n\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var $canvas = $currentPage.find('.' + canvasType + '-canvas');\r\n                var $technicalcanvas = $currentPage.find('.technical-canvas');\r\n                var diff = ($canvas.offset().left - $technicalcanvas.offset().left) / scale;\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n\r\n                var rm = {};\r\n                rm.x = p.x;\r\n                rm.y = p.y;\r\n\r\n                if (d !== 0)\r\n                    rm = rotateCoordinates(rm, d, $currentPage, canvasType);\r\n\r\n                rmx = rm.x;\r\n                rmy = rm.y;\r\n\r\n                if (parseInt($(e.target).closest('li').attr('data-page')) === currentpreview) {\r\n                    isDrag = false;\r\n                    isResizeDrag = false;\r\n                    expectResize = 0;\r\n                    if (started && rmstart === this) {\r\n                        drawRectangleUp.call(this, x0, y0, rmx, rmy, rmx, rmy, rmx, rmy);\r\n                        started = false;\r\n                    }\r\n\r\n                    rmstart = null;\r\n                }\r\n                else if (parseInt($(e.target).closest('li').attr('data-page')) !== currentpreview && started) {\r\n                    callbacks.viewerError && callbacks.viewerError(SR.errorWithDrawingOnSelectedPage);\r\n                    started = false;\r\n                }\r\n                else {\r\n                    callbacks.viewerInfo && callbacks.viewerInfo(SR.otherPageIsSelected);\r\n                }\r\n                started = false;\r\n            }\r\n\r\n            function myClick(e) {\r\n                var clickedPageNum = parseInt($(e.currentTarget).closest('li').attr('data-page'));\r\n\r\n                var oldaPageNum = currentpreview;\r\n\r\n                var $admintoolbar = $('.sn-additional-tools');\r\n                var selectedButton = $admintoolbar.find('.active').attr('data-canvastype');\r\n                //if (typeof selectedButton !== 'undefined' && clickedPageNum !== currentpreview) {\r\n                if (clickedPageNum !== currentpreview) {\r\n                    currentpreview = Number(clickedPageNum);\r\n                    currentpreviewWidth = $('#imageContainer' + clickedPageNum).attr('data-width');\r\n                    clearTimeout(setPageAccordingToScroll);\r\n\r\n\r\n                    if (!$('.sn-doc-thumbnails li[data-page=\"' + currentpreview + '\"]', $container).hasClass('active')) {\r\n                        if (typeof selectedButton !== 'undefined')\r\n                            canvasType = selectedButton;\r\n                        getDeletableAndLoadableCanvases(currentpreview);\r\n                        SetPreviewControls(currentpreview, true);\r\n                        $('.sn-doc-thumbnails li').removeClass('active');\r\n                        $('.sn-doc-thumbnails li[data-page=\"' + currentpreview + '\"]', $container).addClass('active');\r\n                        scrollToThumbnail(currentpreview);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function myDblClick(e) {\r\n                var $technicalcanvas = $(this);\r\n\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n\r\n                rmx = p.x;\r\n                rmy = p.y;\r\n\r\n                findSelectedRect.call($technicalcanvas, e);\r\n\r\n                if (mySel) {\r\n                    showContextMenuForSelectedRect();\r\n                }\r\n                else {\r\n                    var width = 200;\r\n                    var height = 50;\r\n                    var $canvas = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .' + canvasType + '-canvas');\r\n\r\n                    rmx -= ($canvas.offset().left - $technicalcanvas.offset().left);\r\n\r\n                    if (canvasType === \"redaction\" || canvasType == \"highlight\" && $('.sn-additional-tools .active').length > 0) {\r\n                        addRect(rmx - (width / 2), rmy - (height / 2), width + 10, height + 10, currentpreview, canvasType);\r\n                    }\r\n                    else if (canvasType === \"annotation\" || canvasType == \"Annotation\") {\r\n                        addRect(rmx, rmy, 200, 250, currentpreview, canvasType, '14pt', 'Arial', '#333', 'Normal', 'Normal', annotationDefaultText, 20);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function findSelectedRect(e) {\r\n                var $technicalcanvas = $(this);\r\n\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var $canvas = $currentPage.find('.' + canvasType + '-canvas');\r\n                var technicalctx = $currentPage.find('.technical-canvas')[0].getContext('2d');\r\n\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n\r\n                var degree = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    degree = parseInt($currentPage.attr('data-degree'));\r\n\r\n                if (degree !== 0)\r\n                    p = rotateCoordinates(p, degree, $currentPage, canvasType);\r\n\r\n                clear(technicalctx);\r\n                mySel = null;\r\n\r\n                for (var i = saveableshapes[canvasType].length; i--;) {\r\n                    if (parseInt(saveableshapes[canvasType][i].imageIndex) === currentpreview) {\r\n                        saveableshapes[canvasType][i].draw(technicalctx, 'black');\r\n\r\n                        var diff = ($canvas.offset().left - $technicalcanvas.offset().left) / scale;\r\n                        var imageData = technicalctx.getImageData(p.x - diff, p.y, 1, 1);\r\n                        var index = (p.x - diff + p.y * imageData.width) * 4;\r\n                        clear(technicalctx);\r\n\r\n                        if (imageData.data[3] > 0) {\r\n                            mySel = saveableshapes[canvasType][i];\r\n                            x0 = p.x - mySel.x;\r\n                            y0 = p.y - mySel.y;\r\n                            mySel.index = i;\r\n                            invalidate();\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            function showContextMenuForSelectedRect() {\r\n                shapeIndex = mySel.index;\r\n                var height = mySel.h;\r\n                var width = mySel.w;\r\n                var $canvas = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] canvas');\r\n                var contextMenuX = mySel.x + ($canvas.offset().left - $canvas.parent().offset().left) / scale;\r\n                var contextMenuY = mySel.y;\r\n\r\n                if (canvasType === \"redaction\" || canvasType === \"highlight\") {\r\n                    contextMenuX += width;\r\n                    buildContextMenu(canvasType, contextMenuX, contextMenuY, shapeIndex);\r\n                }\r\n                else if (canvasType === \"annotation\") {\r\n                    contextMenuX -= 130;\r\n                    contextMenuY -= 10;\r\n                    buildContextMenu(canvasType, contextMenuX, contextMenuY, shapeIndex, height, width + 20);\r\n                }\r\n            }\r\n\r\n            function invalidate() {\r\n                canvasValid = false;\r\n                if (saveableshapes.annotation.length > 0 || saveableshapes.redaction.length > 0 || saveableshapes.highlight.length > 0) {\r\n                    unsaved = true;\r\n                    callbacks.documentChanged && callbacks.documentChanged();\r\n                }\r\n            }\r\n\r\n            function calculateMousePos(e, $this, d) {\r\n\r\n                var x = e.pageX,\r\n                    y = e.pageY;\r\n\r\n                return {\r\n                    x: ((x - $this.offset().left + $this.scrollLeft()) / scale),\r\n                    y: ((y - $this.offset().top + $this.scrollTop()) / scale)\r\n                };\r\n            }\r\n\r\n            function calculateRectDimensions(x, y, x0, y0) {\r\n                return {\r\n                    x: Math.min(x, x0),\r\n                    y: Math.min(y, y0),\r\n                    w: Math.abs(x - x0),\r\n                    h: Math.abs(y - y0)\r\n                };\r\n            }\r\n\r\n            function drawRectangle(e) {\r\n                started = true;\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var p = calculateMousePos(e, $(this), d);\r\n                x0 = p.x;\r\n                y0 = p.y;\r\n            }\r\n\r\n            function drawRectangleMove(e) {\r\n                if (!started)\r\n                    return;\r\n\r\n                var $technicalcanvas = $(this);\r\n\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var technicalctx = $currentPage.find('.technical-canvas')[0].getContext('2d');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n                var r = calculateRectDimensions(p.x, p.y, x0, y0);\r\n\r\n                if (p.x > x0 && p.y > y0) { $technicalcanvas.css({ 'cursor': 'nw-resize' }); }\r\n                else if (p.x > x0 && p.y < y0) { $technicalcanvas.css({ 'cursor': 'ne-resize' }); }\r\n                else if (p.x < x0 && p.y > y0) { $technicalcanvas.css({ 'cursor': 'sw-resize' }); }\r\n                else if (p.x < x0 && p.y < y0) { $technicalcanvas.css({ 'cursor': 'se-resize' }); }\r\n\r\n\r\n                clear(technicalctx);\r\n                technicalctx.fillStyle = '#76C9F5';\r\n                technicalctx.strokeStyle = '#007dc6';\r\n                technicalctx.globalAlpha = 0.5;\r\n                technicalctx.fillRect(r.x, r.y, r.w, r.h);\r\n                technicalctx.strokeRect(r.x, r.y, r.w, r.h);\r\n            }\r\n\r\n            function drawRectangleUp(x0, y0, rmx, rmy) {\r\n                var $technicalcanvas = $(this);\r\n                var $canvas = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .' + canvasType + '-canvas');\r\n                var technicalctx = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas')[0].getContext('2d');\r\n\r\n                var ctype = getCanvasTypeByToolbar(); //[<?] ctype isn't 'undefined' if one of the annotation, highlight or redaction toolbar button is pushed\r\n\r\n                //if (editmode) {\r\n                if (ctype !== undefined) {\r\n                    var r = calculateRectDimensions(rmx, rmy, x0, y0);\r\n\r\n                    if (r.w >= 10 || r.h >= 10) {\r\n                        // Account for the difference between widths of different canvases\r\n                        var diff = ($canvas.offset().left - $technicalcanvas.offset().left) / scale;\r\n                        r.x -= diff;\r\n                        // Apply minimal width/height for annotations\r\n                        r.w = canvasType === \"annotation\" ? Math.max(r.w, 200) : r.w;\r\n                        r.h = canvasType === \"annotation\" ? Math.max(r.h, 250) : r.h;\r\n                        // Add the new shape\r\n                        if (canvasType === \"annotation\")\r\n                            addRect(r.x, r.y, r.w, r.h, currentpreview, canvasType, '14pt', 'Arial', '#333', 'Normal', 'Normal', annotationDefaultText, 20);\r\n                        else\r\n                            addRect(r.x, r.y, r.w, r.h, currentpreview, canvasType);\r\n                    }\r\n                }\r\n\r\n                started = false;\r\n                clear(technicalctx);\r\n                $technicalcanvas.css({ 'cursor': 'default' });\r\n            }\r\n\r\n            function getCanvasTypeByToolbar() {\r\n                return $('.sn-additional-tools').find('span.active').attr('data-canvastype');\r\n            }\r\n\r\n            function rubberBandZoom(e) {\r\n                if (!started)\r\n                    return;\r\n\r\n                var $technicalcanvas = $(this);\r\n                var $currentPage = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"]');\r\n\r\n                var technicalctx = $currentPage.find('.technical-canvas')[0].getContext('2d');\r\n\r\n                var d = 0;\r\n                if (typeof $currentPage.attr('data-degree') !== 'undefined')\r\n                    d = parseInt($currentPage.attr('data-degree'));\r\n\r\n                var p = calculateMousePos(e, $technicalcanvas, d);\r\n                var r = calculateRectDimensions(p.x, p.y, x0, y0);\r\n                setZoomLevel(Math.min(maxZoomLevel, containerWidth / r.w), r.x, r.y, $technicalcanvas, true);\r\n\r\n                clear(technicalctx);\r\n                $('.sn-icon-rubberband', $toolbarContainer).removeClass('active');\r\n                started = false;\r\n            }\r\n\r\n            function buildContextMenu(type, xScreen, yScreen, shapeIndex, height, width) {\r\n\r\n                var $technicalcanvas = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas');\r\n\r\n                if (parseInt(height) < 250)\r\n                    height = 250 * scale;\r\n                if (parseInt(width) < 300)\r\n                    width = 220 * scale;\r\n\r\n                var $contextMenu = $('<div class=\"sn-contextmenu\"></div>').css({\r\n                    'position': 'absolute',\r\n                    'top': yScreen,\r\n                    'left': xScreen,\r\n                    'z-index': 110,\r\n                    'height': height || 'auto',\r\n                    'width': width || 'auto'\r\n                }).on('click.snDocViewer', '.sn-annotation-delete,.sn-icon-delete', function () {\r\n                    removeRect(shapeIndex);\r\n                }).on('click.snDocViewer', '.sn-annotation-save', function () {\r\n                    saveText(shapeIndex);\r\n                }).on('click.snDocViewer', '.sn-annotation-cancel,.sn-icon-delete', removeAllContextMenu);\r\n\r\n                if (type === 'redaction' || type === 'highlight') {\r\n                    $contextMenu.html('<span title=\"' + SR.deleteText + '\" class=\"sn-icon sn-icon-delete\">' + SR.deleteText + '</span>').on('click.snDocViewer', '.sn-icon-delete', removeAllContextMenu);\r\n                }\r\n                else {\r\n                    $contextMenu.addClass('sn-annotation-contextmenu');\r\n\r\n                    var currentText = allshapes.annotation[shapeIndex].text;\r\n                    var fontFamily = allshapes.annotation[shapeIndex].fontFamily;\r\n                    var fontSize = allshapes.annotation[shapeIndex].fontSize;\r\n                    var fontColor = allshapes.annotation[shapeIndex].fontColor;\r\n                    var fontBold = allshapes.annotation[shapeIndex].fontBold;\r\n                    var fontItalic = allshapes.annotation[shapeIndex].fontItalic;\r\n                    var lineHeight = allshapes.annotation[shapeIndex].lineHeight;\r\n\r\n                    $contextMenu.append('\\\r\n                                        <div class=\"sn-edit-annotation-txtcolorcontainer\">\\\r\n                                            <div data-color=\"#007dc6\" class=\"sn-edit-annotation-txtcolor sn-edit-annotation-txtcolorblue\"></div>\\\r\n                                            <div data-color=\"#ed1c24\" class=\"sn-edit-annotation-txtcolor sn-edit-annotation-txtcolorred\"></div>\\\r\n                                            <div data-color=\"#39b54a\" class=\"sn-edit-annotation-txtcolor sn-edit-annotation-txtcolorgreen\"></div>\\\r\n                                            <div data-color=\"#f15a24\" class=\"sn-edit-annotation-txtcolor sn-edit-annotation-txtcolororange\"></div>\\\r\n                                            <div data-color=\"#333333\" class=\"sn-edit-annotation-txtcolor sn-edit-annotation-txtcolorblack\"></div>\\\r\n                                        </div>\\\r\n                                        <div class=\"machinator\"><select class=\"sn-edit-annotation-txtfont-select\">\\\r\n                                            <option value=\"Arial\">Arial</option>\\\r\n                                            <option value=\"Calibri\">Calibri</option>\\\r\n                                            <option value=\"Tahoma\">Tahoma</option>\\\r\n                                        </select></div>\\\r\n                                        <div class=\"machinator\"><select class=\"sn-edit-annotation-txtfontsize-select\">\\\r\n                                            <option value=\"8pt\">8pt</option>\\\r\n                                            <option value=\"9pt\">9pt</option>\\\r\n                                            <option value=\"10pt\">10pt</option>\\\r\n                                            <option value=\"12pt\">12pt</option>\\\r\n                                            <option value=\"14pt\">14pt</option>\\\r\n                                            <option value=\"18pt\">18pt</option>\\\r\n                                            <option value=\"24pt\">24pt</option>\\\r\n                                            <option value=\"36pt\">36pt</option>\\\r\n                                        </select></div>\\\r\n                                        <div class=\"sn-edit-annotation-txtfontstylerow\">\\\r\n                                            <div class=\"machinator\"><input type=\"checkbox\" id=\"annotation-italic\" class=\"sn-edit-annotation-italic\" />\\\r\n                                            <label for=\"annotation-italic\"><i>italic</i></label></div>\\\r\n                                            <div class=\"machinator\"><input type=\"checkbox\" class=\"sn-edit-annotation-bold\" id=\"annotation-bold\" />\\\r\n                                            <label for=\"annotation-bold\"><b>bold</b></label></div>\\\r\n                                        </div>');\r\n\r\n                    $('select.sn-edit-annotation-txtfont-select option[value=\"' + fontFamily + '\"]', $contextMenu).attr('selected', 'selected');\r\n                    $('select.sn-edit-annotation-txtfontsize-select option[value=\"' + fontSize + '\"]', $contextMenu).attr('selected', 'selected');\r\n                    $('.sn-edit-annotation-txtcolorcontainer div[data-color=\"' + colorToHex(fontColor) + '\"]', $contextMenu).addClass('selected');\r\n                    $('.sn-edit-annotation-bold', $contextMenu).prop('checked', (fontBold > 400 || fontBold == 'bold'));\r\n                    $('.sn-edit-annotation-italic', $contextMenu).prop('checked', fontItalic === 'italic');\r\n\r\n                    var $buttonContainer = $(\"<div class='buttonContainer'></div>\");\r\n                    var $editTextarea = $('<textarea>' + currentText + '</textarea>').appendTo($buttonContainer).attr('class', 'sn-edit-annotation-txtarea border-box').css({ 'font-family': fontFamily, 'font-size': fontSize, 'color': fontColor, 'font-weight': fontBold, 'font-style': fontItalic, 'line-heigt': lineHeight, 'height': (height - 140), 'width': '100%' });\r\n                    var $deleteButton = $('<span>' + SR.deleteText + '</span>').appendTo($buttonContainer).attr('class', 'okButton sn-annotation-delete');\r\n                    var $saveButton = $('<span>' + SR.saveText + '</span>').appendTo($buttonContainer).attr('class', 'okButton sn-annotation-save');\r\n                    var $cancelButton = $('<span>' + SR.cancelText + '</span>').appendTo($buttonContainer).attr('class', 'okButton sn-annotation-cancel');\r\n                    $buttonContainer.appendTo($contextMenu);\r\n\r\n                    $contextMenu.on('click.snDocViewer', '.sn-edit-annotation-txtcolor', function () {\r\n                        $('.sn-edit-annotation-txtcolor', $contextMenu).removeClass('selected');\r\n                        $editTextarea.css('color', $(this).addClass('selected').attr('data-color'));\r\n                    }).on('change.snDocViewer', 'select.sn-edit-annotation-txtfont-select', function () {\r\n                        $editTextarea.css('font-family', $(this).val());\r\n                    }).on('change.snDocViewer', 'select.sn-edit-annotation-txtfontsize-select', function () {\r\n                        $editTextarea.css('font-size', $(this).val());\r\n                    }).on('change.snDocViewer', 'input.sn-edit-annotation-italic', function () {\r\n                        $editTextarea.css('font-style', $(this).prop('checked') ? 'italic' : 'normal');\r\n                    }).on('change.snDocViewer', 'input.sn-edit-annotation-bold', function () {\r\n                        $editTextarea.css('font-weight', $(this).prop('checked') ? 'bold' : 'normal');\r\n                    });\r\n                }\r\n\r\n                $container.find(\"li.sn-docviewer-page\").css(\"z-index\", 0);\r\n                $technicalcanvas.parent().css(\"z-index\", 1);\r\n                $contextMenu.appendTo($technicalcanvas.parent());\r\n                callbacks.contextMenuShown && callbacks.contextMenuShown($contextMenu);\r\n                $contextMenu.find(\"textarea\").focus();\r\n            }\r\n\r\n            function colorToHex(color) {\r\n                if (color.substr(0, 1) === '#') {\r\n                    return color;\r\n                }\r\n                var digits = /(.*?)rgb\\((\\d+), (\\d+), (\\d+)\\)/.exec(color);\r\n\r\n                var red = parseInt(digits[2]);\r\n                var green = parseInt(digits[3]);\r\n                var blue = parseInt(digits[4]);\r\n\r\n                var rgb = blue || (green << 8) || (red << 16);\r\n                return digits[1] + '#' + rgb.toString(16);\r\n            }\r\n\r\n            function showShapesOnPages() {\r\n                var savedType = canvasType;\r\n                $.each(allshapes, function (t) {\r\n                    canvasType = t;\r\n                    mainDraw(true);\r\n                });\r\n                canvasType = savedType;\r\n                // Start the redraw interval\r\n\r\n                clearInterval(mainDraw);\r\n                setInterval(mainDraw, redrawInterval);\r\n            }\r\n\r\n            function saveText(shapeIndex) {\r\n                var _fontSizeSelect = $('select.sn-edit-annotation-txtfontsize-select');\r\n                var _fontSizeSelectVal = _fontSizeSelect.data(\"kendoDropDownList\") && _fontSizeSelect.data(\"kendoDropDownList\").value();\r\n\r\n                var fontSize = _fontSizeSelectVal || '14pt';\r\n                var fontFamily = $('.sn-edit-annotation-txtarea').css('font-family');\r\n                var fontColor = $('.sn-edit-annotation-txtarea').css('color');\r\n                var fontItalic = $('.sn-edit-annotation-txtarea').css('font-style');\r\n                var fontBold = $('.sn-edit-annotation-txtarea').css('font-weight');\r\n                var text = $('.sn-edit-annotation-txtarea').val();\r\n                var lineHeight = parseInt(fontSize);\r\n                allshapes.annotation[shapeIndex].fontColor = fontColor;\r\n                allshapes.annotation[shapeIndex].fontSize = fontSize;\r\n                allshapes.annotation[shapeIndex].fontFamily = fontFamily;\r\n                allshapes.annotation[shapeIndex].fontItalic = fontItalic;\r\n\r\n                allshapes.annotation[shapeIndex].fontBold = fontBold;\r\n                allshapes.annotation[shapeIndex].text = text;\r\n                allshapes.annotation[shapeIndex].lineHeight = lineHeight;\r\n\r\n                removeAllContextMenu();\r\n                invalidate();\r\n            }\r\n\r\n            function removeAllContextMenu() {\r\n                $('.sn-contextmenu', $container).remove();\r\n            }\r\n\r\n            function clearShapeSelections() {\r\n                mySel = null;\r\n                removeAllContextMenu();\r\n                if (typeof $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas')[0] !== 'undefined') {\r\n                    var technicalctx = $('.sn-docviewer-page[data-page=\"' + currentpreview + '\"] .technical-canvas')[0].getContext('2d');\r\n                    clear(technicalctx);\r\n                    mainDraw(true);\r\n                }\r\n            }\r\n\r\n            function clearMenuSelection($setActive) {\r\n                removeAllContextMenu();\r\n                $('.sn-docviewer-tools .sn-icon', $container).removeClass('active');\r\n                if ($setActive) {\r\n                    $setActive.addClass('active');\r\n                }\r\n            }\r\n\r\n            function saveShapes() {\r\n                var savable = {\r\n                    \"Shapes\": [\r\n                        { 'redactions': saveableshapes.redaction },\r\n                        { 'highlights': saveableshapes.highlight },\r\n                        { 'annotations': saveableshapes.annotation }\r\n                    ],\r\n                    \"PageAttributes\": pageAttributesObj\r\n                };\r\n                return savable;\r\n            }\r\n\r\n            function isLoaded(i) {\r\n                var that = $('.sn-docviewer-page[data-page=\"' + i + '\"] img');\r\n                that = $('.sn-thumbnail-page[data-page=\"' + i + '\"] img');\r\n                return that.attr('data-loaded');\r\n            }\r\n\r\n            function isCanvasesLoaded(i) {\r\n                var that = $('.sn-docviewer-page[data-page=\"' + i + '\"]');\r\n                return (that.children('canvas').length > 0);\r\n            }\r\n\r\n            function checkContainerHeight(w, h) {\r\n                $('.docpreview ul li').each(function () {\r\n                    $(this).css({ 'width': w, 'height': h });\r\n                });\r\n                $('.docpreview ul,.docpreview .zoomer').height(maxpreview * (h + 50));\r\n            }\r\n\r\n            function destroyPlugin() {\r\n                // Fire document closed handler\r\n                callbacks.documentClosed && callbacks.documentClosed();\r\n                $docpreview.children().remove();\r\n                // Unsubscribe from all events and remove all elements\r\n                // NOTE: jQuery's empty() and remove() will take care of unsubscribing from events, etc. so we don't need to bother with those\r\n                if (dataObj.isFullscreen()) {\r\n                    $(window).off('resize.snDocViewerFullscreen');\r\n                    // NOTE: empty() and remove() will take care of unsubscribing from events, etc.\r\n                    $(\".sn-docpreview-fullscreen-wrapper\").remove();\r\n                }\r\n                $(\"#sn-docpreview-print-iframe\").remove();\r\n                $pluginSubject.empty();\r\n                $(window).off(\".snDocViewer_\" + docViewerId);\r\n\r\n                // Remove main draw interval\r\n                clearInterval(mainDraw);\r\n\r\n                // Delete things from the API so that users can no longer mess with it\r\n                for (var prop in dataObj) {\r\n                    delete dataObj[prop];\r\n                }\r\n                // Forget the plugin subject\r\n                $pluginSubject.removeData('snDocViewer');\r\n                $pluginSubject = null;\r\n            }\r\n\r\n            function refreshViewer(pager, previews, thumbnails) {\r\n                refreshPageCount(pager, previews, thumbnails);\r\n\r\n            }\r\n\r\n            function refreshPageCount(pager, previews, thumbnails) {\r\n                var previewCount = 0;\r\n                if (typeof (options.getPC) === \"function\") {\r\n                    options.getPC(filePath).done(function (data) {\r\n                        var pc = data.d.PageCount;\r\n                        if (pc !== maxpreview)\r\n                            maxpreview = pc;\r\n                        if (pager)\r\n                            refreshPager();\r\n                        if (previews)\r\n                            refreshPreviews();\r\n                        if (thumbnails)\r\n                            refreshThumbnails();\r\n                    });\r\n                }\r\n            }\r\n\r\n            function refreshPager() {\r\n                $('#docpreviewpage').text(' / ' + maxpreview);\r\n                if (maxpreview < parseInt($('.sn-input-jumptopage').val())) {\r\n                    removeAllContextMenu();\r\n                    jumpDistance = Math.abs(maxpreview);\r\n                    getDeletableAndLoadableCanvases(maxpreview);\r\n                    SetPreviewControls(maxpreview);\r\n                }\r\n            }\r\n\r\n            function refreshPreviews() {\r\n\r\n                var $imageList = $('ul', $docpreview);\r\n                $imageList.html('');\r\n\r\n\r\n\r\n                if (typeof (options.getExistingPreviewImages) === \"function\") {\r\n                    options.getExistingPreviewImages().done(function (data) {\r\n                        thumbnailUrls = data.map(function (m) { return m.ThumbnailAvailable });\r\n                        existingPages = data;\r\n                        if (showthumbnails) {\r\n                            $thumbnailList.html('');\r\n                            createThumbnailContainersOnInterval(data, $thumbnailList);\r\n                        }\r\n\r\n\r\n\r\n                        createImageContainersOnInterval(data, $imageList);\r\n                        getDeletableAndLoadableCanvases(1, data);\r\n                        fitToWidth(data[0].Width);\r\n                        firstLoad = 0;\r\n\r\n                        $(window).on(\"unload.snDocViewer_\" + docViewerId, function () {\r\n                            callbacks.documentClosed && callbacks.documentClosed();\r\n                        });\r\n\r\n                        $docpreview.on('touchstart', function () {\r\n                            touched = true;\r\n                        });\r\n\r\n                        if (reactToResize) {\r\n                            var onResized = function () {\r\n                                var isFullscreen = dataObj.isFullscreen();\r\n\r\n                                //window resize delay\r\n                                setTimeout(function () {\r\n                                    if (isFullscreen) {\r\n                                        // In fullscreen mode\r\n                                        containerHeight = $(window).height() - $docpreview.offset().top;\r\n                                        containerWidth = $(window).width();\r\n                                    }\r\n                                    else {\r\n                                        // In normal (non-fullscreen) mode\r\n                                        containerHeight = (typeof (options.containerHeight) === \"function\" ? options.containerHeight() : options.containerHeight) || $pluginSubject.height();\r\n                                        containerWidth = (typeof (options.containerWidth) === \"function\" ? options.containerWidth() : options.containerWidth) || $pluginSubject.width();\r\n                                    }\r\n                                    $docpreview.width(containerWidth).height(containerHeight);\r\n                                }, 300);\r\n                            };\r\n                            $(window).on(\"resize.snDocViewer_\" + docViewerId, onResized);\r\n                            // Resize on tablets\r\n                            $(window).on(\"orientationchange.snDocViewer_\" + docViewerId, onResized);\r\n                        }\r\n                        // Call document opened callback\r\n                        callbacks.documentOpened && callbacks.documentOpened();\r\n\r\n                        if (scale !== 1 && scale <= maxZoomLevel && scale >= minZoomLevel && !touch) {\r\n                            setZoomLevel(scale);\r\n                        }\r\n\r\n\r\n\r\n                        if (touch) {\r\n\r\n                            var rate = containerWidth / imgWidth;\r\n                            if (!fitContainer)\r\n                                rate = scale;\r\n\r\n                            scale = rate;\r\n\r\n                            $('.docpreview').ready(function () {\r\n\r\n                                var rate = $('body').width() / imgWidth;\r\n\r\n                                var myScroll = new IScroll('#docpreview', {\r\n                                    zoom: true,\r\n                                    scrollX: true,\r\n                                    scrollY: true,\r\n                                    mouseWheel: true,\r\n                                    zoomMin: minZoomLevel,\r\n                                    zoomMax: maxZoomLevel,\r\n                                    startZoom: rate\r\n                                });\r\n\r\n                                enterFullscreenMode();\r\n\r\n                                myScroll.on('scrollEnd', updatePosition);\r\n\r\n                                $('.sn-icon-originalsize').on('click', function () {\r\n                                    myScroll.zoom(1);\r\n                                });\r\n\r\n                                $('.sn-icon-fittowindow').on('click', function () {\r\n                                    var containerWidth, fitToWidthScale;\r\n                                    containerWidth = myScroll.wrapperWidth;\r\n                                    fitToWidthScale = (containerWidth / imgWidth).toFixed(2);\r\n                                    myScroll.zoom(fitToWidthScale);\r\n                                });\r\n\r\n\r\n                            });\r\n\r\n                        }\r\n\r\n                        $docpreview.scrollTop(0);\r\n\r\n                        unsaved = false;\r\n\r\n                        $docpreview.scroll($.debounce(500, function () {\r\n                            if ($('.sn-docpreview-desktop:hover').length !== 0) {\r\n                                setPageAccordingToScroll(true);\r\n                            }\r\n                        }));\r\n\r\n                        $('.sn-doc-thumbnails').scroll($.debounce(250, function () {\r\n                            scrollThumbnails();\r\n                        }));\r\n\r\n\r\n                        $thumbnailList.on('click.snDocViewer', '.sn-thumbnail-page', function () {\r\n                            if ($(this).children('img').attr('data-loaded') === \"true\") {\r\n                                var thumbnailNum = parseInt($(this).attr('data-page'));\r\n                                removeAllContextMenu();\r\n\r\n                                if (newPage(pageNum)) {\r\n                                    demandNewPage(pageNum);\r\n                                    setDataTops(pageNum);\r\n                                }\r\n\r\n                                getDeletableAndLoadableCanvases(thumbnailNum);\r\n                                SetPreviewControls(thumbnailNum);\r\n                            }\r\n                        });\r\n\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n            function refreshThumbnails() {\r\n                if (showthumbnails) {\r\n                    $('.sn-doc-thumbnails').html('');\r\n                    $('.sn-doc-thumbnails').append('<ul></ul>');\r\n                    $thumbnailList = $('ul', $('.sn-doc-thumbnails'));\r\n                    for (var i = 0; i < parseInt(maxpreview); i++) {\r\n                        $thumbnailList.append('<li class=\"sn-thumbnail-page\" data-page=\"' + (i + 1) + '\" style=\"max-width: 95px;max-height: 150px;margin-right: 20px;\"><img src=\"' + placeholderImgPath + '\" width=\"32\" data-loaded=\"false\" /><span>Page ' + (i + 1) + '</span></li>');\r\n                    }\r\n                    deleteUnnecessaryThumbnails(showable);\r\n                    if (typeof (options.getThumbnail) === \"function\") {\r\n                        $.each(showable, function (i, item) {\r\n                            options.getThumbnail(item).done(function (data) {\r\n                                displayThumbnail(item, data.PreviewAvailable);\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    hthumbnails = thumbnails;\r\n                }\r\n\r\n                $docpreview.on('click.snDocViewer', '.sn-docviewer-page', function () {\r\n                    if ($(this).children('img').attr('data-loaded') === 'true') {\r\n                        var pNum = parseInt($(this).attr('data-page'));\r\n                        removeAllContextMenu();\r\n\r\n                        getDeletableAndLoadableCanvases(pNum);\r\n                        SetPreviewControls(pNum);\r\n                    }\r\n                });\r\n\r\n                $thumbnailList.on('click.snDocViewer', '.sn-thumbnail-page', function () {\r\n                    if ($(this).children('img').attr('data-loaded') === \"true\") {\r\n                        var thumbnailNum = parseInt($(this).attr('data-page'));\r\n                        removeAllContextMenu();\r\n\r\n                        if (newPage(pageNum)) {\r\n                            demandNewPage(pageNum);\r\n                            setDataTops(pageNum);\r\n                        }\r\n\r\n                        getDeletableAndLoadableCanvases(thumbnailNum);\r\n                        SetPreviewControls(thumbnailNum);\r\n                    }\r\n                });\r\n            }\r\n\r\n            function refreshEditorButtons(buttonArray) {\r\n                var $editortools = $('.sn-additional-tools');\r\n                $.each(buttonArray, function (i, item) {\r\n                    $('.sn-additional-tools').find('span.sn-icon').each(function () {\r\n                        var that = $(this);\r\n                        if (that.attr('data-canvastype') === item.name) {\r\n                            $.each(item.additionalProps, function (pi, pitem) {\r\n                                that.attr(pi, pitem);\r\n                            });\r\n                            //that.removeClass('active');\r\n                            destroyCanvasFeature();\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            function adminbutton(name, buttonAdditonalProperties) {\r\n                this.name = name;\r\n                this.additionalProps = buttonAdditonalProperties;\r\n            }\r\n\r\n            function disableEditorButtons() {\r\n                var buttonArray = [];\r\n                buttonArray[0] = new adminbutton('annotation', { disabled: true });\r\n                buttonArray[1] = new adminbutton('highlight', { disabled: true });\r\n                buttonArray[2] = new adminbutton('redaction', { disabled: true });\r\n                refreshEditorButtons(buttonArray);\r\n            }\r\n\r\n            function enableEditorButtons() {\r\n                var buttonArray = [];\r\n                buttonArray[0] = new adminbutton('annotation', { disabled: false });\r\n                buttonArray[1] = new adminbutton('highlight', { disabled: false });\r\n                buttonArray[2] = new adminbutton('redaction', { disabled: false });\r\n                refreshEditorButtons(buttonArray);\r\n            }\r\n\r\n            function saveablePage(pageNum, options) {\r\n                this.pageNum = pageNum;\r\n                this.options = options;\r\n            }\r\n\r\n            //rotation\r\n\r\n            function rotate(degree, pageNumber, isMultiple, notClicked) {\r\n                var $currentPage = $('.sn-docviewer-page[data-page=' + pageNumber + ']');\r\n                var currentDegree = parseInt($currentPage.attr('data-degree'));\r\n                if (currentDegree === null || typeof $currentPage.attr('data-degree') === 'undefined')\r\n                    currentDegree = 0;\r\n\r\n\r\n                if ($currentPage.hasClass('rotated') && pageNumber === currentpreview) {\r\n                    if (degree !== 0) {\r\n                        $currentPage.attr('data-degree', degree);\r\n                        disableEditorButtons();\r\n                    }\r\n                    else {\r\n                        $currentPage.removeClass('rotated');\r\n                        $currentPage.removeAttr('data-degree');\r\n                        enableEditorButtons();\r\n                    }\r\n                }\r\n                else {\r\n                    $currentPage.addClass('rotated');\r\n                    $currentPage.attr('data-degree', degree);\r\n                    newDegree = degree;\r\n                    if (degree !== 0 && pageNumber === currentpreview)\r\n                        disableEditorButtons();\r\n                }\r\n                rotateImage($currentPage, isMultiple);\r\n                if (!notClicked)\r\n                    rotateCanvases($currentPage);\r\n\r\n                recalculatePageTops(pageNumber);\r\n\r\n                //if (isFirstLoad)\r\n                //    rotateThumbnail(pageNumber, computeDegree(currentDegree, degree));\r\n            }\r\n\r\n            function computeDegree(currentDegree, degree) {\r\n                var rotationDegree = currentDegree + degree;\r\n                if (rotationDegree > 180) {\r\n                    rotationDegree -= 360;\r\n                }\r\n                else if (rotationDegree < -91) {\r\n                    rotationDegree += 360;\r\n                }\r\n                return rotationDegree;\r\n            }\r\n\r\n            function rotateImage(p, isMultiple, lastPageNumber) {\r\n                if (isMultiple || parseInt(p.attr('data-page')) === currentpreview) {\r\n                    callbacks.loadingStarted && callbacks.loadingStarted();\r\n                }\r\n                var d = p.attr('data-degree');\r\n                if (typeof d === 'undefined' || d === null)\r\n                    d = 0;\r\n                else\r\n                    d = parseInt(d);\r\n\r\n                var $img = p.find('img');\r\n                $img.attr('src', modifyPageImgHref($img.attr('src'), d));\r\n\r\n                $img.imageLoad(function () {\r\n                    if (d === 90 || d === -90 || d === 270) {\r\n                        $img.css({ 'margin': '120px 0' });\r\n                    }\r\n                    else {\r\n                        $img.css({ 'margin': '0 120px' });\r\n                    }\r\n\r\n                    resizeContainer(p);\r\n                    if (!isMultiple || (isMultiple && numberOfPagesForRotation === 1))\r\n                        callbacks.loadingEnded && callbacks.loadingEnded();\r\n                    else if (numberOfPagesForRotation !== 0)\r\n                        numberOfPagesForRotation -= 1;\r\n                });\r\n            }\r\n\r\n            function resizeContainer(p) {\r\n                var d = p.attr('data-degree');\r\n                if (typeof d === 'undefined' || d === null)\r\n                    d = 0;\r\n                else\r\n                    d = parseInt(d);\r\n                var $img = p.find('img');\r\n                var width = $img.width();\r\n                var height = $img.height();\r\n                var leftMargin;\r\n\r\n                if (d === 90 || d === -90 || d === 270) {\r\n                    leftMargin = Math.abs(p.closest('ul').width() - height) / 2;\r\n                    if (height > width)\r\n                        leftMargin = Math.abs(p.closest('ul').width() - width) / 2;\r\n                    p.removeAttr('style');\r\n                    p.css({\r\n                        'margin': '0px auto 50px',\r\n                        'width': parseInt(p.attr('data-height')),\r\n                        'height': parseInt(p.attr('data-width')) + 240\r\n                    });\r\n                    if (width < height)\r\n                        p.closest('ul').width(height);\r\n                    else\r\n                        p.closest('ul').width(parseInt(p.attr('data-height')) + 240);\r\n                }\r\n                else {\r\n                    leftMargin = (p.closest('ul').width() - p.width()) / 2;\r\n                    if (height > width)\r\n                        leftMargin = Math.abs(p.closest('ul').width() - height) / 2;\r\n                    p.removeAttr('style');\r\n                    if (height < width) {\r\n                        p.css({\r\n                            'margin': '0px auto 50px',\r\n                            'width': height + 240,\r\n                            'height': width\r\n                        });\r\n                    }\r\n                    else {\r\n                        p.css({\r\n                            'margin': '0px auto 50px',\r\n                            'width': width + 240,\r\n                            'height': height\r\n                        });\r\n                    }\r\n\r\n                    if (width < height)\r\n                        p.closest('ul').width(height);\r\n                    else\r\n                        p.closest('ul').width(width + 240);\r\n                }\r\n\r\n            }\r\n\r\n            function rotateCanvases(p) {\r\n                var d = p.attr('data-degree');\r\n                if (typeof d === 'undefined' || d === null)\r\n                    d = 0;\r\n                else\r\n                    d = parseInt(d);\r\n\r\n                var translation = 'rotate(' + d + 'deg)';\r\n\r\n                var $img = p.find('img');\r\n                var imgWidth = parseInt(p.attr('data-width'));\r\n                var imgHeight = parseInt(p.attr('data-height'));\r\n                var top, left;\r\n\r\n                switch (d) {\r\n                    case 0:\r\n                        if (imgHeight < imgWidth) { //rotation 0 landscape\r\n\r\n                        }\r\n                        else {                      //rotation 0 portrait\r\n\r\n                        }\r\n                        break;\r\n                    case -90:\r\n                        if (imgHeight < imgWidth) { //rotation -90 landscape\r\n                            left = -Math.abs(imgHeight - imgWidth) / 2;\r\n                            top = -Math.abs(imgHeight - imgWidth) / 2;\r\n                            translation = 'rotate(' + d + 'deg) translate(' + (top - 120) + 'px, ' + (left - 120) + 'px)';\r\n                        }\r\n                        else {                      //rotation -90 portrait\r\n                            top = Math.abs(imgHeight - imgWidth) / 2;\r\n                            left = Math.abs(imgWidth - imgHeight) / 2;\r\n                            translation = 'rotate(' + d + 'deg) translate(' + (top - 120) + 'px, ' + (left - 120) + 'px)';\r\n                        }\r\n                        break;\r\n                    case 180:\r\n                        if (imgHeight < imgWidth) { //rotation 180 landscape\r\n                            left = (imgHeight - (imgWidth) / 2) - 35;\r\n                            translation = 'rotate(' + d + 'deg)';\r\n                        }\r\n                        else {                      //rotation 180 portrait\r\n                            left = -(imgHeight - (imgWidth + 200)) / 2 - 120;\r\n                            translation = 'rotate(' + d + 'deg)';\r\n                        }\r\n                        break;\r\n                    case 90:\r\n                        if (imgHeight < imgWidth) {  //rotation 90 landscape\r\n                            left = Math.abs(imgHeight - imgWidth) / 2;\r\n                            top = Math.abs(imgHeight - imgWidth) / 2;\r\n                            translation = 'rotate(' + d + 'deg) translate(' + (top + 120) + 'px, ' + (left + 120) + 'px)';\r\n                        }\r\n                        else {                      //rotation 90 portrait\r\n\r\n                            top = -Math.abs(imgHeight - imgWidth) / 2;\r\n                            left = -Math.abs(imgWidth - imgHeight) / 2;\r\n                            translation = 'rotate(' + d + 'deg) translate(' + (top + 120) + 'px, ' + (left + 120) + 'px)';\r\n                        }\r\n                        break;\r\n                }\r\n\r\n\r\n                p.children('canvas:not(\".technical-canvas\")').css({\r\n                    '-ms-transform': translation,\r\n                    '-webkit-transform': translation,\r\n                    'transform': translation,\r\n                    '-moz-transform': translation,\r\n                    '-o-transform': translation\r\n                });\r\n                var twidth = p.children('canvas.technical-canvas').width(),\r\n                    theight = p.children('canvas.technical-canvas').height();\r\n                p.children('canvas.technical-canvas').css({\r\n                    width: theight,\r\n                    height: twidth\r\n                });\r\n            }\r\n\r\n            function modifyPageImgHref(href, degree) {\r\n                var newHref = href;\r\n                if (href.indexOf('?') > -1) {\r\n                    if (href.indexOf('rotation') > -1) {\r\n                        var rotationDegreeIndex = href.indexOf('rotation') + 9;\r\n                        newHref = newHref.substr(0, rotationDegreeIndex) + degree;\r\n                    }\r\n                    else {\r\n                        newHref += '&rotation=' + degree;\r\n                    }\r\n                }\r\n                else {\r\n                    newHref += '?rotation=' + degree;\r\n                }\r\n\r\n                return newHref;\r\n            }\r\n\r\n            function rotateThumbnail(d, p) {\r\n                var that = $('.sn-thumbnail-page[data-page=\"' + p + '\"]');\r\n                that.attr('data-degree', d);\r\n                var height;\r\n\r\n                var $img = that.children('img');\r\n\r\n                var w = $img.width();\r\n                var h = $img.height();\r\n\r\n                var thumbnailPath = $img.attr('src');\r\n\r\n                var a = w;\r\n                w = h;\r\n                h = a;\r\n\r\n\r\n                thumbnailPath = appendPreviewPostfix(thumbnailPath, !noWatermark, addNoChachePostfix);\r\n                thumbnailPath = modifyPageImgHref(thumbnailPath, d);\r\n                $img.attr('src', thumbnailPath);\r\n                $img.attr('data-loaded', true);\r\n\r\n                if (d === 90 || d === -90) {\r\n                    $img.width(parseInt(that.attr('data-height'))).height(parseInt(that.attr('data-width')));\r\n                    that.width(parseInt(that.attr('data-height')) + 2);\r\n                    that.height(parseInt(that.attr('data-width')) + 40);\r\n                }\r\n                else {\r\n                    $img.width(parseInt(that.attr('data-width'))).height(parseInt(that.attr('data-height')));\r\n                    that.width(parseInt(that.attr('data-width')) + 2);\r\n                    that.height(parseInt(that.attr('data-height')) + 40);\r\n                }\r\n\r\n\r\n            }\r\n\r\n            function setRotation($img, d, l) {\r\n                $img.css({\r\n                    '-ms-transform': 'rotate(' + d + 'deg) translate(' + l + ')',\r\n                    '-webkit-transform': 'rotate(' + d + 'deg) translate(' + l + ')',\r\n                    'transform': 'rotate(' + d + 'deg) translate(' + l + ')',\r\n                    '-moz-transform': 'rotate(' + d + 'deg) translate(' + l + ')',\r\n                    '-o-transform': 'rotate(' + d + 'deg) translate(' + l + ')'\r\n                });\r\n            }\r\n\r\n            function saveRotation(p, d) {\r\n                var savedIndex = checkIfItsSavedAlreeady(p);\r\n                if (savedIndex > -1) {\r\n                    pageAttributesObj[savedIndex].options.degree = d;\r\n                }\r\n                else {\r\n                    pageAttributesObj.push(new saveablePage(p, { 'degree': d }));\r\n                }\r\n            }\r\n\r\n            function checkIfItsSavedAlreeady(p) {\r\n                for (var i = 0; i < pageAttributesObj.length; i++) {\r\n                    if (parseInt(pageAttributesObj[i].pageNum) === parseInt(p)) {\r\n                        return i;\r\n                    }\r\n                    else if (parseInt(pageAttributesObj[i].pageNum) === parseInt(p) && i === pageAttributesObj.length - 1) {\r\n                        return -1;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            function recalculatePageTops(p) {\r\n                for (var i = p; i < $('.sn-docviewer-page').length + 1; i++) {\r\n                    var $li = $('.sn-docviewer-page').eq(i);\r\n                    $li.attr('data-top', getTopOfThePage(i + 1));\r\n                }\r\n                callbacks.rotationEnded && callbacks.rotationEnded($('.sn-viewer-rotate span.saveActive'));\r\n            }\r\n\r\n            Array.prototype.allValuesSame = function () {\r\n\r\n                for (var i = 1; i < this.length; i++) {\r\n                    if (this[i].options.degree !== this[0].options.degree)\r\n                        return false;\r\n                }\r\n\r\n                return true;\r\n            }\r\n\r\n            $.fn.imageLoad = function (fn) {\r\n                this.load(fn);\r\n                this.each(function () {\r\n                    if (this.complete && this.naturalWidth !== 0) {\r\n                        $(this).trigger('load');\r\n                    }\r\n                });\r\n            }\r\n\r\n            $.fn.canvasLoad = function (fn) {\r\n                this.load(fn);\r\n                this.each(function () {\r\n                    if (this.complete && this.width !== 0) {\r\n                        $(this).trigger('load');\r\n                    }\r\n                });\r\n            }\r\n\r\n            $.fn.insertIndex = function (i, $el) {\r\n                // The element we want to swap with\r\n                var $target = $el.children().eq(i);\r\n\r\n                if ($target.length === 0)\r\n                    $el.append(this);\r\n\r\n                // Determine the direction of the appended index so we know what side to place it on\r\n                else if (this.index() > i) {\r\n                    $target.before(this);\r\n                } else {\r\n                    $target.after(this);\r\n                }\r\n\r\n                return this;\r\n            };\r\n\r\n            //helper method to get the proper position of an element\r\n            $.fn.aPosition = function () {\r\n                thisLeft = this.offset().left;\r\n                thisTop = this.offset().top;\r\n                thisParent = this.parent();\r\n\r\n                parentLeft = thisParent.offset().left;\r\n                parentTop = thisParent.offset().top;\r\n\r\n                return {\r\n                    left: thisLeft - parentLeft,\r\n                    top: thisTop - parentTop\r\n                };\r\n            };\r\n\r\n            // Store an object with methods, attached to the element so that users of the plugin can manipulate it from the outside\r\n            var dataObj = {\r\n                // Sets the current zoom level of the viewer.\r\n                // Parameters: newLevel, x0, y0, $rel\r\n                setZoomLevel: setZoomLevel,\r\n\r\n                // Removes all context menu related to this plugin from the DOM\r\n                removeContextMenu: removeAllContextMenu,\r\n\r\n                // Enters fullscreen mode\r\n                enterFullscreenMode: enterFullscreenMode,\r\n\r\n                // Exits fullscreen mode\r\n                exitFullscreenMode: exitFullscreenMode,\r\n\r\n                // Saves shapes for the current document\r\n                //TODO: saveShapes: saveShapes,\r\n\r\n                // Destroys the current plugin instance\r\n                destroy: destroyPlugin,\r\n\r\n                // Tries to bring up the browser's print dialog for the current document\r\n                //TODO: printDocument: printDocument,\r\n\r\n                // Gets all shapes for the current document\r\n                getAllShapes: function () { return allshapes; },\r\n\r\n                // Scrolls the viewport horizontally\r\n                scrollViewportLeft: function (val) { $docpreview.scrollLeft(val); },\r\n\r\n                // Scrolls the viewport vertically\r\n                scrollViewportTop: function (val) { $docpreview.scrollTop(val); },\r\n\r\n                // Tells if there are unsaved changes for the current document\r\n                isUnsaved: function () { return unsaved; },\r\n\r\n                // Sets unsaved property\r\n                setUnsaved: function (isUnsaved) { unsaved = isUnsaved; },\r\n\r\n                // Tells if the viewer is in fullscreen mode\r\n                isFullscreen: function () { return $container.parent().hasClass(\"sn-docpreview-fullscreen-wrapper\"); },\r\n\r\n                // Tells if watermarking is switched on\r\n                isWatermarked: function () { return $('.sn-icon-nowatermark').length > 0 },\r\n\r\n                // Gets the current zoom level of the viewer\r\n                zoomLevel: function () { return scale; },\r\n\r\n                // Gets the container DOM element of the viewer\r\n                getContainer: function () { return $container; },\r\n\r\n                // Gets the viewport element of the viewer\r\n                getViewport: function () { return $docpreview; },\r\n\r\n                // Gets the identifier of this viewer\r\n                getViewerId: function () { return docViewerId; },\r\n\r\n                // Schedules a redraw for the viewer\r\n                scheduleRedraw: function () { invalidate(); },\r\n\r\n                // Changes the currently displayed page in the viewer\r\n                changePage: SetPreviewControls,\r\n\r\n                // Gets the current page the viewer is on\r\n                currentPage: function () { return currentpreview; },\r\n\r\n                // Gets number of the called page\r\n                calledPage: function () { return pageNum; },\r\n\r\n                // Gets the number of pages the current document has\r\n                pageCount: function () { return maxpreview; },\r\n\r\n                //Gets the number of the loaded preview pages (array)\r\n                loadedImages: function () { return hpages; },\r\n\r\n                // Tells when a preview page image is loaded\r\n                pageIsLoaded: isLoaded,\r\n\r\n                // Tells when all canvases of a preview page are loaded\r\n                canvasesAreLoaded: isCanvasesLoaded,\r\n\r\n                saveShapes: saveShapes,\r\n\r\n                setPageAccordingToScroll: setPageAccordingToScroll,\r\n\r\n                appendPreviewPostfix: appendPreviewPostfix,\r\n\r\n                refreshViewer: refreshViewer,\r\n\r\n                refreshEditorButtons: refreshEditorButtons\r\n\r\n            };\r\n\r\n\r\n\r\n            // Initialize the plugin when the document is ready\r\n            $(initializeDocViewerPlugin);\r\n            // Set the data object (this will serve as the public API)\r\n            $pluginSubject.data('snDocViewer', dataObj);\r\n            // Maintain jQuery chainability\r\n            return $pluginSubject;\r\n        }\r\n    });\r\n})(jQuery);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/docviewer.js\n// module id = 68\n// module chunks = 0","/*!\r\n * jQuery throttle / debounce - v1.1 - 3/7/2010\r\n * http://benalman.com/projects/jquery-throttle-debounce-plugin/\r\n *\r\n * Copyright (c) 2010 \"Cowboy\" Ben Alman\r\n * Dual licensed under the MIT and GPL licenses.\r\n * http://benalman.com/about/license/\r\n */\r\n\r\n// Script: jQuery throttle / debounce: Sometimes, less is more!\r\n//\r\n// *Version: 1.1, Last updated: 3/7/2010*\r\n//\r\n// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/\r\n// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/\r\n// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js\r\n// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)\r\n//\r\n// About: License\r\n//\r\n// Copyright (c) 2010 \"Cowboy\" Ben Alman,\r\n// Dual licensed under the MIT and GPL licenses.\r\n// http://benalman.com/about/license/\r\n//\r\n// About: Examples\r\n//\r\n// These working examples, complete with fully commented code, illustrate a few\r\n// ways in which this plugin can be used.\r\n//\r\n// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/\r\n// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/\r\n//\r\n// About: Support and Testing\r\n//\r\n// Information about what version or versions of jQuery this plugin has been\r\n// tested with, what browsers it has been tested in, and where the unit tests\r\n// reside (so you can test it yourself).\r\n//\r\n// jQuery Versions - none, 1.3.2, 1.4.2\r\n// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.\r\n// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/\r\n//\r\n// About: Release History\r\n//\r\n// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks\r\n//       executed later than they should. Reworked a fair amount of internal\r\n//       logic as well.\r\n// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over\r\n//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the\r\n//       no_trailing throttle parameter and debounce functionality.\r\n//\r\n// Topic: Note for non-jQuery users\r\n//\r\n// jQuery isn't actually required for this plugin, because nothing internal\r\n// uses any jQuery methods or properties. jQuery is just used as a namespace\r\n// under which these methods can exist.\r\n//\r\n// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist\r\n// when this plugin is loaded, the method described below will be created in\r\n// the `Cowboy` namespace. Usage will be exactly the same, but instead of\r\n// $.method() or jQuery.method(), you'll need to use Cowboy.method().\r\n\r\n(function(window,undefined, $){\r\n    '$:nomunge'; // Used by YUI compressor.\r\n\r\n    // Since jQuery really isn't required for this plugin, use `jQuery` as the\r\n    // namespace only if it already exists, otherwise use the `Cowboy` namespace,\r\n    // creating it if necessary.\r\n    var $ = $ || window.jQuery || window.Cowboy || ( window.Cowboy = {} ),\r\n\r\n        // Internal method reference.\r\n        jq_throttle;\r\n\r\n    // Method: jQuery.throttle\r\n    //\r\n    // Throttle execution of a function. Especially useful for rate limiting\r\n    // execution of handlers on events like resize and scroll. If you want to\r\n    // rate-limit execution of a function to a single time, see the\r\n    // <jQuery.debounce> method.\r\n    //\r\n    // In this visualization, | is a throttled-function call and X is the actual\r\n    // callback execution:\r\n    //\r\n    // > Throttled with `no_trailing` specified as false or unspecified:\r\n    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\r\n    // > X    X    X    X    X    X        X    X    X    X    X    X\r\n    // >\r\n    // > Throttled with `no_trailing` specified as true:\r\n    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\r\n    // > X    X    X    X    X             X    X    X    X    X\r\n    //\r\n    // Usage:\r\n    //\r\n    // > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );\r\n    // >\r\n    // > jQuery('selector').bind( 'someevent', throttled );\r\n    // > jQuery('selector').unbind( 'someevent', throttled );\r\n    //\r\n    // This also works in jQuery 1.4+:\r\n    //\r\n    // > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );\r\n    // > jQuery('selector').unbind( 'someevent', callback );\r\n    //\r\n    // Arguments:\r\n    //\r\n    //  delay - (Number) A zero-or-greater delay in milliseconds. For event\r\n    //    callbacks, values around 100 or 250 (or even higher) are most useful.\r\n    //  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is\r\n    //    true, callback will only execute every `delay` milliseconds while the\r\n    //    throttled-function is being called. If no_trailing is false or\r\n    //    unspecified, callback will be executed one final time after the last\r\n    //    throttled-function call. (After the throttled-function has not been\r\n    //    called for `delay` milliseconds, the internal counter is reset)\r\n    //  callback - (Function) A function to be executed after delay milliseconds.\r\n    //    The `this` context and all arguments are passed through, as-is, to\r\n    //    `callback` when the throttled-function is executed.\r\n    //\r\n    // Returns:\r\n    //\r\n    //  (Function) A new, throttled, function.\r\n\r\n    $.throttle = jq_throttle = function( delay, no_trailing, callback, debounce_mode ) {\r\n        // After wrapper has stopped being called, this timeout ensures that\r\n        // `callback` is executed at the proper times in `throttle` and `end`\r\n        // debounce modes.\r\n        var timeout_id,\r\n\r\n            // Keep track of the last time `callback` was executed.\r\n            last_exec = 0;\r\n\r\n        // `no_trailing` defaults to falsy.\r\n        if ( typeof no_trailing !== 'boolean' ) {\r\n            debounce_mode = callback;\r\n            callback = no_trailing;\r\n            no_trailing = undefined;\r\n        }\r\n\r\n        // The `wrapper` function encapsulates all of the throttling / debouncing\r\n        // functionality and when executed will limit the rate at which `callback`\r\n        // is executed.\r\n        function wrapper() {\r\n            var that = this,\r\n                elapsed = +new Date() - last_exec,\r\n                args = arguments;\r\n\r\n            // Execute `callback` and update the `last_exec` timestamp.\r\n            function exec() {\r\n                last_exec = +new Date();\r\n                callback.apply( that, args );\r\n            };\r\n\r\n            // If `debounce_mode` is true (at_begin) this is used to clear the flag\r\n            // to allow future `callback` executions.\r\n            function clear() {\r\n                timeout_id = undefined;\r\n            };\r\n\r\n            if ( debounce_mode && !timeout_id ) {\r\n                // Since `wrapper` is being called for the first time and\r\n                // `debounce_mode` is true (at_begin), execute `callback`.\r\n                exec();\r\n            }\r\n\r\n            // Clear any existing timeout.\r\n            timeout_id && clearTimeout( timeout_id );\r\n\r\n            if ( debounce_mode === undefined && elapsed > delay ) {\r\n                // In throttle mode, if `delay` time has been exceeded, execute\r\n                // `callback`.\r\n                exec();\r\n\r\n            } else if ( no_trailing !== true ) {\r\n                // In trailing throttle mode, since `delay` time has not been\r\n                // exceeded, schedule `callback` to execute `delay` ms after most\r\n                // recent execution.\r\n                //\r\n                // If `debounce_mode` is true (at_begin), schedule `clear` to execute\r\n                // after `delay` ms.\r\n                //\r\n                // If `debounce_mode` is false (at end), schedule `callback` to\r\n                // execute after `delay` ms.\r\n                timeout_id = setTimeout( debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay );\r\n            }\r\n        };\r\n\r\n        // Set the guid of `wrapper` function to the same of original callback, so\r\n        // it can be removed in jQuery 1.4+ .unbind or .die by using the original\r\n        // callback as a reference.\r\n        if ( $.guid ) {\r\n            wrapper.guid = callback.guid = callback.guid || $.guid++;\r\n        }\r\n\r\n        // Return the wrapper function.\r\n        return wrapper;\r\n    };\r\n\r\n    // Method: jQuery.debounce\r\n    //\r\n    // Debounce execution of a function. Debouncing, unlike throttling,\r\n    // guarantees that a function is only executed a single time, either at the\r\n    // very beginning of a series of calls, or at the very end. If you want to\r\n    // simply rate-limit execution of a function, see the <jQuery.throttle>\r\n    // method.\r\n    //\r\n    // In this visualization, | is a debounced-function call and X is the actual\r\n    // callback execution:\r\n    //\r\n    // > Debounced with `at_begin` specified as false or unspecified:\r\n    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\r\n    // >                          X                                 X\r\n    // >\r\n    // > Debounced with `at_begin` specified as true:\r\n    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||\r\n    // > X                                 X\r\n    //\r\n    // Usage:\r\n    //\r\n    // > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );\r\n    // >\r\n    // > jQuery('selector').bind( 'someevent', debounced );\r\n    // > jQuery('selector').unbind( 'someevent', debounced );\r\n    //\r\n    // This also works in jQuery 1.4+:\r\n    //\r\n    // > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );\r\n    // > jQuery('selector').unbind( 'someevent', callback );\r\n    //\r\n    // Arguments:\r\n    //\r\n    //  delay - (Number) A zero-or-greater delay in milliseconds. For event\r\n    //    callbacks, values around 100 or 250 (or even higher) are most useful.\r\n    //  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or\r\n    //    unspecified, callback will only be executed `delay` milliseconds after\r\n    //    the last debounced-function call. If at_begin is true, callback will be\r\n    //    executed only at the first debounced-function call. (After the\r\n    //    throttled-function has not been called for `delay` milliseconds, the\r\n    //    internal counter is reset)\r\n    //  callback - (Function) A function to be executed after delay milliseconds.\r\n    //    The `this` context and all arguments are passed through, as-is, to\r\n    //    `callback` when the debounced-function is executed.\r\n    //\r\n    // Returns:\r\n    //\r\n    //  (Function) A new, debounced, function.\r\n\r\n    $.debounce = function( delay, at_begin, callback ) {\r\n        return callback === undefined\r\n            ? jq_throttle( delay, at_begin, false )\r\n            : jq_throttle( delay, callback, at_begin !== false );\r\n    };\r\n\r\n})(window, undefined, jQuery);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/jquery.throttle.js\n// module id = 69\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DialogConfiguration = undefined;\n\nvar _renderer = require('./renderer');\n\nvar _dialogRenderer = require('./dialog-renderer');\n\nvar _dialogOptions = require('./dialog-options');\n\nvar _aureliaPal = require('aurelia-pal');\n\n\n\nvar defaultRenderer = _dialogRenderer.DialogRenderer;\n\nvar resources = {\n  'ai-dialog': './ai-dialog',\n  'ai-dialog-header': './ai-dialog-header',\n  'ai-dialog-body': './ai-dialog-body',\n  'ai-dialog-footer': './ai-dialog-footer',\n  'attach-focus': './attach-focus'\n};\n\nvar defaultCSSText = 'ai-dialog-container,ai-dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0}ai-dialog-overlay{opacity:0}ai-dialog-overlay.active{opacity:1}ai-dialog-container{display:block;transition:opacity .2s linear;opacity:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}ai-dialog-container.active{opacity:1}ai-dialog-container>div{padding:30px}ai-dialog-container>div>div{display:block;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto}ai-dialog-container,ai-dialog-container>div,ai-dialog-container>div>div{outline:0}ai-dialog{display:table;box-shadow:0 5px 15px rgba(0,0,0,.5);border:1px solid rgba(0,0,0,.2);border-radius:5px;padding:3;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;background:#fff}ai-dialog>ai-dialog-header{display:block;padding:16px;border-bottom:1px solid #e5e5e5}ai-dialog>ai-dialog-header>button{float:right;border:none;display:block;width:32px;height:32px;background:0 0;font-size:22px;line-height:16px;margin:-14px -16px 0 0;padding:0;cursor:pointer}ai-dialog>ai-dialog-body{display:block;padding:16px}ai-dialog>ai-dialog-footer{display:block;padding:6px;border-top:1px solid #e5e5e5;text-align:right}ai-dialog>ai-dialog-footer button{color:#333;background-color:#fff;padding:6px 12px;font-size:14px;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid #ccc;border-radius:4px;margin:5px 0 5px 5px}ai-dialog>ai-dialog-footer button:disabled{cursor:default;opacity:.45}ai-dialog>ai-dialog-footer button:hover:enabled{color:#333;background-color:#e6e6e6;border-color:#adadad}.ai-dialog-open{overflow:hidden}';\n\nvar DialogConfiguration = exports.DialogConfiguration = function () {\n  function DialogConfiguration(aurelia) {\n    \n\n    this.aurelia = aurelia;\n    this.settings = _dialogOptions.dialogOptions;\n    this.resources = [];\n    this.cssText = defaultCSSText;\n    this.renderer = defaultRenderer;\n  }\n\n  DialogConfiguration.prototype.useDefaults = function useDefaults() {\n    return this.useRenderer(defaultRenderer).useCSS(defaultCSSText).useStandardResources();\n  };\n\n  DialogConfiguration.prototype.useStandardResources = function useStandardResources() {\n    return this.useResource('ai-dialog').useResource('ai-dialog-header').useResource('ai-dialog-body').useResource('ai-dialog-footer').useResource('attach-focus');\n  };\n\n  DialogConfiguration.prototype.useResource = function useResource(resourceName) {\n    this.resources.push(resourceName);\n    return this;\n  };\n\n  DialogConfiguration.prototype.useRenderer = function useRenderer(renderer, settings) {\n    this.renderer = renderer;\n    this.settings = Object.assign(this.settings, settings || {});\n    return this;\n  };\n\n  DialogConfiguration.prototype.useCSS = function useCSS(cssText) {\n    this.cssText = cssText;\n    return this;\n  };\n\n  DialogConfiguration.prototype._apply = function _apply() {\n    var _this = this;\n\n    this.aurelia.transient(_renderer.Renderer, this.renderer);\n    this.resources.forEach(function (resourceName) {\n      return _this.aurelia.globalResources(resources[resourceName]);\n    });\n\n    if (this.cssText) {\n      _aureliaPal.DOM.injectStyles(this.cssText);\n    }\n  };\n\n  return DialogConfiguration;\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-configuration.js\n// module id = 70\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DialogRenderer = undefined;\n\nvar _dec, _class;\n\nvar _aureliaPal = require('aurelia-pal');\n\nvar _aureliaDependencyInjection = require('aurelia-dependency-injection');\n\n\n\nvar containerTagName = 'ai-dialog-container';\nvar overlayTagName = 'ai-dialog-overlay';\nvar transitionEvent = function () {\n  var transition = null;\n\n  return function () {\n    if (transition) return transition;\n\n    var t = void 0;\n    var el = _aureliaPal.DOM.createElement('fakeelement');\n    var transitions = {\n      'transition': 'transitionend',\n      'OTransition': 'oTransitionEnd',\n      'MozTransition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd'\n    };\n    for (t in transitions) {\n      if (el.style[t] !== undefined) {\n        transition = transitions[t];\n        return transition;\n      }\n    }\n  };\n}();\n\nvar DialogRenderer = exports.DialogRenderer = (_dec = (0, _aureliaDependencyInjection.transient)(), _dec(_class = function () {\n  function DialogRenderer() {\n    var _this = this;\n\n    \n\n    this._escapeKeyEventHandler = function (e) {\n      if (e.keyCode === 27) {\n        var top = _this._dialogControllers[_this._dialogControllers.length - 1];\n        if (top && top.settings.lock !== true) {\n          top.cancel();\n        }\n      }\n    };\n  }\n\n  DialogRenderer.prototype.getDialogContainer = function getDialogContainer() {\n    return _aureliaPal.DOM.createElement('div');\n  };\n\n  DialogRenderer.prototype.showDialog = function showDialog(dialogController) {\n    var _this2 = this;\n\n    var settings = dialogController.settings;\n    var body = _aureliaPal.DOM.querySelectorAll('body')[0];\n    var wrapper = document.createElement('div');\n\n    this.modalOverlay = _aureliaPal.DOM.createElement(overlayTagName);\n    this.modalContainer = _aureliaPal.DOM.createElement(containerTagName);\n    this.anchor = dialogController.slot.anchor;\n    wrapper.appendChild(this.anchor);\n    this.modalContainer.appendChild(wrapper);\n\n    this.stopPropagation = function (e) {\n      e._aureliaDialogHostClicked = true;\n    };\n    this.closeModalClick = function (e) {\n      if (!settings.lock && !e._aureliaDialogHostClicked) {\n        dialogController.cancel();\n      } else {\n        return false;\n      }\n    };\n\n    dialogController.centerDialog = function () {\n      if (settings.centerHorizontalOnly) return;\n      centerDialog(_this2.modalContainer);\n    };\n\n    this.modalOverlay.style.zIndex = settings.startingZIndex;\n    this.modalContainer.style.zIndex = settings.startingZIndex;\n\n    var lastContainer = Array.from(body.querySelectorAll(containerTagName)).pop();\n\n    if (lastContainer) {\n      lastContainer.parentNode.insertBefore(this.modalContainer, lastContainer.nextSibling);\n      lastContainer.parentNode.insertBefore(this.modalOverlay, lastContainer.nextSibling);\n    } else {\n      body.insertBefore(this.modalContainer, body.firstChild);\n      body.insertBefore(this.modalOverlay, body.firstChild);\n    }\n\n    if (!this._dialogControllers.length) {\n      _aureliaPal.DOM.addEventListener('keyup', this._escapeKeyEventHandler);\n    }\n\n    this._dialogControllers.push(dialogController);\n\n    dialogController.slot.attached();\n\n    if (typeof settings.position === 'function') {\n      settings.position(this.modalContainer, this.modalOverlay);\n    } else {\n      dialogController.centerDialog();\n    }\n\n    this.modalContainer.addEventListener('click', this.closeModalClick);\n    this.anchor.addEventListener('click', this.stopPropagation);\n\n    return new Promise(function (resolve) {\n      var renderer = _this2;\n      if (settings.ignoreTransitions) {\n        resolve();\n      } else {\n        _this2.modalContainer.addEventListener(transitionEvent(), onTransitionEnd);\n      }\n\n      _this2.modalOverlay.classList.add('active');\n      _this2.modalContainer.classList.add('active');\n      body.classList.add('ai-dialog-open');\n\n      function onTransitionEnd(e) {\n        if (e.target !== renderer.modalContainer) {\n          return;\n        }\n        renderer.modalContainer.removeEventListener(transitionEvent(), onTransitionEnd);\n        resolve();\n      }\n    });\n  };\n\n  DialogRenderer.prototype.hideDialog = function hideDialog(dialogController) {\n    var _this3 = this;\n\n    var settings = dialogController.settings;\n    var body = _aureliaPal.DOM.querySelectorAll('body')[0];\n\n    this.modalContainer.removeEventListener('click', this.closeModalClick);\n    this.anchor.removeEventListener('click', this.stopPropagation);\n\n    var i = this._dialogControllers.indexOf(dialogController);\n    if (i !== -1) {\n      this._dialogControllers.splice(i, 1);\n    }\n\n    if (!this._dialogControllers.length) {\n      _aureliaPal.DOM.removeEventListener('keyup', this._escapeKeyEventHandler);\n    }\n\n    return new Promise(function (resolve) {\n      var renderer = _this3;\n      if (settings.ignoreTransitions) {\n        resolve();\n      } else {\n        _this3.modalContainer.addEventListener(transitionEvent(), onTransitionEnd);\n      }\n\n      _this3.modalOverlay.classList.remove('active');\n      _this3.modalContainer.classList.remove('active');\n\n      function onTransitionEnd() {\n        renderer.modalContainer.removeEventListener(transitionEvent(), onTransitionEnd);\n        resolve();\n      }\n    }).then(function () {\n      body.removeChild(_this3.modalOverlay);\n      body.removeChild(_this3.modalContainer);\n      dialogController.slot.detached();\n\n      if (!_this3._dialogControllers.length) {\n        body.classList.remove('ai-dialog-open');\n      }\n\n      return Promise.resolve();\n    });\n  };\n\n  return DialogRenderer;\n}()) || _class);\n\n\nDialogRenderer.prototype._dialogControllers = [];\n\nfunction centerDialog(modalContainer) {\n  var child = modalContainer.children[0];\n  var vh = Math.max(_aureliaPal.DOM.querySelectorAll('html')[0].clientHeight, window.innerHeight || 0);\n\n  child.style.marginTop = Math.max((vh - child.offsetHeight) / 2, 30) + 'px';\n  child.style.marginBottom = Math.max((vh - child.offsetHeight) / 2, 30) + 'px';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-renderer.js\n// module id = 71\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DialogService = undefined;\n\nvar _class, _temp;\n\nvar _aureliaMetadata = require('aurelia-metadata');\n\nvar _aureliaDependencyInjection = require('aurelia-dependency-injection');\n\nvar _aureliaTemplating = require('aurelia-templating');\n\nvar _dialogController = require('./dialog-controller');\n\nvar _renderer = require('./renderer');\n\nvar _lifecycle = require('./lifecycle');\n\nvar _dialogResult = require('./dialog-result');\n\nvar _dialogOptions = require('./dialog-options');\n\n\n\nvar DialogService = exports.DialogService = (_temp = _class = function () {\n  function DialogService(container, compositionEngine) {\n    \n\n    this.container = container;\n    this.compositionEngine = compositionEngine;\n    this.controllers = [];\n    this.hasActiveDialog = false;\n  }\n\n  DialogService.prototype.open = function open(settings) {\n    return this.openAndYieldController(settings).then(function (controller) {\n      return controller.result;\n    });\n  };\n\n  DialogService.prototype.openAndYieldController = function openAndYieldController(settings) {\n    var _this = this;\n\n    var childContainer = this.container.createChild();\n    var dialogController = void 0;\n    var promise = new Promise(function (resolve, reject) {\n      dialogController = new _dialogController.DialogController(childContainer.get(_renderer.Renderer), _createSettings(settings), resolve, reject);\n    });\n    childContainer.registerInstance(_dialogController.DialogController, dialogController);\n    dialogController.result = promise;\n    dialogController.result.then(function () {\n      _removeController(_this, dialogController);\n    }, function () {\n      _removeController(_this, dialogController);\n    });\n    return _openDialog(this, childContainer, dialogController).then(function () {\n      return dialogController;\n    });\n  };\n\n  return DialogService;\n}(), _class.inject = [_aureliaDependencyInjection.Container, _aureliaTemplating.CompositionEngine], _temp);\n\n\nfunction _createSettings(settings) {\n  settings = Object.assign({}, _dialogOptions.dialogOptions, settings);\n  settings.startingZIndex = _dialogOptions.dialogOptions.startingZIndex;\n  return settings;\n}\n\nfunction _openDialog(service, childContainer, dialogController) {\n  var host = dialogController.renderer.getDialogContainer();\n  var instruction = {\n    container: service.container,\n    childContainer: childContainer,\n    model: dialogController.settings.model,\n    view: dialogController.settings.view,\n    viewModel: dialogController.settings.viewModel,\n    viewSlot: new _aureliaTemplating.ViewSlot(host, true),\n    host: host\n  };\n\n  return _getViewModel(instruction, service.compositionEngine).then(function (returnedInstruction) {\n    dialogController.viewModel = returnedInstruction.viewModel;\n    dialogController.slot = returnedInstruction.viewSlot;\n\n    return (0, _lifecycle.invokeLifecycle)(dialogController.viewModel, 'canActivate', dialogController.settings.model).then(function (canActivate) {\n      if (canActivate) {\n        return service.compositionEngine.compose(returnedInstruction).then(function (controller) {\n          service.controllers.push(dialogController);\n          service.hasActiveDialog = !!service.controllers.length;\n          dialogController.controller = controller;\n          dialogController.view = controller.view;\n\n          return dialogController.renderer.showDialog(dialogController);\n        });\n      }\n    });\n  });\n}\n\nfunction _getViewModel(instruction, compositionEngine) {\n  if (typeof instruction.viewModel === 'function') {\n    instruction.viewModel = _aureliaMetadata.Origin.get(instruction.viewModel).moduleId;\n  }\n\n  if (typeof instruction.viewModel === 'string') {\n    return compositionEngine.ensureViewModel(instruction);\n  }\n\n  return Promise.resolve(instruction);\n}\n\nfunction _removeController(service, controller) {\n  var i = service.controllers.indexOf(controller);\n  if (i !== -1) {\n    service.controllers.splice(i, 1);\n    service.hasActiveDialog = !!service.controllers.length;\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/dialog-service.js\n// module id = 72\n// module chunks = 0","require('./core/jquery.throttle.js');\r\nrequire('./core/docviewer.js');\r\nvar $ = require('jquery');\r\n\r\nimport { TranscendViewer } from './transcend/transcend-viewer';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { autoinject } from 'aurelia-framework';\r\nimport { Authorization } from \"./demofiles/Authorization\";\r\n\r\n@autoinject\r\nexport class App {\r\n\r\n    constructor(private DialogService: DialogService, private authorization: Authorization) {\r\n        this.selectedAuthLevel = this.authorization.get();\r\n        this.init();\r\n    }\r\n\r\n    private config: any;\r\n    private documents: any;\r\n    private selectedDocumentId = 1;\r\n    private permissionInfos: any;\r\n    private selectedPermissions: any[] = [];\r\n    private authLevels: string[] = ['Read', 'Write'];\r\n    private selectedAuthLevel: string;\r\n    private isEditFormOpened = false;\r\n    private $viewer;\r\n    private fontTypes = ['Arial', 'Verdana', 'Times New Roman', 'Courier New', 'Tahoma'];\r\n    private selectedFontType: string;\r\n    private fontSizes = [8, 10, 12, 14, 16, 18, 20, 30, 40, 50, 60];\r\n    private selectedFontSize: number;\r\n    private fontColors = [\r\n        { name: 'Red', value: '255,0,0' },\r\n        { name: 'Green', value: '0,255,0' },\r\n        { name: 'Blue', value: '0,0,255' }\r\n    ];\r\n    private selectedFontColor: string;\r\n    private watermarkText: string;\r\n\r\n    async init() {\r\n        try {\r\n            this.config = await this.loadConfig();\r\n            this.$viewer = $('#viewerContainer');\r\n            this.documents = await this.getDocuments();\r\n        } catch (e) {\r\n            this.handleError(e);\r\n        }\r\n    }\r\n\r\n    fileUploadCallback = () => {\r\n        this.getDocuments().then(documents => {\r\n            this.documents = documents;\r\n        });\r\n    };\r\n\r\n    authChange = () => {\r\n        this.authorization.set(this.selectedAuthLevel);\r\n        this.init();\r\n    }\r\n\r\n    selectedFiles: FileList;\r\n\r\n    private uploadFile(targetUrl: string, file: File) {\r\n        const deferred = $.Deferred();\r\n        const xhr = new XMLHttpRequest();\r\n        const fd = new FormData();\r\n        xhr.open(\"POST\", targetUrl, true);\r\n        xhr.onreadystatechange = () => {\r\n            if (xhr.readyState === 4 && xhr.status === 200) {\r\n                deferred.resolve();\r\n            } else if (xhr.status !== 200) {\r\n                alert(`Upload failed: ${file.name}`);\r\n                deferred.reject();\r\n            }\r\n        };\r\n        fd.append(\"file\", file);\r\n        xhr.send(fd);\r\n\r\n        return deferred.promise();\r\n    }\r\n\r\n    fileChange = async () => {\r\n        const promises = [];\r\n        const uploadUrl = this.config.apiBaseUrl + \"/document/upload\";\r\n        for (let i = 0; i < this.selectedFiles.length; i++) {\r\n            const file = this.selectedFiles[i];\r\n            if (file.size > 1073741824) {\r\n                alert(`Can not upload file: '${file.name}'. Maximum file size (1 GB) is exceeded.`);\r\n            }\r\n            const promise = this.uploadFile(uploadUrl, file);\r\n            promises.push(promise);\r\n        }\r\n        await Promise.all(promises);\r\n        // clear the file input\r\n        $(\"#fileInput\").replaceWith($(\"#fileInput\").val('').clone(true));\r\n        this.documents = await this.getDocuments();\r\n    };\r\n\r\n    loadConfig() {\r\n        return $.getJSON(\"config.json\");\r\n    }\r\n\r\n    getDocuments() {\r\n        const url = `${this.config.apiBaseUrl}/document/list`;\r\n        return this.makeAjaxCall(this.ajaxGetOptions(url));\r\n    }\r\n\r\n    getAvailableOperations() {\r\n        const url = `${this.config.apiBaseUrl}/image/${this.selectedDocumentId}/getPermissions`;\r\n        return this.makeAjaxCall(this.ajaxGetOptions(url));\r\n    }\r\n\r\n    permissionMatcher = (a, b) => a.name === b.name;\r\n\r\n    async initPermissions() {\r\n        const availableOperations = await this.getAvailableOperations();\r\n        const isOperationEnabled = id => (availableOperations && (availableOperations).includes(id));\r\n        if (this.selectedPermissions.length > 0) {\r\n            this.selectedPermissions = [];\r\n        }\r\n        this.permissionInfos = [\r\n            { name: 'canPrint', value: isOperationEnabled(101), displayName: 'Can print' },\r\n            { name: 'toggleWatermark', value: isOperationEnabled(102), displayName: 'Toggle watermark' },\r\n            { name: 'canSave', value: isOperationEnabled(103), displayName: 'Can save' },\r\n            { name: 'canDownload', value: isOperationEnabled(3), displayName: 'Can download' }\r\n        ];\r\n        for (let permInf of this.permissionInfos) {\r\n            permInf.value && this.selectedPermissions.push(permInf);\r\n        }\r\n    }\r\n\r\n    showDocumentInViewer(id) {\r\n        this.selectedDocumentId = id;\r\n        this.isEditFormOpened = true;\r\n        this.recreateViewer();\r\n    }\r\n\r\n    getTitle(): string {\r\n        for (let document of this.documents) {\r\n            if (document.Id === this.selectedDocumentId) {\r\n                return document.Name;\r\n            }\r\n        }\r\n        return '';\r\n    }\r\n\r\n    convertPermissionInfoArrayToObject(arr: Array<any>) {\r\n        return arr.reduce((result, item) => {\r\n                result[item.name] = item.value;\r\n                return result;\r\n            },\r\n            {});\r\n    }\r\n\r\n    createViewer() {\r\n        const options = {\r\n            config: this.config,\r\n            showthumbnails: true,\r\n            metadata: false,\r\n            showtoolbar: true,\r\n            edittoolbar: true,\r\n            title: this.getTitle(),\r\n            showTitle: true,\r\n            containerWidth: () => (this.$viewer.width() - 185),\r\n            containerHeight: () => {\r\n                const wh = $(window).height();\r\n                return wh - 250;\r\n            },\r\n            reactToResize: true,\r\n            isAdmin: true,\r\n            toggleWatermark: true,\r\n            noWatermark: true,\r\n            noRedaction: true,\r\n            placeholderImgPath: './images/ajax-loader.gif',\r\n            showShapes: true,\r\n            callbacks: {\r\n                beforeClose: () => {\r\n                    this.isEditFormOpened = false;\r\n                },\r\n                selectedDocumentChange: (newId) => {\r\n                    this.selectedDocumentId = newId;\r\n                    this.initPermissions();\r\n                    this.initWatermarkData();\r\n                }\r\n            },\r\n            dataTransmission: {\r\n                apiBaseUrl: this.config.apiBaseUrl,\r\n                getExistingPreviewImages: {\r\n                    url: 'getexistingpreviewimages'\r\n                },\r\n                getPageCount: {\r\n                    url: 'getpagecount'\r\n                }\r\n            },\r\n            selectedDocumentId: this.selectedDocumentId,\r\n            needCloseButton: true,\r\n            thumbnailDirection: 'horizontal',\r\n            addNoChachePostfix: true,\r\n            permissionInfo: this.convertPermissionInfoArrayToObject(this.permissionInfos),\r\n            enableDocumentPager: true,\r\n            documentIdCollection: this.documents.map(obj => obj.Id),\r\n            firstDocumentClick: {\r\n                icon: 'sn-icon-firstdoc'\r\n            },\r\n            previousDocumentClick: {\r\n                icon: 'sn-icon-prevdoc'\r\n            },\r\n            nextDocumentClick: {\r\n                icon: 'sn-icon-nextdoc'\r\n            },\r\n            lastDocumentClick: {\r\n                icon: 'sn-icon-lastdoc'\r\n            }\r\n        }\r\n        const transcenViewer = new TranscendViewer(this.DialogService);\r\n        transcenViewer.initializeViewer(this.$viewer, options);\r\n    }\r\n\r\n    private async recreateViewer() {\r\n        if (this.$viewer.data('snDocViewer')) {\r\n            this.$viewer.data('snDocViewer').destroy();\r\n        }\r\n        await this.initPermissions();\r\n        this.initWatermarkData();\r\n        this.createViewer();\r\n        this.$viewer.show();\r\n    }\r\n\r\n    deleteDocument() {\r\n        const url = `${this.config.apiBaseUrl}/document/delete/${this.selectedDocumentId}`;\r\n        this.makeAjaxCall(this.ajaxGetOptions(url));\r\n        this.isEditFormOpened = false;\r\n        this.$viewer.hide();\r\n        for (let i = 0; i < this.documents.length; i++) {\r\n            this.documents[i].Id === this.selectedDocumentId && this.documents.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    submitPermissionInfos() {\r\n        const permissionsWithTrueValue = this.selectedPermissions.map(item => {\r\n            return Object.assign({}, item, { value: true });\r\n        });\r\n        const permissionsToSave = this.convertPermissionInfoArrayToObject(permissionsWithTrueValue);\r\n        const url = `${this.config.apiBaseUrl}/image/${this.selectedDocumentId}/savePermissions`;\r\n        const data = JSON.stringify(permissionsToSave);\r\n        this.makeAjaxCall(this.ajaxPostOptions(url, data)).always(() => {\r\n            this.recreateViewer();\r\n        });\r\n        \r\n    }\r\n\r\n    getWatermarkData() {\r\n        const url = `${this.config.apiBaseUrl}/image/${this.selectedDocumentId}/getWatermarkData`;\r\n        return this.makeAjaxCall(this.ajaxGetOptions(url));\r\n    }\r\n\r\n    async initWatermarkData() {\r\n        const watermarkData = await this.getWatermarkData();\r\n\r\n        if (watermarkData.Font !== null) {\r\n            const fontParts = watermarkData.Font.split(',');\r\n            this.selectedFontType = fontParts[0].trim();\r\n            this.selectedFontSize = fontParts[1].trim();\r\n            this.selectedFontColor = watermarkData.Color;\r\n        } else {\r\n            this.selectedFontType = this.fontTypes[0];\r\n            this.selectedFontSize = this.fontSizes[0];\r\n            this.selectedFontColor = this.fontColors[0].name;\r\n        }\r\n        this.watermarkText = watermarkData.WatermarkText;\r\n    }\r\n\r\n    async submitWatermarkProperties() {\r\n        const watermarkPropertiesToSave = {\r\n            WatermarkText: this.watermarkText,\r\n            Font: `${this.selectedFontType},${this.selectedFontSize}`,\r\n            Color: this.selectedFontColor\r\n        };\r\n        const dataToSend = JSON.stringify(watermarkPropertiesToSave);\r\n        this.postWatermarkData(dataToSend);\r\n        this.recreateViewer();\r\n    }\r\n\r\n    postWatermarkData(data) {\r\n        const url = `${this.config.apiBaseUrl}/image/${this.selectedDocumentId}/saveWatermarkdata`;\r\n        this.makeAjaxCall(this.ajaxPostOptions(url, data));\r\n    }\r\n\r\n    private ajaxGetOptions(url: string) {\r\n        return {\r\n            method: \"GET\",\r\n            url: url,\r\n            dataType: \"json\",\r\n            contentType: \"application/json; charset=utf-8\"\r\n        }\r\n    }\r\n\r\n    private ajaxPostOptions(url: string, data: any) {\r\n        return {\r\n            method: \"POST\",\r\n            url: url,\r\n            dataType: \"json\",\r\n            data: data,\r\n            contentType: \"application/json; charset=utf-8\"\r\n        }\r\n    }\r\n\r\n    private makeAjaxCall(options) {\r\n        try {\r\n            return $.ajax(options);\r\n        } catch (e) {\r\n            this.handleError(e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private handleError(exception) {\r\n        switch (exception.status) {\r\n        case 200:\r\n            break;\r\n        case 403:\r\n            alert('Unautherized. Please select an authorization level');\r\n            break;\r\n        default:\r\n            alert('Strange... Something went wrong.');\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// src/app.ts","import {Aurelia} from 'aurelia-framework';\r\n// we want font-awesome to load as soon as possible to show the fa-spinner\r\n// import '../styles/styles.css';\r\nimport 'font-awesome/css/font-awesome.css';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport 'bootstrap';\r\n\r\n// comment out if you don't want a Promise polyfill (remove also from webpack.config.js)\r\nimport * as Bluebird from 'bluebird';\r\nBluebird.config({ warnings: false });\r\n\r\nexport async function configure(aurelia: Aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .developmentLogging()\r\n    .plugin('aurelia-dialog');\r\n\r\n  // Uncomment the line below to enable animation.\r\n  // aurelia.use.plugin('aurelia-animator-css');\r\n  // if the css animator is enabled, add swap-order=\"after\" to all router-view elements\r\n\r\n  // Anyone wanting to use HTMLImports to load views, will need to install the following plugin.\r\n  // aurelia.use.plugin('aurelia-html-import-template-loader')\r\n\r\n  await aurelia.start();\r\n  aurelia.setRoot('app');\r\n\r\n  // if you would like your website to work offline (Service Worker), \r\n  // install and enable the @easy-webpack/config-offline package in webpack.config.js and uncomment the following code:\r\n  /*\r\n  const offline = await System.import('offline-plugin/runtime');\r\n  offline.install();\r\n  */\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// src/main.ts","/* ========================================================================\n * Bootstrap: affix.js v3.3.7\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n\n    this.$target = $(this.options.target)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      = null\n    this.unpin        = null\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.VERSION  = '3.3.7'\n\n  Affix.RESET    = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0,\n    target: window\n  }\n\n  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\n    var scrollTop    = this.$target.scrollTop()\n    var position     = this.$element.offset()\n    var targetHeight = this.$target.height()\n\n    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\n\n    if (this.affixed == 'bottom') {\n      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\n      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\n    }\n\n    var initializing   = this.affixed == null\n    var colliderTop    = initializing ? scrollTop : position.top\n    var colliderHeight = initializing ? targetHeight : height\n\n    if (offsetTop != null && scrollTop <= offsetTop) return 'top'\n    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\n\n    return false\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$target.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var height       = this.$element.height()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n    var scrollHeight = Math.max($(document).height(), $(document.body).height())\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\n\n    if (this.affixed != affix) {\n      if (this.unpin != null) this.$element.css('top', '')\n\n      var affixType = 'affix' + (affix ? '-' + affix : '')\n      var e         = $.Event(affixType + '.bs.affix')\n\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      this.affixed = affix\n      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n      this.$element\n        .removeClass(Affix.RESET)\n        .addClass(affixType)\n        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')\n    }\n\n    if (affix == 'bottom') {\n      this.$element.offset({\n        top: scrollHeight - height - offsetBottom\n      })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.affix\n\n  $.fn.affix             = Plugin\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop    != null) data.offset.top    = data.offsetTop\n\n      Plugin.call($spy, data)\n    })\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/affix.js\n// module id = 79\n// module chunks = 0","/* ========================================================================\n * Bootstrap: alert.js v3.3.7\n * http://getbootstrap.com/javascript/#alerts\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // ALERT CLASS DEFINITION\n  // ======================\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n  var Alert   = function (el) {\n    $(el).on('click', dismiss, this.close)\n  }\n\n  Alert.VERSION = '3.3.7'\n\n  Alert.TRANSITION_DURATION = 150\n\n  Alert.prototype.close = function (e) {\n    var $this    = $(this)\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = $(selector === '#' ? [] : selector)\n\n    if (e) e.preventDefault()\n\n    if (!$parent.length) {\n      $parent = $this.closest('.alert')\n    }\n\n    $parent.trigger(e = $.Event('close.bs.alert'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      // detach from parent, fire event then clean up data\n      $parent.detach().trigger('closed.bs.alert').remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent\n        .one('bsTransitionEnd', removeElement)\n        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :\n      removeElement()\n  }\n\n\n  // ALERT PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.alert')\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.alert\n\n  $.fn.alert             = Plugin\n  $.fn.alert.Constructor = Alert\n\n\n  // ALERT NO CONFLICT\n  // =================\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n  // ALERT DATA-API\n  // ==============\n\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/alert.js\n// module id = 80\n// module chunks = 0","/* ========================================================================\n * Bootstrap: button.js v3.3.7\n * http://getbootstrap.com/javascript/#buttons\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element  = $(element)\n    this.options   = $.extend({}, Button.DEFAULTS, options)\n    this.isLoading = false\n  }\n\n  Button.VERSION  = '3.3.7'\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state += 'Text'\n\n    if (data.resetText == null) $el.data('resetText', $el[val]())\n\n    // push to event loop to allow forms to submit\n    setTimeout($.proxy(function () {\n      $el[val](data[state] == null ? this.options[state] : data[state])\n\n      if (state == 'loadingText') {\n        this.isLoading = true\n        $el.addClass(d).attr(d, d).prop(d, true)\n      } else if (this.isLoading) {\n        this.isLoading = false\n        $el.removeClass(d).removeAttr(d).prop(d, false)\n      }\n    }, this), 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var changed = true\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n      if ($input.prop('type') == 'radio') {\n        if ($input.prop('checked')) changed = false\n        $parent.find('.active').removeClass('active')\n        this.$element.addClass('active')\n      } else if ($input.prop('type') == 'checkbox') {\n        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false\n        this.$element.toggleClass('active')\n      }\n      $input.prop('checked', this.$element.hasClass('active'))\n      if (changed) $input.trigger('change')\n    } else {\n      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))\n      this.$element.toggleClass('active')\n    }\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  var old = $.fn.button\n\n  $.fn.button             = Plugin\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document)\n    .on('click.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      var $btn = $(e.target).closest('.btn')\n      Plugin.call($btn, 'toggle')\n      if (!($(e.target).is('input[type=\"radio\"], input[type=\"checkbox\"]'))) {\n        // Prevent double click on radios, and the double selections (so cancellation) on checkboxes\n        e.preventDefault()\n        // The target component still receive the focus\n        if ($btn.is('input,button')) $btn.trigger('focus')\n        else $btn.find('input:visible,button:visible').first().trigger('focus')\n      }\n    })\n    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))\n    })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/button.js\n// module id = 81\n// module chunks = 0","/* ========================================================================\n * Bootstrap: carousel.js v3.3.7\n * http://getbootstrap.com/javascript/#carousel\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CAROUSEL CLASS DEFINITION\n  // =========================\n\n  var Carousel = function (element, options) {\n    this.$element    = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options     = options\n    this.paused      = null\n    this.sliding     = null\n    this.interval    = null\n    this.$active     = null\n    this.$items      = null\n\n    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))\n\n    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))\n      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))\n  }\n\n  Carousel.VERSION  = '3.3.7'\n\n  Carousel.TRANSITION_DURATION = 600\n\n  Carousel.DEFAULTS = {\n    interval: 5000,\n    pause: 'hover',\n    wrap: true,\n    keyboard: true\n  }\n\n  Carousel.prototype.keydown = function (e) {\n    if (/input|textarea/i.test(e.target.tagName)) return\n    switch (e.which) {\n      case 37: this.prev(); break\n      case 39: this.next(); break\n      default: return\n    }\n\n    e.preventDefault()\n  }\n\n  Carousel.prototype.cycle = function (e) {\n    e || (this.paused = false)\n\n    this.interval && clearInterval(this.interval)\n\n    this.options.interval\n      && !this.paused\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n\n    return this\n  }\n\n  Carousel.prototype.getItemIndex = function (item) {\n    this.$items = item.parent().children('.item')\n    return this.$items.index(item || this.$active)\n  }\n\n  Carousel.prototype.getItemForDirection = function (direction, active) {\n    var activeIndex = this.getItemIndex(active)\n    var willWrap = (direction == 'prev' && activeIndex === 0)\n                || (direction == 'next' && activeIndex == (this.$items.length - 1))\n    if (willWrap && !this.options.wrap) return active\n    var delta = direction == 'prev' ? -1 : 1\n    var itemIndex = (activeIndex + delta) % this.$items.length\n    return this.$items.eq(itemIndex)\n  }\n\n  Carousel.prototype.to = function (pos) {\n    var that        = this\n    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n    if (pos > (this.$items.length - 1) || pos < 0) return\n\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, \"slid\"\n    if (activeIndex == pos) return this.pause().cycle()\n\n    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n  }\n\n  Carousel.prototype.pause = function (e) {\n    e || (this.paused = true)\n\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\n      this.$element.trigger($.support.transition.end)\n      this.cycle(true)\n    }\n\n    this.interval = clearInterval(this.interval)\n\n    return this\n  }\n\n  Carousel.prototype.next = function () {\n    if (this.sliding) return\n    return this.slide('next')\n  }\n\n  Carousel.prototype.prev = function () {\n    if (this.sliding) return\n    return this.slide('prev')\n  }\n\n  Carousel.prototype.slide = function (type, next) {\n    var $active   = this.$element.find('.item.active')\n    var $next     = next || this.getItemForDirection(type, $active)\n    var isCycling = this.interval\n    var direction = type == 'next' ? 'left' : 'right'\n    var that      = this\n\n    if ($next.hasClass('active')) return (this.sliding = false)\n\n    var relatedTarget = $next[0]\n    var slideEvent = $.Event('slide.bs.carousel', {\n      relatedTarget: relatedTarget,\n      direction: direction\n    })\n    this.$element.trigger(slideEvent)\n    if (slideEvent.isDefaultPrevented()) return\n\n    this.sliding = true\n\n    isCycling && this.pause()\n\n    if (this.$indicators.length) {\n      this.$indicators.find('.active').removeClass('active')\n      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n      $nextIndicator && $nextIndicator.addClass('active')\n    }\n\n    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n    if ($.support.transition && this.$element.hasClass('slide')) {\n      $next.addClass(type)\n      $next[0].offsetWidth // force reflow\n      $active.addClass(direction)\n      $next.addClass(direction)\n      $active\n        .one('bsTransitionEnd', function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () {\n            that.$element.trigger(slidEvent)\n          }, 0)\n        })\n        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\n    } else {\n      $active.removeClass('active')\n      $next.addClass('active')\n      this.sliding = false\n      this.$element.trigger(slidEvent)\n    }\n\n    isCycling && this.cycle()\n\n    return this\n  }\n\n\n  // CAROUSEL PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.carousel')\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n      var action  = typeof option == 'string' ? option : options.slide\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  var old = $.fn.carousel\n\n  $.fn.carousel             = Plugin\n  $.fn.carousel.Constructor = Carousel\n\n\n  // CAROUSEL NO CONFLICT\n  // ====================\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n\n  // CAROUSEL DATA-API\n  // =================\n\n  var clickHandler = function (e) {\n    var href\n    var $this   = $(this)\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n    if (!$target.hasClass('carousel')) return\n    var options = $.extend({}, $target.data(), $this.data())\n    var slideIndex = $this.attr('data-slide-to')\n    if (slideIndex) options.interval = false\n\n    Plugin.call($target, options)\n\n    if (slideIndex) {\n      $target.data('bs.carousel').to(slideIndex)\n    }\n\n    e.preventDefault()\n  }\n\n  $(document)\n    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\n    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\n\n  $(window).on('load', function () {\n    $('[data-ride=\"carousel\"]').each(function () {\n      var $carousel = $(this)\n      Plugin.call($carousel, $carousel.data())\n    })\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/carousel.js\n// module id = 82\n// module chunks = 0","/* ========================================================================\n * Bootstrap: collapse.js v3.3.7\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n/* jshint latedef: false */\n\n+function ($) {\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = function (element, options) {\n    this.$element      = $(element)\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\n    this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\n                           '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\n    this.transitioning = null\n\n    if (this.options.parent) {\n      this.$parent = this.getParent()\n    } else {\n      this.addAriaAndCollapsedClass(this.$element, this.$trigger)\n    }\n\n    if (this.options.toggle) this.toggle()\n  }\n\n  Collapse.VERSION  = '3.3.7'\n\n  Collapse.TRANSITION_DURATION = 350\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n  Collapse.prototype.dimension = function () {\n    var hasWidth = this.$element.hasClass('width')\n    return hasWidth ? 'width' : 'height'\n  }\n\n  Collapse.prototype.show = function () {\n    if (this.transitioning || this.$element.hasClass('in')) return\n\n    var activesData\n    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\n\n    if (actives && actives.length) {\n      activesData = actives.data('bs.collapse')\n      if (activesData && activesData.transitioning) return\n    }\n\n    var startEvent = $.Event('show.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    if (actives && actives.length) {\n      Plugin.call(actives, 'hide')\n      activesData || actives.data('bs.collapse', null)\n    }\n\n    var dimension = this.dimension()\n\n    this.$element\n      .removeClass('collapse')\n      .addClass('collapsing')[dimension](0)\n      .attr('aria-expanded', true)\n\n    this.$trigger\n      .removeClass('collapsed')\n      .attr('aria-expanded', true)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse in')[dimension]('')\n      this.transitioning = 0\n      this.$element\n        .trigger('shown.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\n\n    this.$element\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\n  }\n\n  Collapse.prototype.hide = function () {\n    if (this.transitioning || !this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('hide.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var dimension = this.dimension()\n\n    this.$element[dimension](this.$element[dimension]())[0].offsetHeight\n\n    this.$element\n      .addClass('collapsing')\n      .removeClass('collapse in')\n      .attr('aria-expanded', false)\n\n    this.$trigger\n      .addClass('collapsed')\n      .attr('aria-expanded', false)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.transitioning = 0\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse')\n        .trigger('hidden.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    this.$element\n      [dimension](0)\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\n  }\n\n  Collapse.prototype.toggle = function () {\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\n  }\n\n  Collapse.prototype.getParent = function () {\n    return $(this.options.parent)\n      .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\n      .each($.proxy(function (i, element) {\n        var $element = $(element)\n        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\n      }, this))\n      .end()\n  }\n\n  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {\n    var isOpen = $element.hasClass('in')\n\n    $element.attr('aria-expanded', isOpen)\n    $trigger\n      .toggleClass('collapsed', !isOpen)\n      .attr('aria-expanded', isOpen)\n  }\n\n  function getTargetFromTrigger($trigger) {\n    var href\n    var target = $trigger.attr('data-target')\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\n\n    return $(target)\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.collapse\n\n  $.fn.collapse             = Plugin\n  $.fn.collapse.Constructor = Collapse\n\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\n    var $this   = $(this)\n\n    if (!$this.attr('data-target')) e.preventDefault()\n\n    var $target = getTargetFromTrigger($this)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n\n    Plugin.call($target, option)\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/collapse.js\n// module id = 83\n// module chunks = 0","/* ========================================================================\n * Bootstrap: dropdown.js v3.3.7\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=\"dropdown\"]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.VERSION = '3.3.7'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))\n    })\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $(document.createElement('div'))\n          .addClass('dropdown-backdrop')\n          .insertAfter($(this))\n          .on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this\n        .trigger('focus')\n        .attr('aria-expanded', 'true')\n\n      $parent\n        .toggleClass('open')\n        .trigger($.Event('shown.bs.dropdown', relatedTarget))\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\n      return $this.trigger('click')\n    }\n\n    var desc = ' li:not(.disabled):visible a'\n    var $items = $parent.find('.dropdown-menu' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index(e.target)\n\n    if (e.which == 38 && index > 0)                 index--         // up\n    if (e.which == 40 && index < $items.length - 1) index++         // down\n    if (!~index)                                    index = 0\n\n    $items.eq(index).trigger('focus')\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/dropdown.js\n// module id = 84\n// module chunks = 0","/* ========================================================================\n * Bootstrap: modal.js v3.3.7\n * http://getbootstrap.com/javascript/#modals\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options             = options\n    this.$body               = $(document.body)\n    this.$element            = $(element)\n    this.$dialog             = this.$element.find('.modal-dialog')\n    this.$backdrop           = null\n    this.isShown             = null\n    this.originalBodyPad     = null\n    this.scrollbarWidth      = 0\n    this.ignoreBackdropClick = false\n\n    if (this.options.remote) {\n      this.$element\n        .find('.modal-content')\n        .load(this.options.remote, $.proxy(function () {\n          this.$element.trigger('loaded.bs.modal')\n        }, this))\n    }\n  }\n\n  Modal.VERSION  = '3.3.7'\n\n  Modal.TRANSITION_DURATION = 300\n  Modal.BACKDROP_TRANSITION_DURATION = 150\n\n  Modal.DEFAULTS = {\n    backdrop: true,\n    keyboard: true,\n    show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this.isShown ? this.hide() : this.show(_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.checkScrollbar()\n    this.setScrollbar()\n    this.$body.addClass('modal-open')\n\n    this.escape()\n    this.resize()\n\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.$dialog.on('mousedown.dismiss.bs.modal', function () {\n      that.$element.one('mouseup.dismiss.bs.modal', function (e) {\n        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true\n      })\n    })\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(that.$body) // don't move modals dom position\n      }\n\n      that.$element\n        .show()\n        .scrollTop(0)\n\n      that.adjustDialog()\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element.addClass('in')\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$dialog // wait for modal to slide in\n          .one('bsTransitionEnd', function () {\n            that.$element.trigger('focus').trigger(e)\n          })\n          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n        that.$element.trigger('focus').trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n    this.resize()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .off('click.dismiss.bs.modal')\n      .off('mouseup.dismiss.bs.modal')\n\n    this.$dialog.off('mousedown.dismiss.bs.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one('bsTransitionEnd', $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (document !== e.target &&\n            this.$element[0] !== e.target &&\n            !this.$element.has(e.target).length) {\n          this.$element.trigger('focus')\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keydown.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.resize = function () {\n    if (this.isShown) {\n      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))\n    } else {\n      $(window).off('resize.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.$body.removeClass('modal-open')\n      that.resetAdjustments()\n      that.resetScrollbar()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var that = this\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $(document.createElement('div'))\n        .addClass('modal-backdrop ' + animate)\n        .appendTo(this.$body)\n\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n        if (this.ignoreBackdropClick) {\n          this.ignoreBackdropClick = false\n          return\n        }\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus()\n          : this.hide()\n      }, this))\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one('bsTransitionEnd', callback)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      var callbackRemove = function () {\n        that.removeBackdrop()\n        callback && callback()\n      }\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.$backdrop\n          .one('bsTransitionEnd', callbackRemove)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callbackRemove()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // these following methods are used to handle overflowing modals\n\n  Modal.prototype.handleUpdate = function () {\n    this.adjustDialog()\n  }\n\n  Modal.prototype.adjustDialog = function () {\n    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight\n\n    this.$element.css({\n      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',\n      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''\n    })\n  }\n\n  Modal.prototype.resetAdjustments = function () {\n    this.$element.css({\n      paddingLeft: '',\n      paddingRight: ''\n    })\n  }\n\n  Modal.prototype.checkScrollbar = function () {\n    var fullWindowWidth = window.innerWidth\n    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8\n      var documentElementRect = document.documentElement.getBoundingClientRect()\n      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)\n    }\n    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth\n    this.scrollbarWidth = this.measureScrollbar()\n  }\n\n  Modal.prototype.setScrollbar = function () {\n    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)\n    this.originalBodyPad = document.body.style.paddingRight || ''\n    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)\n  }\n\n  Modal.prototype.resetScrollbar = function () {\n    this.$body.css('padding-right', this.originalBodyPad)\n  }\n\n  Modal.prototype.measureScrollbar = function () { // thx walsh\n    var scrollDiv = document.createElement('div')\n    scrollDiv.className = 'modal-scrollbar-measure'\n    this.$body.append(scrollDiv)\n    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n    this.$body[0].removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  var old = $.fn.modal\n\n  $.fn.modal             = Plugin\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) // strip for ie7\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    if ($this.is('a')) e.preventDefault()\n\n    $target.one('show.bs.modal', function (showEvent) {\n      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown\n      $target.one('hidden.bs.modal', function () {\n        $this.is(':visible') && $this.trigger('focus')\n      })\n    })\n    Plugin.call($target, option, this)\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/modal.js\n// module id = 85\n// module chunks = 0","/* ========================================================================\n * Bootstrap: popover.js v3.3.7\n * http://getbootstrap.com/javascript/#popovers\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // POPOVER PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\n\n  Popover.VERSION  = '3.3.7'\n\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\n    placement: 'right',\n    trigger: 'click',\n    content: '',\n    template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n  // NOTE: POPOVER EXTENDS tooltip.js\n  // ================================\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\n\n  Popover.prototype.constructor = Popover\n\n  Popover.prototype.getDefaults = function () {\n    return Popover.DEFAULTS\n  }\n\n  Popover.prototype.setContent = function () {\n    var $tip    = this.tip()\n    var title   = this.getTitle()\n    var content = this.getContent()\n\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\n    ](content)\n\n    $tip.removeClass('fade top bottom left right in')\n\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\n    // this manually by checking the contents.\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\n  }\n\n  Popover.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent()\n  }\n\n  Popover.prototype.getContent = function () {\n    var $e = this.$element\n    var o  = this.options\n\n    return $e.attr('data-content')\n      || (typeof o.content == 'function' ?\n            o.content.call($e[0]) :\n            o.content)\n  }\n\n  Popover.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))\n  }\n\n\n  // POPOVER PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.popover')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.popover\n\n  $.fn.popover             = Plugin\n  $.fn.popover.Constructor = Popover\n\n\n  // POPOVER NO CONFLICT\n  // ===================\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/popover.js\n// module id = 86\n// module chunks = 0","/* ========================================================================\n * Bootstrap: scrollspy.js v3.3.7\n * http://getbootstrap.com/javascript/#scrollspy\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // SCROLLSPY CLASS DEFINITION\n  // ==========================\n\n  function ScrollSpy(element, options) {\n    this.$body          = $(document.body)\n    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\n    this.selector       = (this.options.target || '') + ' .nav li > a'\n    this.offsets        = []\n    this.targets        = []\n    this.activeTarget   = null\n    this.scrollHeight   = 0\n\n    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.VERSION  = '3.3.7'\n\n  ScrollSpy.DEFAULTS = {\n    offset: 10\n  }\n\n  ScrollSpy.prototype.getScrollHeight = function () {\n    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)\n  }\n\n  ScrollSpy.prototype.refresh = function () {\n    var that          = this\n    var offsetMethod  = 'offset'\n    var offsetBase    = 0\n\n    this.offsets      = []\n    this.targets      = []\n    this.scrollHeight = this.getScrollHeight()\n\n    if (!$.isWindow(this.$scrollElement[0])) {\n      offsetMethod = 'position'\n      offsetBase   = this.$scrollElement.scrollTop()\n    }\n\n    this.$body\n      .find(this.selector)\n      .map(function () {\n        var $el   = $(this)\n        var href  = $el.data('target') || $el.attr('href')\n        var $href = /^#./.test(href) && $(href)\n\n        return ($href\n          && $href.length\n          && $href.is(':visible')\n          && [[$href[offsetMethod]().top + offsetBase, href]]) || null\n      })\n      .sort(function (a, b) { return a[0] - b[0] })\n      .each(function () {\n        that.offsets.push(this[0])\n        that.targets.push(this[1])\n      })\n  }\n\n  ScrollSpy.prototype.process = function () {\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\n    var scrollHeight = this.getScrollHeight()\n    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()\n    var offsets      = this.offsets\n    var targets      = this.targets\n    var activeTarget = this.activeTarget\n    var i\n\n    if (this.scrollHeight != scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)\n    }\n\n    if (activeTarget && scrollTop < offsets[0]) {\n      this.activeTarget = null\n      return this.clear()\n    }\n\n    for (i = offsets.length; i--;) {\n      activeTarget != targets[i]\n        && scrollTop >= offsets[i]\n        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])\n        && this.activate(targets[i])\n    }\n  }\n\n  ScrollSpy.prototype.activate = function (target) {\n    this.activeTarget = target\n\n    this.clear()\n\n    var selector = this.selector +\n      '[data-target=\"' + target + '\"],' +\n      this.selector + '[href=\"' + target + '\"]'\n\n    var active = $(selector)\n      .parents('li')\n      .addClass('active')\n\n    if (active.parent('.dropdown-menu').length) {\n      active = active\n        .closest('li.dropdown')\n        .addClass('active')\n    }\n\n    active.trigger('activate.bs.scrollspy')\n  }\n\n  ScrollSpy.prototype.clear = function () {\n    $(this.selector)\n      .parentsUntil(this.options.target, '.active')\n      .removeClass('active')\n  }\n\n\n  // SCROLLSPY PLUGIN DEFINITION\n  // ===========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.scrollspy')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy             = Plugin\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n\n  // SCROLLSPY NO CONFLICT\n  // =====================\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n  // SCROLLSPY DATA-API\n  // ==================\n\n  $(window).on('load.bs.scrollspy.data-api', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      Plugin.call($spy, $spy.data())\n    })\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/scrollspy.js\n// module id = 87\n// module chunks = 0","/* ========================================================================\n * Bootstrap: tab.js v3.3.7\n * http://getbootstrap.com/javascript/#tabs\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TAB CLASS DEFINITION\n  // ====================\n\n  var Tab = function (element) {\n    // jscs:disable requireDollarBeforejQueryAssignment\n    this.element = $(element)\n    // jscs:enable requireDollarBeforejQueryAssignment\n  }\n\n  Tab.VERSION = '3.3.7'\n\n  Tab.TRANSITION_DURATION = 150\n\n  Tab.prototype.show = function () {\n    var $this    = this.element\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\n    var selector = $this.data('target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    if ($this.parent('li').hasClass('active')) return\n\n    var $previous = $ul.find('.active:last a')\n    var hideEvent = $.Event('hide.bs.tab', {\n      relatedTarget: $this[0]\n    })\n    var showEvent = $.Event('show.bs.tab', {\n      relatedTarget: $previous[0]\n    })\n\n    $previous.trigger(hideEvent)\n    $this.trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return\n\n    var $target = $(selector)\n\n    this.activate($this.closest('li'), $ul)\n    this.activate($target, $target.parent(), function () {\n      $previous.trigger({\n        type: 'hidden.bs.tab',\n        relatedTarget: $this[0]\n      })\n      $this.trigger({\n        type: 'shown.bs.tab',\n        relatedTarget: $previous[0]\n      })\n    })\n  }\n\n  Tab.prototype.activate = function (element, container, callback) {\n    var $active    = container.find('> .active')\n    var transition = callback\n      && $.support.transition\n      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)\n\n    function next() {\n      $active\n        .removeClass('active')\n        .find('> .dropdown-menu > .active')\n          .removeClass('active')\n        .end()\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', false)\n\n      element\n        .addClass('active')\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', true)\n\n      if (transition) {\n        element[0].offsetWidth // reflow for transition\n        element.addClass('in')\n      } else {\n        element.removeClass('fade')\n      }\n\n      if (element.parent('.dropdown-menu').length) {\n        element\n          .closest('li.dropdown')\n            .addClass('active')\n          .end()\n          .find('[data-toggle=\"tab\"]')\n            .attr('aria-expanded', true)\n      }\n\n      callback && callback()\n    }\n\n    $active.length && transition ?\n      $active\n        .one('bsTransitionEnd', next)\n        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :\n      next()\n\n    $active.removeClass('in')\n  }\n\n\n  // TAB PLUGIN DEFINITION\n  // =====================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.tab')\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tab\n\n  $.fn.tab             = Plugin\n  $.fn.tab.Constructor = Tab\n\n\n  // TAB NO CONFLICT\n  // ===============\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n  // TAB DATA-API\n  // ============\n\n  var clickHandler = function (e) {\n    e.preventDefault()\n    Plugin.call($(this), 'show')\n  }\n\n  $(document)\n    .on('click.bs.tab.data-api', '[data-toggle=\"tab\"]', clickHandler)\n    .on('click.bs.tab.data-api', '[data-toggle=\"pill\"]', clickHandler)\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/tab.js\n// module id = 88\n// module chunks = 0","/* ========================================================================\n * Bootstrap: tooltip.js v3.3.7\n * http://getbootstrap.com/javascript/#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       = null\n    this.options    = null\n    this.enabled    = null\n    this.timeout    = null\n    this.hoverState = null\n    this.$element   = null\n    this.inState    = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.VERSION  = '3.3.7'\n\n  Tooltip.TRANSITION_DURATION = 150\n\n  Tooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n    html: false,\n    container: false,\n    viewport: {\n      selector: 'body',\n      padding: 0\n    }\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled   = true\n    this.type      = type\n    this.$element  = $(element)\n    this.options   = this.getOptions(options)\n    this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))\n    this.inState   = { click: false, hover: false, focus: false }\n\n    if (this.$element[0] instanceof document.constructor && !this.options.selector) {\n      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')\n    }\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay,\n        hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true\n    }\n\n    if (self.tip().hasClass('in') || self.hoverState == 'in') {\n      self.hoverState = 'in'\n      return\n    }\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.isInStateTrue = function () {\n    for (var key in this.inState) {\n      if (this.inState[key]) return true\n    }\n\n    return false\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false\n    }\n\n    if (self.isInStateTrue()) return\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\n      if (e.isDefaultPrevented() || !inDom) return\n      var that = this\n\n      var $tip = this.tip()\n\n      var tipId = this.getUID(this.type)\n\n      this.setContent()\n      $tip.attr('id', tipId)\n      this.$element.attr('aria-describedby', tipId)\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n        .data('bs.' + this.type, this)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n      this.$element.trigger('inserted.bs.' + this.type)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var orgPlacement = placement\n        var viewportDim = this.getPosition(this.$viewport)\n\n        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :\n                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :\n                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :\n                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n\n      var complete = function () {\n        var prevHoverState = that.hoverState\n        that.$element.trigger('shown.bs.' + that.type)\n        that.hoverState = null\n\n        if (prevHoverState == 'out') that.leave(that)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one('bsTransitionEnd', complete)\n          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n        complete()\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  += marginTop\n    offset.left += marginLeft\n\n    // $.fn.offset doesn't round pixel values\n    // so we use setOffset directly with our own function B-0\n    $.offset.setOffset($tip[0], $.extend({\n      using: function (props) {\n        $tip.css({\n          top: Math.round(props.top),\n          left: Math.round(props.left)\n        })\n      }\n    }, offset), 0)\n\n    $tip.addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      offset.top = offset.top + height - actualHeight\n    }\n\n    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)\n\n    if (delta.left) offset.left += delta.left\n    else offset.top += delta.top\n\n    var isVertical          = /top|bottom/.test(placement)\n    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight\n    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'\n\n    $tip.offset(offset)\n    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)\n  }\n\n  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {\n    this.arrow()\n      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')\n      .css(isVertical ? 'top' : 'left', '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function (callback) {\n    var that = this\n    var $tip = $(this.$tip)\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n      if (that.$element) { // TODO: Check whether guarding this code with this `if` is really necessary.\n        that.$element\n          .removeAttr('aria-describedby')\n          .trigger('hidden.bs.' + that.type)\n      }\n      callback && callback()\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && $tip.hasClass('fade') ?\n      $tip\n        .one('bsTransitionEnd', complete)\n        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n      complete()\n\n    this.hoverState = null\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function ($element) {\n    $element   = $element || this.$element\n\n    var el     = $element[0]\n    var isBody = el.tagName == 'BODY'\n\n    var elRect    = el.getBoundingClientRect()\n    if (elRect.width == null) {\n      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\n      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })\n    }\n    var isSvg = window.SVGElement && el instanceof window.SVGElement\n    // Avoid using $.offset() on SVGs since it gives incorrect results in jQuery 3.\n    // See https://github.com/twbs/bootstrap/issues/20280\n    var elOffset  = isBody ? { top: 0, left: 0 } : (isSvg ? null : $element.offset())\n    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }\n    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null\n\n    return $.extend({}, elRect, scroll, outerDims, elOffset)\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\n\n  }\n\n  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {\n    var delta = { top: 0, left: 0 }\n    if (!this.$viewport) return delta\n\n    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0\n    var viewportDimensions = this.getPosition(this.$viewport)\n\n    if (/right|left/.test(placement)) {\n      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll\n      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight\n      if (topEdgeOffset < viewportDimensions.top) { // top overflow\n        delta.top = viewportDimensions.top - topEdgeOffset\n      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow\n        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset\n      }\n    } else {\n      var leftEdgeOffset  = pos.left - viewportPadding\n      var rightEdgeOffset = pos.left + viewportPadding + actualWidth\n      if (leftEdgeOffset < viewportDimensions.left) { // left overflow\n        delta.left = viewportDimensions.left - leftEdgeOffset\n      } else if (rightEdgeOffset > viewportDimensions.right) { // right overflow\n        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset\n      }\n    }\n\n    return delta\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.getUID = function (prefix) {\n    do prefix += ~~(Math.random() * 1000000)\n    while (document.getElementById(prefix))\n    return prefix\n  }\n\n  Tooltip.prototype.tip = function () {\n    if (!this.$tip) {\n      this.$tip = $(this.options.template)\n      if (this.$tip.length != 1) {\n        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')\n      }\n    }\n    return this.$tip\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = this\n    if (e) {\n      self = $(e.currentTarget).data('bs.' + this.type)\n      if (!self) {\n        self = new this.constructor(e.currentTarget, this.getDelegateOptions())\n        $(e.currentTarget).data('bs.' + this.type, self)\n      }\n    }\n\n    if (e) {\n      self.inState.click = !self.inState.click\n      if (self.isInStateTrue()) self.enter(self)\n      else self.leave(self)\n    } else {\n      self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n    }\n  }\n\n  Tooltip.prototype.destroy = function () {\n    var that = this\n    clearTimeout(this.timeout)\n    this.hide(function () {\n      that.$element.off('.' + that.type).removeData('bs.' + that.type)\n      if (that.$tip) {\n        that.$tip.detach()\n      }\n      that.$tip = null\n      that.$arrow = null\n      that.$viewport = null\n      that.$element = null\n    })\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip             = Plugin\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/tooltip.js\n// module id = 89\n// module chunks = 0","/* ========================================================================\n * Bootstrap: transition.js v3.3.7\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2016 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      WebkitTransition : 'webkitTransitionEnd',\n      MozTransition    : 'transitionend',\n      OTransition      : 'oTransitionEnd otransitionend',\n      transition       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false\n    var $el = this\n    $(this).one('bsTransitionEnd', function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n\n    if (!$.support.transition) return\n\n    $.event.special.bsTransitionEnd = {\n      bindType: $.support.transition.end,\n      delegateType: $.support.transition.end,\n      handle: function (e) {\n        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)\n      }\n    }\n  })\n\n}(jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/js/transition.js\n// module id = 90\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/dist/css/bootstrap.css\n// module id = 91\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/font-awesome/css/font-awesome.css\n// module id = 92\n// module chunks = 0","module.exports = \"<template>\\r\\n\\t<div class=\\\"container\\\">\\r\\n\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t<div class=\\\"left-side four columns\\\" style=\\\"margin-top: 10%\\\">\\r\\n\\t\\t\\t\\t<h1>Standalone Document Viewer</h1>\\r\\n\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<h2>Set authorization level</h2>\\r\\n\\t\\t\\t\\t\\t<select value.bind=\\\"selectedAuthLevel\\\" change.delegate=\\\"authChange()\\\">\\r\\n\\t\\t\\t\\t\\t    <option value=\\\"\\\">None</option>\\r\\n                        <option repeat.for=\\\"authLevel of authLevels\\\" value.bind=\\\"authLevel\\\">${authLevel}</option>\\r\\n                    </select>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<h2>Upload</h2>\\r\\n\\t\\t\\t\\t\\t<input id=\\\"fileInput\\\" type=\\\"file\\\" multiple=\\\"multiple\\\" accept=\\\"*\\\" change.delegate=\\\"fileChange()\\\" files.two-way=\\\"selectedFiles\\\" />\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<h2>Document list</h2>\\r\\n\\t\\t\\t\\t    <ul id=\\\"docList\\\">\\r\\n\\t\\t\\t\\t        <li repeat.for=\\\"document of documents\\\">\\r\\n\\t\\t\\t\\t            <a href=\\\"#\\\" class=\\\"docViewerLink\\\" data.bind=\\\"documents\\\" data-id=\\\"${document.Id}\\\" click.delegate=\\\"showDocumentInViewer(document.Id)\\\">${document.Name}</a>\\r\\n\\t\\t\\t\\t        </li>\\r\\n\\t\\t\\t\\t    </ul>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div id=\\\"editForm\\\" show.bind=\\\"isEditFormOpened\\\">\\r\\n\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t<h2>Delete</h2>\\r\\n\\t\\t\\t\\t\\t\\t<button id=\\\"deleteContent\\\" click.delegate=\\\"deleteDocument()\\\">Delete content</button>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<form id=\\\"permissionsForm\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2>Set permissions</h2>\\r\\n\\t\\t\\t\\t\\t    <label repeat.for=\\\"permissionInfo of permissionInfos\\\">\\r\\n\\t\\t\\t\\t\\t        <input id=\\\"$index\\\" type=\\\"checkbox\\\" model.bind=\\\"permissionInfo\\\" matcher.bind=\\\"permissionMatcher\\\" checked.bind=\\\"selectedPermissions\\\" name=\\\"permissions\\\">\\r\\n\\t\\t\\t\\t\\t        <span>${permissionInfo.displayName}</span>\\r\\n\\t\\t\\t\\t\\t    </label>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"button\\\" id=\\\"submitPermissions\\\" click.delegate=\\\"submitPermissionInfos()\\\" value=\\\"Save\\\" />\\r\\n\\t\\t\\t\\t\\t</form>\\r\\n\\r\\n\\t\\t\\t\\t\\t<form id=\\\"watermarkForm\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2>Set watermark properties</h2>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<label>\\r\\n                            <span>Text:</span>\\r\\n                            <input value.bind=\\\"watermarkText\\\" type=\\\"text\\\"/>\\r\\n                        </label>\\r\\n\\t\\t\\t\\t\\t\\t<br/>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<label>\\r\\n                            <span>Font name:</span>\\r\\n                            <br/>\\r\\n                            <select value.bind=\\\"selectedFontType\\\">\\r\\n                                <option repeat.for=\\\"fontType of fontTypes\\\" value.bind=\\\"fontType\\\">${fontType}</option>\\r\\n                            </select>\\r\\n                        </label>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<label>\\r\\n                            <span>Font size:</span>\\r\\n                            <br/>\\r\\n                            <select value.bind=\\\"selectedFontSize\\\">\\r\\n                                <option repeat.for=\\\"fontSize of fontSizes\\\" value.bind=\\\"fontSize\\\">${fontSize}</option>\\r\\n                            </select>\\r\\n                        </label>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<label>\\r\\n                            <span>Font color:</span>\\r\\n                            <br/>\\r\\n                            <select value.bind=\\\"selectedFontColor\\\">\\r\\n                                <option repeat.for=\\\"fontColor of fontColors\\\" value.bind=\\\"fontColor.value\\\">${fontColor.name}</option>\\r\\n                            </select>\\r\\n                        </label>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"submit\\\" click.delegate=\\\"submitWatermarkProperties()\\\" id=\\\"submitWatermarkProperties\\\" value=\\\"Save\\\" />\\r\\n\\t\\t\\t\\t\\t</form>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"eight columns\\\" style=\\\"margin-top: 10%\\\">\\r\\n\\t\\t\\t\\t<div id=\\\"preview-overlay\\\">\\r\\n\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div id=\\\"viewerContainer\\\" style=\\\"width: 100%; height: 800px\\\">\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</template>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.html\n// module id = 93\n// module chunks = 0","module.exports = \"<template>\\r\\n    <ai-dialog>\\r\\n        <ai-dialog-header>\\r\\n            <h1>${sr.title}</h1>\\r\\n            <i class=\\\"fa fa-close\\\" click.trigger=\\\"Close()\\\"></i>\\r\\n        </ai-dialog-header>\\r\\n        <div class=\\\"container\\\">\\r\\n            <form class=\\\"form-group\\\" submit.delegate=\\\"Submit()\\\">\\r\\n                <ai-dialog-body>\\r\\n\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"radio\\\">\\r\\n                            <h4>${sr.pagesTitle}</h4>\\r\\n                            <label repeat.for=\\\"page of pages\\\">\\r\\n                                <input type=\\\"radio\\\" model.bind=\\\"page\\\" name=\\\"pages\\\" checked.bind=\\\"$parent.selectedPages\\\" change.delegate=\\\"selectedPageChanged()\\\">${page.name}\\r\\n                            </label>\\r\\n                            <div if.bind=\\\"isPagerangeSelected\\\">\\r\\n                                <div class=\\\"six columns\\\">\\r\\n                                    <label>\\r\\n                                        ${sr.from} <input type=\\\"number\\\" value.bind=\\\"pageFrom\\\" min=\\\"1\\\" max=\\\"${pageCount}\\\"/>\\r\\n                                    </label>\\r\\n                                </div>\\r\\n                                <div class=\\\"six columns\\\">\\r\\n                                    <label>\\r\\n                                        ${sr.to} <input type=\\\"number\\\" value.bind=\\\"pageTo\\\" min=\\\"1\\\" max=\\\"${pageCount}\\\"/>\\r\\n                                    </label>\\r\\n                                </div>\\r\\n                            </div>\\r\\n\\r\\n                        </div>\\r\\n                        <br>\\r\\n                        <div class=\\\"radio\\\">\\r\\n                            <h4>${sr.formatTitle}</h4>\\r\\n                            <label repeat.for=\\\"format of formats\\\">\\r\\n                                <input type=\\\"radio\\\" model.bind=\\\"format\\\" name=\\\"pageFormats\\\" checked.bind=\\\"$parent.selectedFormat\\\">${format.name}\\r\\n                            </label>\\r\\n                        </div>\\r\\n                        <div class=\\\"checkbox\\\">\\r\\n                            <h4>${sr.watermarkTitle}</h4>\\r\\n                            <label><input type=\\\"checkbox\\\" checked.bind=\\\"showWatermark\\\" checked.one-time=\\\"showWatermarkDisabled\\\" disabled.bind=\\\"showWatermarkDisabled\\\"}/>${sr.showWatermark}</label>\\r\\n                        </div>\\r\\n                        <br>\\r\\n                        <div class=\\\"checkbox\\\" id=\\\"vvExportOptionsRedactionsCheckbox\\\">\\r\\n                            <h4 data-localize=\\\"commonDialog.redactionsSet\\\">${sr.redactionTitle}</h4>\\r\\n                            <label><input type=\\\"checkbox\\\" checked.bind=\\\"showRedactions\\\" checked.one-time=\\\"showRedactionsDisabled\\\" disabled.bind=\\\"showRedactionsDisabled\\\"/>${sr.showRedactions}</label>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <ul>\\r\\n                            <li repeat.for=\\\"error of errors\\\">${error}</li>\\r\\n                        </ul>\\r\\n                    </div>\\r\\n                </ai-dialog-body>\\r\\n                <ai-dialog-footer>\\r\\n                    <div class=\\\"row\\\">\\r\\n                        <div class=\\\"six columns\\\">\\r\\n                            <button click.trigger=\\\"dialogController.cancel()\\\">${sr.cancelBtn}</button>\\r\\n                        </div>\\r\\n                        <div class=\\\"six columns\\\">\\r\\n                            <button class=\\\"attention\\\" type=\\\"submit\\\">${sr.submitBtn}</button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </ai-dialog-footer>\\r\\n            </form>\\r\\n        </div>\\r\\n    </ai-dialog>\\r\\n</template>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/transcend/components/modal/exportModal.html\n// module id = 94\n// module chunks = 0","module.exports = \"<template>\\r\\n    <ai-dialog>\\r\\n        <ai-dialog-header>\\r\\n            <h1>${sr.title}</h1>\\r\\n            <i class=\\\"fa fa-close\\\" click.trigger=\\\"Close()\\\"></i>\\r\\n        </ai-dialog-header>\\r\\n            <ai-dialog-body>\\r\\n                <div>${sr.doYouWantToSave}</div>\\r\\n            </ai-dialog-body>\\r\\n            <ai-dialog-footer>\\r\\n                <button class=\\\"save-and-close okButton attention\\\" click.trigger=\\\"submit(true)\\\">${sr.saveBtn}</button>\\r\\n                <button class=\\\"discard-and-close attention\\\" click.trigger=\\\"submit(false)\\\">${sr.dontSaveBtn}</button>\\r\\n                <button class=\\\"dont-close cancel attention\\\" click.trigger=\\\"dialogController.cancel()\\\">${sr.cancelBtn}</button>\\r\\n            </ai-dialog-footer>\\r\\n    </ai-dialog>\\r\\n</template>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/transcend/components/modal/saveModal.html\n// module id = 95\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (typeof input === 'string') {\n      this.url = input\n    } else {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split('\\r\\n').forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 97\n// module chunks = 0","var map = {\n\t\"./app\": 77,\n\t\"./app.html\": 93,\n\t\"./aurelia-bootstrapper-webpack\": \"aurelia-bootstrapper-webpack\",\n\t\"./aurelia-dialog\": \"aurelia-dialog\",\n\t\"./aurelia-dialog/ai-dialog\": 21,\n\t\"./aurelia-dialog/ai-dialog-body\": 18,\n\t\"./aurelia-dialog/ai-dialog-body.js\": 18,\n\t\"./aurelia-dialog/ai-dialog-footer\": 19,\n\t\"./aurelia-dialog/ai-dialog-footer.js\": 19,\n\t\"./aurelia-dialog/ai-dialog-header\": 20,\n\t\"./aurelia-dialog/ai-dialog-header.js\": 20,\n\t\"./aurelia-dialog/ai-dialog.js\": 21,\n\t\"./aurelia-dialog/attach-focus\": 22,\n\t\"./aurelia-dialog/attach-focus.js\": 22,\n\t\"./aurelia-event-aggregator\": \"aurelia-event-aggregator\",\n\t\"./aurelia-fetch-client\": \"aurelia-fetch-client\",\n\t\"./aurelia-framework\": \"aurelia-framework\",\n\t\"./aurelia-history-browser\": \"aurelia-history-browser\",\n\t\"./aurelia-loader-webpack\": \"aurelia-loader-webpack\",\n\t\"./aurelia-logging-console\": \"aurelia-logging-console\",\n\t\"./aurelia-pal-browser\": \"aurelia-pal-browser\",\n\t\"./aurelia-polyfills\": \"aurelia-polyfills\",\n\t\"./aurelia-route-recognizer\": \"aurelia-route-recognizer\",\n\t\"./aurelia-router\": \"aurelia-router\",\n\t\"./aurelia-templating-binding\": \"aurelia-templating-binding\",\n\t\"./aurelia-templating-resources\": \"aurelia-templating-resources\",\n\t\"./aurelia-templating-resources/attr-binding-behavior\": 24,\n\t\"./aurelia-templating-resources/attr-binding-behavior.js\": 24,\n\t\"./aurelia-templating-resources/binding-mode-behaviors\": 26,\n\t\"./aurelia-templating-resources/binding-mode-behaviors.js\": 26,\n\t\"./aurelia-templating-resources/compose\": 27,\n\t\"./aurelia-templating-resources/compose.js\": 27,\n\t\"./aurelia-templating-resources/debounce-binding-behavior\": 28,\n\t\"./aurelia-templating-resources/debounce-binding-behavior.js\": 28,\n\t\"./aurelia-templating-resources/focus\": 29,\n\t\"./aurelia-templating-resources/focus.js\": 29,\n\t\"./aurelia-templating-resources/hide\": 30,\n\t\"./aurelia-templating-resources/hide.js\": 30,\n\t\"./aurelia-templating-resources/if\": 31,\n\t\"./aurelia-templating-resources/if.js\": 31,\n\t\"./aurelia-templating-resources/repeat\": 32,\n\t\"./aurelia-templating-resources/repeat.js\": 32,\n\t\"./aurelia-templating-resources/replaceable\": 33,\n\t\"./aurelia-templating-resources/replaceable.js\": 33,\n\t\"./aurelia-templating-resources/sanitize-html\": 34,\n\t\"./aurelia-templating-resources/sanitize-html.js\": 34,\n\t\"./aurelia-templating-resources/show\": 35,\n\t\"./aurelia-templating-resources/show.js\": 35,\n\t\"./aurelia-templating-resources/signal-binding-behavior\": 36,\n\t\"./aurelia-templating-resources/signal-binding-behavior.js\": 36,\n\t\"./aurelia-templating-resources/throttle-binding-behavior\": 37,\n\t\"./aurelia-templating-resources/throttle-binding-behavior.js\": 37,\n\t\"./aurelia-templating-resources/update-trigger-binding-behavior\": 38,\n\t\"./aurelia-templating-resources/update-trigger-binding-behavior.js\": 38,\n\t\"./aurelia-templating-resources/with\": 39,\n\t\"./aurelia-templating-resources/with.js\": 39,\n\t\"./aurelia-templating-router\": \"aurelia-templating-router\",\n\t\"./aurelia-templating-router/route-href\": 40,\n\t\"./aurelia-templating-router/route-href.js\": 40,\n\t\"./aurelia-templating-router/router-view\": 41,\n\t\"./aurelia-templating-router/router-view.js\": 41,\n\t\"./bluebird\": \"bluebird\",\n\t\"./bootstrap\": \"bootstrap\",\n\t\"./core/components/_base\": 15,\n\t\"./core/components/_util\": 10,\n\t\"./core/components/dropdown/Dropdown\": 65,\n\t\"./core/components/dropdown/Dropdown.tpl.html\": 62,\n\t\"./core/components/modal/Modal\": 66,\n\t\"./core/components/modal/Modal.tpl.html\": 63,\n\t\"./core/components/toolbar/Toolbar\": 67,\n\t\"./core/components/toolbar/Toolbar.tpl.html\": 64,\n\t\"./core/docviewer\": 68,\n\t\"./core/jquery.throttle\": 69,\n\t\"./core/microtemplating\": 16,\n\t\"./demofiles/Authorization\": 57,\n\t\"./isomorphic-fetch\": \"isomorphic-fetch\",\n\t\"./jquery\": \"jquery\",\n\t\"./main\": 78,\n\t\"./transcend/components/modal/exportModal\": 58,\n\t\"./transcend/components/modal/exportModal.html\": 94,\n\t\"./transcend/components/modal/saveModal\": 59,\n\t\"./transcend/components/modal/saveModal.html\": 95,\n\t\"./transcend/transcend-endpoints\": 42,\n\t\"./transcend/transcend-printer\": 60,\n\t\"./transcend/transcend-viewer\": 61\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 98;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src ^\\.\\/.*$\n// module id = 98\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DialogResult = exports.DialogController = exports.DialogService = exports.DialogConfiguration = exports.AttachFocus = exports.AiDialogFooter = exports.AiDialogBody = exports.AiDialogHeader = exports.AiDialog = undefined;\n\nvar _aiDialog = require('./ai-dialog');\n\nObject.defineProperty(exports, 'AiDialog', {\n  enumerable: true,\n  get: function get() {\n    return _aiDialog.AiDialog;\n  }\n});\n\nvar _aiDialogHeader = require('./ai-dialog-header');\n\nObject.defineProperty(exports, 'AiDialogHeader', {\n  enumerable: true,\n  get: function get() {\n    return _aiDialogHeader.AiDialogHeader;\n  }\n});\n\nvar _aiDialogBody = require('./ai-dialog-body');\n\nObject.defineProperty(exports, 'AiDialogBody', {\n  enumerable: true,\n  get: function get() {\n    return _aiDialogBody.AiDialogBody;\n  }\n});\n\nvar _aiDialogFooter = require('./ai-dialog-footer');\n\nObject.defineProperty(exports, 'AiDialogFooter', {\n  enumerable: true,\n  get: function get() {\n    return _aiDialogFooter.AiDialogFooter;\n  }\n});\n\nvar _attachFocus = require('./attach-focus');\n\nObject.defineProperty(exports, 'AttachFocus', {\n  enumerable: true,\n  get: function get() {\n    return _attachFocus.AttachFocus;\n  }\n});\nexports.configure = configure;\n\nvar _dialogConfiguration = require('./dialog-configuration');\n\nObject.defineProperty(exports, 'DialogConfiguration', {\n  enumerable: true,\n  get: function get() {\n    return _dialogConfiguration.DialogConfiguration;\n  }\n});\n\nvar _dialogService = require('./dialog-service');\n\nObject.defineProperty(exports, 'DialogService', {\n  enumerable: true,\n  get: function get() {\n    return _dialogService.DialogService;\n  }\n});\n\nvar _dialogController = require('./dialog-controller');\n\nObject.defineProperty(exports, 'DialogController', {\n  enumerable: true,\n  get: function get() {\n    return _dialogController.DialogController;\n  }\n});\n\nvar _dialogResult = require('./dialog-result');\n\nObject.defineProperty(exports, 'DialogResult', {\n  enumerable: true,\n  get: function get() {\n    return _dialogResult.DialogResult;\n  }\n});\nfunction configure(aurelia, callback) {\n  var config = new _dialogConfiguration.DialogConfiguration(aurelia);\n\n  if (typeof callback === 'function') {\n    callback(config);\n  } else {\n    config.useDefaults();\n  }\n\n  config._apply();\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-dialog/dist/commonjs/aurelia-dialog.js\n// module id = aurelia-dialog\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.json = json;\n\n\n\nfunction json(body) {\n  return new Blob([JSON.stringify(body)], { type: 'application/json' });\n}\n\nvar HttpClientConfiguration = exports.HttpClientConfiguration = function () {\n  function HttpClientConfiguration() {\n    \n\n    this.baseUrl = '';\n    this.defaults = {};\n    this.interceptors = [];\n  }\n\n  HttpClientConfiguration.prototype.withBaseUrl = function withBaseUrl(baseUrl) {\n    this.baseUrl = baseUrl;\n    return this;\n  };\n\n  HttpClientConfiguration.prototype.withDefaults = function withDefaults(defaults) {\n    this.defaults = defaults;\n    return this;\n  };\n\n  HttpClientConfiguration.prototype.withInterceptor = function withInterceptor(interceptor) {\n    this.interceptors.push(interceptor);\n    return this;\n  };\n\n  HttpClientConfiguration.prototype.useStandardConfiguration = function useStandardConfiguration() {\n    var standardConfig = { credentials: 'same-origin' };\n    Object.assign(this.defaults, standardConfig, this.defaults);\n    return this.rejectErrorResponses();\n  };\n\n  HttpClientConfiguration.prototype.rejectErrorResponses = function rejectErrorResponses() {\n    return this.withInterceptor({ response: rejectOnError });\n  };\n\n  return HttpClientConfiguration;\n}();\n\nfunction rejectOnError(response) {\n  if (!response.ok) {\n    throw response;\n  }\n\n  return response;\n}\n\nvar HttpClient = exports.HttpClient = function () {\n  function HttpClient() {\n    \n\n    this.activeRequestCount = 0;\n    this.isRequesting = false;\n    this.isConfigured = false;\n    this.baseUrl = '';\n    this.defaults = null;\n    this.interceptors = [];\n\n    if (typeof fetch === 'undefined') {\n      throw new Error('HttpClient requires a Fetch API implementation, but the current environment doesn\\'t support it. You may need to load a polyfill such as https://github.com/github/fetch.');\n    }\n  }\n\n  HttpClient.prototype.configure = function configure(config) {\n    var normalizedConfig = void 0;\n\n    if ((typeof config === 'undefined' ? 'undefined' : _typeof(config)) === 'object') {\n      normalizedConfig = { defaults: config };\n    } else if (typeof config === 'function') {\n      normalizedConfig = new HttpClientConfiguration();\n      normalizedConfig.baseUrl = this.baseUrl;\n      normalizedConfig.defaults = Object.assign({}, this.defaults);\n      normalizedConfig.interceptors = this.interceptors;\n\n      var c = config(normalizedConfig);\n      if (HttpClientConfiguration.prototype.isPrototypeOf(c)) {\n        normalizedConfig = c;\n      }\n    } else {\n      throw new Error('invalid config');\n    }\n\n    var defaults = normalizedConfig.defaults;\n    if (defaults && Headers.prototype.isPrototypeOf(defaults.headers)) {\n      throw new Error('Default headers must be a plain object.');\n    }\n\n    this.baseUrl = normalizedConfig.baseUrl;\n    this.defaults = defaults;\n    this.interceptors = normalizedConfig.interceptors || [];\n    this.isConfigured = true;\n\n    return this;\n  };\n\n  HttpClient.prototype.fetch = function (_fetch) {\n    function fetch(_x, _x2) {\n      return _fetch.apply(this, arguments);\n    }\n\n    fetch.toString = function () {\n      return _fetch.toString();\n    };\n\n    return fetch;\n  }(function (input, init) {\n    var _this = this;\n\n    trackRequestStart.call(this);\n\n    var request = Promise.resolve().then(function () {\n      return buildRequest.call(_this, input, init, _this.defaults);\n    });\n    var promise = processRequest(request, this.interceptors).then(function (result) {\n      var response = null;\n\n      if (Response.prototype.isPrototypeOf(result)) {\n        response = result;\n      } else if (Request.prototype.isPrototypeOf(result)) {\n        request = Promise.resolve(result);\n        response = fetch(result);\n      } else {\n        throw new Error('An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [' + result + ']');\n      }\n\n      return request.then(function (_request) {\n        return processResponse(response, _this.interceptors, _request);\n      });\n    });\n\n    return trackRequestEndWith.call(this, promise);\n  });\n\n  return HttpClient;\n}();\n\nvar absoluteUrlRegexp = /^([a-z][a-z0-9+\\-.]*:)?\\/\\//i;\n\nfunction trackRequestStart() {\n  this.isRequesting = !! ++this.activeRequestCount;\n}\n\nfunction trackRequestEnd() {\n  this.isRequesting = !! --this.activeRequestCount;\n}\n\nfunction trackRequestEndWith(promise) {\n  var handle = trackRequestEnd.bind(this);\n  promise.then(handle, handle);\n  return promise;\n}\n\nfunction parseHeaderValues(headers) {\n  var parsedHeaders = {};\n  for (var name in headers || {}) {\n    if (headers.hasOwnProperty(name)) {\n      parsedHeaders[name] = typeof headers[name] === 'function' ? headers[name]() : headers[name];\n    }\n  }\n  return parsedHeaders;\n}\n\nfunction buildRequest(input, init) {\n  var defaults = this.defaults || {};\n  var request = void 0;\n  var body = void 0;\n  var requestContentType = void 0;\n\n  var parsedDefaultHeaders = parseHeaderValues(defaults.headers);\n  if (Request.prototype.isPrototypeOf(input)) {\n    request = input;\n    requestContentType = new Headers(request.headers).get('Content-Type');\n  } else {\n    init || (init = {});\n    body = init.body;\n    var bodyObj = body ? { body: body } : null;\n    var requestInit = Object.assign({}, defaults, { headers: {} }, init, bodyObj);\n    requestContentType = new Headers(requestInit.headers).get('Content-Type');\n    request = new Request(getRequestUrl(this.baseUrl, input), requestInit);\n  }\n  if (!requestContentType && new Headers(parsedDefaultHeaders).has('content-type')) {\n    request.headers.set('Content-Type', new Headers(parsedDefaultHeaders).get('content-type'));\n  }\n  setDefaultHeaders(request.headers, parsedDefaultHeaders);\n  if (body && Blob.prototype.isPrototypeOf(body) && body.type) {\n    request.headers.set('Content-Type', body.type);\n  }\n  return request;\n}\n\nfunction getRequestUrl(baseUrl, url) {\n  if (absoluteUrlRegexp.test(url)) {\n    return url;\n  }\n\n  return (baseUrl || '') + url;\n}\n\nfunction setDefaultHeaders(headers, defaultHeaders) {\n  for (var name in defaultHeaders || {}) {\n    if (defaultHeaders.hasOwnProperty(name) && !headers.has(name)) {\n      headers.set(name, defaultHeaders[name]);\n    }\n  }\n}\n\nfunction processRequest(request, interceptors) {\n  return applyInterceptors(request, interceptors, 'request', 'requestError');\n}\n\nfunction processResponse(response, interceptors, request) {\n  return applyInterceptors(response, interceptors, 'response', 'responseError', request);\n}\n\nfunction applyInterceptors(input, interceptors, successName, errorName) {\n  for (var _len = arguments.length, interceptorArgs = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n    interceptorArgs[_key - 4] = arguments[_key];\n  }\n\n  return (interceptors || []).reduce(function (chain, interceptor) {\n    var successHandler = interceptor[successName];\n    var errorHandler = interceptor[errorName];\n\n    return chain.then(successHandler && function (value) {\n      return successHandler.call.apply(successHandler, [interceptor, value].concat(interceptorArgs));\n    } || identity, errorHandler && function (reason) {\n      return errorHandler.call.apply(errorHandler, [interceptor, reason].concat(interceptorArgs));\n    } || thrower);\n  }, Promise.resolve(input));\n}\n\nfunction identity(x) {\n  return x;\n}\n\nfunction thrower(x) {\n  throw x;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/aurelia-fetch-client/dist/commonjs/aurelia-fetch-client.js\n// module id = aurelia-fetch-client\n// module chunks = 0","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2013-2015 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 3.4.6\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule\");\nvar Queue = _dereq_(\"./queue\");\nvar util = _dereq_(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype.invokeFirst = function (fn, receiver, arg) {\n    this._normalQueue.unshift(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue\":26,\"./schedule\":29,\"./util\":36}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise\":22}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var args = [].slice.call(arguments, 1);;\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util\":36}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n},{\"./util\":36}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util\");\nvar getKeys = _dereq_(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n},{\"./es5\":13,\"./util\":36}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n},{}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = _dereq_(\"./errors\").Warning;\nvar util = _dereq_(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (true ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0) {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n},{}],11:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n},{}],12:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5\":13,\"./util\":36}],13:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],14:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise) {\nvar util = _dereq_(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nreturn PassThroughHandlerContext;\n};\n\n},{\"./util\":36}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = _dereq_(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors\":12,\"./util\":36}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = _dereq_(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var args = [].slice.call(arguments);;\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util\":36}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n},{\"./util\":36}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util\":36}],20:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = _dereq_(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var args = [].slice.call(arguments, 1);;\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n},{\"./errors\":12,\"./es5\":13,\"./util\":36}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./util\":36}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = _dereq_(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = _dereq_(\"./es5\");\nvar Async = _dereq_(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = _dereq_(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = _dereq_(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = _dereq_(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = _dereq_(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    _dereq_(\"./finally\")(Promise, tryConvertToPromise);\nvar catchFilter = _dereq_(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n    if (self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n}\n\nfunction Promise(executor) {\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    if (executor !== INTERNAL) {\n        check(this, executor);\n        this._resolveFromExecutor(executor);\n    }\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"expecting an object but got \" +\n                    \"A catch statement predicate \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\n_dereq_(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\n_dereq_(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\n_dereq_(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\n_dereq_(\"./direct_resolve\")(Promise);\n_dereq_(\"./synchronous_inspection\")(Promise);\n_dereq_(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.4.6\";\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n_dereq_('./timers.js')(Promise, INTERNAL, debug);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n_dereq_('./settle.js')(Promise, PromiseArray, debug);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./filter.js')(Promise, INTERNAL);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async\":2,\"./bind\":3,\"./call_get.js\":5,\"./cancel\":6,\"./catch_filter\":7,\"./context\":8,\"./debuggability\":9,\"./direct_resolve\":10,\"./each.js\":11,\"./errors\":12,\"./es5\":13,\"./filter.js\":14,\"./finally\":15,\"./generators.js\":16,\"./join\":17,\"./map.js\":18,\"./method\":19,\"./nodeback\":20,\"./nodeify.js\":21,\"./promise_array\":23,\"./promisify.js\":24,\"./props.js\":25,\"./race.js\":27,\"./reduce.js\":28,\"./settle.js\":30,\"./some.js\":31,\"./synchronous_inspection\":32,\"./thenables\":33,\"./timers.js\":34,\"./using.js\":35,\"./util\":36}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = _dereq_(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util\":36}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util\");\nvar nodebackForPromise = _dereq_(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n},{\"./errors\":12,\"./nodeback\":20,\"./util\":36}],25:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5\":13,\"./util\":36}],26:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype._unshiftOne = function(value) {\n    var capacity = this._capacity;\n    this._checkCapacity(this.length() + 1);\n    var front = this._front;\n    var i = (((( front - 1 ) &\n                    ( capacity - 1) ) ^ capacity ) - capacity );\n    this[i] = value;\n    this._front = i;\n    this._length = this.length() + 1;\n};\n\nQueue.prototype.unshift = function(fn, receiver, arg) {\n    this._unshiftOne(arg);\n    this._unshiftOne(receiver);\n    this._unshiftOne(fn);\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util\":36}],28:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = _dereq_(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n},{\"./util\":36}],29:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n                toggleScheduled = true;\n                div2.classList.toggle(\"foo\");\n            };\n\n            return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util\":36}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n},{\"./util\":36}],31:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util\");\nvar RangeError = _dereq_(\"./errors\").RangeError;\nvar AggregateError = _dereq_(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors\":12,\"./util\":36}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util\":36}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = _dereq_(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n},{\"./util\":36}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = _dereq_(\"./util\");\n    var TypeError = _dereq_(\"./errors\").TypeError;\n    var inherits = _dereq_(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors\":12,\"./util\":36}],36:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nfunction env(key, def) {\n    return isNode ? process.env[key] : def;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5\":13}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bluebird/js/browser/bluebird.js\n// module id = bluebird\n// module chunks = 0","// This file is autogenerated via the `commonjs` Grunt task. You can require() this file in a CommonJS environment.\nrequire('../../js/transition.js')\nrequire('../../js/alert.js')\nrequire('../../js/button.js')\nrequire('../../js/carousel.js')\nrequire('../../js/collapse.js')\nrequire('../../js/dropdown.js')\nrequire('../../js/modal.js')\nrequire('../../js/tooltip.js')\nrequire('../../js/popover.js')\nrequire('../../js/scrollspy.js')\nrequire('../../js/tab.js')\nrequire('../../js/affix.js')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/bootstrap/dist/js/npm.js\n// module id = bootstrap\n// module chunks = 0","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/isomorphic-fetch/fetch-npm-browserify.js\n// module id = isomorphic-fetch\n// module chunks = 0"],"sourceRoot":"../src"}